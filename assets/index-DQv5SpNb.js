function m2(E,F){for(var $=0;$<F.length;$++){const P=F[$];if(typeof P!="string"&&!Array.isArray(P)){for(const n0 in P)if(n0!=="default"&&!(n0 in E)){const K=Object.getOwnPropertyDescriptor(P,n0);K&&Object.defineProperty(E,n0,K.get?K:{enumerable:!0,get:()=>P[n0]})}}}return Object.freeze(Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}))}var $e={};function b2(E){return new Int8Array(E)}function c2(E){return new Int16Array(E)}function ja(E){return new Int32Array(E)}function za(E){return new Float32Array(E)}function d2(E){return new Float64Array(E)}function Ja(E){if(E.length==1)return za(E[0]);var F=E[0];E=E.slice(1);for(var $=[],P=0;P<F;P++)$.push(Ja(E));return $}function ga(E){if(E.length==1)return ja(E[0]);var F=E[0];E=E.slice(1);for(var $=[],P=0;P<F;P++)$.push(ga(E));return $}function e2(E){if(E.length==1)return c2(E[0]);var F=E[0];E=E.slice(1);for(var $=[],P=0;P<F;P++)$.push(e2(E));return $}function a2(E){if(E.length==1)return new Array(E[0]);var F=E[0];E=E.slice(1);for(var $=[],P=0;P<F;P++)$.push(a2(E));return $}var r2={};r2.fill=function(E,F,$,P){if(arguments.length==2)for(var n0=0;n0<E.length;n0++)E[n0]=arguments[1];else for(var n0=F;n0<$;n0++)E[n0]=P};var Ne={};Ne.arraycopy=function(E,F,$,P,n0){for(var K=F+n0;F<K;)$[P++]=E[F++]};Ne.out={};Ne.out.println=function(E){console.log(E)};Ne.out.printf=function(){console.log.apply(console,arguments)};var De={};De.SQRT2=1.4142135623730951;De.FAST_LOG10=function(E){return Math.log10(E)};De.FAST_LOG10_X=function(E,F){return Math.log10(E)*F};function z1(E){this.ordinal=E}z1.short_block_allowed=new z1(0);z1.short_block_coupled=new z1(1);z1.short_block_dispensed=new z1(2);z1.short_block_forced=new z1(3);var t2={};t2.MAX_VALUE=34028235e31;function V1(E){this.ordinal=E}V1.vbr_off=new V1(0);V1.vbr_mt=new V1(1);V1.vbr_rh=new V1(2);V1.vbr_abr=new V1(3);V1.vbr_mtrh=new V1(4);V1.vbr_default=V1.vbr_mtrh;var S2=function(E){},C0={System:Ne,VbrMode:V1,Float:t2,ShortBlock:z1,Util:De,Arrays:r2,new_array_n:a2,new_byte:b2,new_double:d2,new_float:za,new_float_n:Ja,new_int:ja,new_int_n:ga,new_short_n:e2,assert:S2},aa,wa;function A2(){if(wa)return aa;wa=1;var E=C0,F=E.System;E.VbrMode,E.Float,E.ShortBlock;var $=E.Util,P=E.Arrays;E.new_array_n,E.new_byte,E.new_double;var n0=E.new_float;E.new_float_n,E.new_int,E.new_int_n,E.assert;var K=j0();function z(){var D=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*$.SQRT2*.5/2384e-9,.017876148*$.SQRT2*.5/2384e-9,.003134727*$.SQRT2*.5/2384e-9,.002457142*$.SQRT2*.5/2384e-9,971317e-9*$.SQRT2*.5/2384e-9,218868e-9*$.SQRT2*.5/2384e-9,101566e-9*$.SQRT2*.5/2384e-9,13828e-9*$.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],Z=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],T=Z[K.SHORT_TYPE],V=Z[K.SHORT_TYPE],M=Z[K.SHORT_TYPE],J=Z[K.SHORT_TYPE],O=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function Y(d,n,e){for(var c=10,h=n+238-14-286,A=-15;A<0;A++){var f,m,u;f=D[c+-10],m=d[h+-224]*f,u=d[n+224]*f,f=D[c+-9],m+=d[h+-160]*f,u+=d[n+160]*f,f=D[c+-8],m+=d[h+-96]*f,u+=d[n+96]*f,f=D[c+-7],m+=d[h+-32]*f,u+=d[n+32]*f,f=D[c+-6],m+=d[h+32]*f,u+=d[n+-32]*f,f=D[c+-5],m+=d[h+96]*f,u+=d[n+-96]*f,f=D[c+-4],m+=d[h+160]*f,u+=d[n+-160]*f,f=D[c+-3],m+=d[h+224]*f,u+=d[n+-224]*f,f=D[c+-2],m+=d[n+-256]*f,u-=d[h+256]*f,f=D[c+-1],m+=d[n+-192]*f,u-=d[h+192]*f,f=D[c+0],m+=d[n+-128]*f,u-=d[h+128]*f,f=D[c+1],m+=d[n+-64]*f,u-=d[h+64]*f,f=D[c+2],m+=d[n+0]*f,u-=d[h+0]*f,f=D[c+3],m+=d[n+64]*f,u-=d[h+-64]*f,f=D[c+4],m+=d[n+128]*f,u-=d[h+-128]*f,f=D[c+5],m+=d[n+192]*f,u-=d[h+-192]*f,m*=D[c+6],f=u-m,e[30+A*2]=u+m,e[31+A*2]=D[c+7]*f,c+=18,n--,h++}{var m,u,i,t;u=d[n+-16]*D[c+-10],m=d[n+-32]*D[c+-2],u+=(d[n+-48]-d[n+16])*D[c+-9],m+=d[n+-96]*D[c+-1],u+=(d[n+-80]+d[n+48])*D[c+-8],m+=d[n+-160]*D[c+0],u+=(d[n+-112]-d[n+80])*D[c+-7],m+=d[n+-224]*D[c+1],u+=(d[n+-144]+d[n+112])*D[c+-6],m-=d[n+32]*D[c+2],u+=(d[n+-176]-d[n+144])*D[c+-5],m-=d[n+96]*D[c+3],u+=(d[n+-208]+d[n+176])*D[c+-4],m-=d[n+160]*D[c+4],u+=(d[n+-240]-d[n+208])*D[c+-3],m-=d[n+224],i=m-u,t=m+u,u=e[14],m=e[15]-u,e[31]=t+u,e[30]=i+m,e[15]=i-m,e[14]=t-u}{var a;a=e[28]-e[0],e[0]+=e[28],e[28]=a*D[c+-2*18+7],a=e[29]-e[1],e[1]+=e[29],e[29]=a*D[c+-2*18+7],a=e[26]-e[2],e[2]+=e[26],e[26]=a*D[c+-4*18+7],a=e[27]-e[3],e[3]+=e[27],e[27]=a*D[c+-4*18+7],a=e[24]-e[4],e[4]+=e[24],e[24]=a*D[c+-6*18+7],a=e[25]-e[5],e[5]+=e[25],e[25]=a*D[c+-6*18+7],a=e[22]-e[6],e[6]+=e[22],e[22]=a*$.SQRT2,a=e[23]-e[7],e[7]+=e[23],e[23]=a*$.SQRT2-e[7],e[7]-=e[6],e[22]-=e[7],e[23]-=e[22],a=e[6],e[6]=e[31]-a,e[31]=e[31]+a,a=e[7],e[7]=e[30]-a,e[30]=e[30]+a,a=e[22],e[22]=e[15]-a,e[15]=e[15]+a,a=e[23],e[23]=e[14]-a,e[14]=e[14]+a,a=e[20]-e[8],e[8]+=e[20],e[20]=a*D[c+-10*18+7],a=e[21]-e[9],e[9]+=e[21],e[21]=a*D[c+-10*18+7],a=e[18]-e[10],e[10]+=e[18],e[18]=a*D[c+-12*18+7],a=e[19]-e[11],e[11]+=e[19],e[19]=a*D[c+-12*18+7],a=e[16]-e[12],e[12]+=e[16],e[16]=a*D[c+-14*18+7],a=e[17]-e[13],e[13]+=e[17],e[17]=a*D[c+-14*18+7],a=-e[20]+e[24],e[20]+=e[24],e[24]=a*D[c+-12*18+7],a=-e[21]+e[25],e[21]+=e[25],e[25]=a*D[c+-12*18+7],a=e[4]-e[8],e[4]+=e[8],e[8]=a*D[c+-12*18+7],a=e[5]-e[9],e[5]+=e[9],e[9]=a*D[c+-12*18+7],a=e[0]-e[12],e[0]+=e[12],e[12]=a*D[c+-4*18+7],a=e[1]-e[13],e[1]+=e[13],e[13]=a*D[c+-4*18+7],a=e[16]-e[28],e[16]+=e[28],e[28]=a*D[c+-4*18+7],a=-e[17]+e[29],e[17]+=e[29],e[29]=a*D[c+-4*18+7],a=$.SQRT2*(e[2]-e[10]),e[2]+=e[10],e[10]=a,a=$.SQRT2*(e[3]-e[11]),e[3]+=e[11],e[11]=a,a=$.SQRT2*(-e[18]+e[26]),e[18]+=e[26],e[26]=a-e[18],a=$.SQRT2*(-e[19]+e[27]),e[19]+=e[27],e[27]=a-e[19],a=e[2],e[19]-=e[3],e[3]-=a,e[2]=e[31]-a,e[31]+=a,a=e[3],e[11]-=e[19],e[18]-=a,e[3]=e[30]-a,e[30]+=a,a=e[18],e[27]-=e[11],e[19]-=a,e[18]=e[15]-a,e[15]+=a,a=e[19],e[10]-=a,e[19]=e[14]-a,e[14]+=a,a=e[10],e[11]-=a,e[10]=e[23]-a,e[23]+=a,a=e[11],e[26]-=a,e[11]=e[22]-a,e[22]+=a,a=e[26],e[27]-=a,e[26]=e[7]-a,e[7]+=a,a=e[27],e[27]=e[6]-a,e[6]+=a,a=$.SQRT2*(e[0]-e[4]),e[0]+=e[4],e[4]=a,a=$.SQRT2*(e[1]-e[5]),e[1]+=e[5],e[5]=a,a=$.SQRT2*(e[16]-e[20]),e[16]+=e[20],e[20]=a,a=$.SQRT2*(e[17]-e[21]),e[17]+=e[21],e[21]=a,a=-$.SQRT2*(e[8]-e[12]),e[8]+=e[12],e[12]=a-e[8],a=-$.SQRT2*(e[9]-e[13]),e[9]+=e[13],e[13]=a-e[9],a=-$.SQRT2*(e[25]-e[29]),e[25]+=e[29],e[29]=a-e[25],a=-$.SQRT2*(e[24]+e[28]),e[24]-=e[28],e[28]=a-e[24],a=e[24]-e[16],e[24]=a,a=e[20]-a,e[20]=a,a=e[28]-a,e[28]=a,a=e[25]-e[17],e[25]=a,a=e[21]-a,e[21]=a,a=e[29]-a,e[29]=a,a=e[17]-e[1],e[17]=a,a=e[9]-a,e[9]=a,a=e[25]-a,e[25]=a,a=e[5]-a,e[5]=a,a=e[21]-a,e[21]=a,a=e[13]-a,e[13]=a,a=e[29]-a,e[29]=a,a=e[1]-e[0],e[1]=a,a=e[16]-a,e[16]=a,a=e[17]-a,e[17]=a,a=e[8]-a,e[8]=a,a=e[9]-a,e[9]=a,a=e[24]-a,e[24]=a,a=e[25]-a,e[25]=a,a=e[4]-a,e[4]=a,a=e[5]-a,e[5]=a,a=e[20]-a,e[20]=a,a=e[21]-a,e[21]=a,a=e[12]-a,e[12]=a,a=e[13]-a,e[13]=a,a=e[28]-a,e[28]=a,a=e[29]-a,e[29]=a,a=e[0],e[0]+=e[31],e[31]-=a,a=e[1],e[1]+=e[30],e[30]-=a,a=e[16],e[16]+=e[15],e[15]-=a,a=e[17],e[17]+=e[14],e[14]-=a,a=e[8],e[8]+=e[23],e[23]-=a,a=e[9],e[9]+=e[22],e[22]-=a,a=e[24],e[24]+=e[7],e[7]-=a,a=e[25],e[25]+=e[6],e[6]-=a,a=e[4],e[4]+=e[27],e[27]-=a,a=e[5],e[5]+=e[26],e[26]-=a,a=e[20],e[20]+=e[11],e[11]-=a,a=e[21],e[21]+=e[10],e[10]-=a,a=e[12],e[12]+=e[19],e[19]-=a,a=e[13],e[13]+=e[18],e[18]-=a,a=e[28],e[28]+=e[3],e[3]-=a,a=e[29],e[29]+=e[2],e[2]-=a}}function q(d,n){for(var e=0;e<3;e++){var c,h,A,f,m,u;f=d[n+2*3]*Z[K.SHORT_TYPE][0]-d[n+5*3],c=d[n+0*3]*Z[K.SHORT_TYPE][2]-d[n+3*3],h=f+c,A=f-c,f=d[n+5*3]*Z[K.SHORT_TYPE][0]+d[n+2*3],c=d[n+3*3]*Z[K.SHORT_TYPE][2]+d[n+0*3],m=f+c,u=-f+c,c=(d[n+1*3]*Z[K.SHORT_TYPE][1]-d[n+4*3])*2069978111953089e-26,f=(d[n+4*3]*Z[K.SHORT_TYPE][1]+d[n+1*3])*2069978111953089e-26,d[n+3*0]=h*190752519173728e-25+c,d[n+3*5]=-m*190752519173728e-25+f,A=A*.8660254037844387*1907525191737281e-26,m=m*.5*1907525191737281e-26+f,d[n+3*1]=A-m,d[n+3*2]=A+m,h=h*.5*1907525191737281e-26-c,u=u*.8660254037844387*1907525191737281e-26,d[n+3*3]=h+u,d[n+3*4]=h-u,n++}}function G(d,n,e){var c,h;{var A,f,m,u,i,t,a,s;A=e[17]-e[9],m=e[15]-e[11],u=e[14]-e[12],i=e[0]+e[8],t=e[1]+e[7],a=e[2]+e[6],s=e[3]+e[5],d[n+17]=i+a-s-(t-e[4]),h=(i+a-s)*V[19]+(t-e[4]),c=(A-m-u)*V[18],d[n+5]=c+h,d[n+6]=c-h,f=(e[16]-e[10])*V[18],t=t*V[19]+e[4],c=A*V[12]+f+m*V[13]+u*V[14],h=-i*V[16]+t-a*V[17]+s*V[15],d[n+1]=c+h,d[n+2]=c-h,c=A*V[13]-f-m*V[14]+u*V[12],h=-i*V[17]+t-a*V[15]+s*V[16],d[n+9]=c+h,d[n+10]=c-h,c=A*V[14]-f+m*V[12]-u*V[13],h=i*V[15]-t+a*V[16]-s*V[17],d[n+13]=c+h,d[n+14]=c-h}{var _,v,o,L,x,y,r,l;_=e[8]-e[0],o=e[6]-e[2],L=e[5]-e[3],x=e[17]+e[9],y=e[16]+e[10],r=e[15]+e[11],l=e[14]+e[12],d[n+0]=x+r+l+(y+e[13]),c=(x+r+l)*V[19]-(y+e[13]),h=(_-o+L)*V[18],d[n+11]=c+h,d[n+12]=c-h,v=(e[7]-e[1])*V[18],y=e[13]-y*V[19],c=x*V[15]-y+r*V[16]+l*V[17],h=_*V[14]+v+o*V[12]+L*V[13],d[n+3]=c+h,d[n+4]=c-h,c=-x*V[17]+y-r*V[15]-l*V[16],h=_*V[13]+v-o*V[14]-L*V[12],d[n+7]=c+h,d[n+8]=c-h,c=-x*V[16]+y-r*V[17]-l*V[15],h=_*V[12]-v+o*V[13]-L*V[14],d[n+15]=c+h,d[n+16]=c-h}}this.mdct_sub48=function(d,n,e){for(var c=n,h=286,A=0;A<d.channels_out;A++){for(var f=0;f<d.mode_gr;f++){for(var m,u=d.l3_side.tt[f][A],i=u.xr,t=0,a=d.sb_sample[A][1-f],s=0,_=0;_<18/2;_++)for(Y(c,h,a[s]),Y(c,h+32,a[s+1]),s+=2,h+=64,m=1;m<32;m+=2)a[s-1][m]*=-1;for(m=0;m<32;m++,t+=18){var v=u.block_type,o=d.sb_sample[A][f],L=d.sb_sample[A][1-f];if(u.mixed_block_flag!=0&&m<2&&(v=0),d.amp_filter[m]<1e-12)P.fill(i,t+0,t+18,0);else{if(d.amp_filter[m]<1)for(var _=0;_<18;_++)L[_][O[m]]*=d.amp_filter[m];if(v==K.SHORT_TYPE){for(var _=-12/4;_<0;_++){var x=Z[K.SHORT_TYPE][_+3];i[t+_*3+9]=o[9+_][O[m]]*x-o[8-_][O[m]],i[t+_*3+18]=o[14-_][O[m]]*x+o[15+_][O[m]],i[t+_*3+10]=o[15+_][O[m]]*x-o[14-_][O[m]],i[t+_*3+19]=L[2-_][O[m]]*x+L[3+_][O[m]],i[t+_*3+11]=L[3+_][O[m]]*x-L[2-_][O[m]],i[t+_*3+20]=L[8-_][O[m]]*x+L[9+_][O[m]]}q(i,t)}else{for(var y=n0(18),_=-36/4;_<0;_++){var r,l;r=Z[v][_+27]*L[_+9][O[m]]+Z[v][_+36]*L[8-_][O[m]],l=Z[v][_+9]*o[_+9][O[m]]-Z[v][_+18]*o[8-_][O[m]],y[_+9]=r-l*T[3+_+9],y[_+18]=r*T[3+_+9]+l}G(i,t,y)}}if(v!=K.SHORT_TYPE&&m!=0)for(var _=7;_>=0;--_){var I,N;I=i[t+_]*M[20+_]+i[t+-1-_]*J[28+_],N=i[t+_]*J[28+_]-i[t+-1-_]*M[20+_],i[t+-1-_]=I,i[t+_]=N}}}if(c=e,h=286,d.mode_gr==1)for(var t0=0;t0<18;t0++)F.arraycopy(d.sb_sample[A][1][t0],0,d.sb_sample[A][0][t0],0,32)}}}return aa=z,aa}var ra,ya;function n2(){if(ya)return ra;ya=1;var E=j0(),F=C0,$=F.System;F.VbrMode,F.Float,F.ShortBlock,F.Util,F.Arrays,F.new_array_n,F.new_byte,F.new_double;var P=F.new_float,n0=F.new_float_n;F.new_int,F.new_int_n,F.assert;function K(){this.l=P(E.SBMAX_l),this.s=n0([E.SBMAX_s,3]);var z=this;this.assign=function(D){$.arraycopy(D.l,0,z.l,0,E.SBMAX_l);for(var Z=0;Z<E.SBMAX_s;Z++)for(var T=0;T<3;T++)z.s[Z][T]=D.s[Z][T]}}return ra=K,ra}var ta,Ia;function M2(){if(Ia)return ta;Ia=1;var E=n2();function F(){this.thm=new E,this.en=new E}return ta=F,ta}var na,La;function j0(){if(La)return na;La=1;var E=C0,F=E.System,$=E.VbrMode;E.Float,E.ShortBlock,E.Util,E.Arrays;var P=E.new_array_n;E.new_byte,E.new_double;var n0=E.new_float,K=E.new_float_n,z=E.new_int;E.new_int_n;var D=E.assert;Z.ENCDELAY=576,Z.POSTDELAY=1152,Z.MDCTDELAY=48,Z.FFTOFFSET=224+Z.MDCTDELAY,Z.DECDELAY=528,Z.SBLIMIT=32,Z.CBANDS=64,Z.SBPSY_l=21,Z.SBPSY_s=12,Z.SBMAX_l=22,Z.SBMAX_s=13,Z.PSFB21=6,Z.PSFB12=6,Z.BLKSIZE=1024,Z.HBLKSIZE=Z.BLKSIZE/2+1,Z.BLKSIZE_s=256,Z.HBLKSIZE_s=Z.BLKSIZE_s/2+1,Z.NORM_TYPE=0,Z.START_TYPE=1,Z.SHORT_TYPE=2,Z.STOP_TYPE=3,Z.MPG_MD_LR_LR=0,Z.MPG_MD_LR_I=1,Z.MPG_MD_MS_LR=2,Z.MPG_MD_MS_I=3,Z.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function Z(){var T=A2(),V=M2(),M=Z.FFTOFFSET,J=Z.MPG_MD_MS_LR,O=null;this.psy=null;var Y=null,q=null,G=null;this.setModules=function(h,A,f,m){O=h,this.psy=A,Y=A,q=m,G=f};var d=new T;function n(h){var A,f;if(h.ATH.useAdjust==0){h.ATH.adjust=1;return}if(f=h.loudness_sq[0][0],A=h.loudness_sq[1][0],h.channels_out==2?(f+=h.loudness_sq[0][1],A+=h.loudness_sq[1][1]):(f+=f,A+=A),h.mode_gr==2&&(f=Math.max(f,A)),f*=.5,f*=h.ATH.aaSensitivityP,f>.03125)h.ATH.adjust>=1?h.ATH.adjust=1:h.ATH.adjust<h.ATH.adjustLimit&&(h.ATH.adjust=h.ATH.adjustLimit),h.ATH.adjustLimit=1;else{var m=31.98*f+625e-6;h.ATH.adjust>=m?(h.ATH.adjust*=m*.075+.925,h.ATH.adjust<m&&(h.ATH.adjust=m)):h.ATH.adjustLimit>=m?h.ATH.adjust=m:h.ATH.adjust<h.ATH.adjustLimit&&(h.ATH.adjust=h.ATH.adjustLimit),h.ATH.adjustLimit=m}}function e(h){var A,f;for(D(0<=h.bitrate_index&&h.bitrate_index<16),D(0<=h.mode_ext&&h.mode_ext<4),h.bitrate_stereoMode_Hist[h.bitrate_index][4]++,h.bitrate_stereoMode_Hist[15][4]++,h.channels_out==2&&(h.bitrate_stereoMode_Hist[h.bitrate_index][h.mode_ext]++,h.bitrate_stereoMode_Hist[15][h.mode_ext]++),A=0;A<h.mode_gr;++A)for(f=0;f<h.channels_out;++f){var m=h.l3_side.tt[A][f].block_type|0;h.l3_side.tt[A][f].mixed_block_flag!=0&&(m=4),h.bitrate_blockType_Hist[h.bitrate_index][m]++,h.bitrate_blockType_Hist[h.bitrate_index][5]++,h.bitrate_blockType_Hist[15][m]++,h.bitrate_blockType_Hist[15][5]++}}function c(h,A){var f=h.internal_flags,m,u;if(f.lame_encode_frame_init==0){var i,t,a=n0(2014),s=n0(2014);for(f.lame_encode_frame_init=1,i=0,t=0;i<286+576*(1+f.mode_gr);++i)i<576*f.mode_gr?(a[i]=0,f.channels_out==2&&(s[i]=0)):(a[i]=A[0][t],f.channels_out==2&&(s[i]=A[1][t]),++t);for(u=0;u<f.mode_gr;u++)for(m=0;m<f.channels_out;m++)f.l3_side.tt[u][m].block_type=Z.SHORT_TYPE;d.mdct_sub48(f,a,s),D(576>=Z.FFTOFFSET),D(f.mf_size>=Z.BLKSIZE+h.framesize-Z.FFTOFFSET),D(f.mf_size>=512+h.framesize-32)}}this.lame_encode_mp3_frame=function(h,A,f,m,u,i){var t,a=P([2,2]);a[0][0]=new V,a[0][1]=new V,a[1][0]=new V,a[1][1]=new V;var s=P([2,2]);s[0][0]=new V,s[0][1]=new V,s[1][0]=new V,s[1][1]=new V;var _,v=[null,null],o=h.internal_flags,L=K([2,4]),x=[.5,.5],y=[[0,0],[0,0]],r=[[0,0],[0,0]],l,I,N;if(v[0]=A,v[1]=f,o.lame_encode_frame_init==0&&c(h,v),o.padding=0,(o.slot_lag-=o.frac_SpF)<0&&(o.slot_lag+=h.out_samplerate,o.padding=1),o.psymodel!=0){var t0,l0=[null,null],i0=0,_0=z(2);for(N=0;N<o.mode_gr;N++){for(I=0;I<o.channels_out;I++)l0[I]=v[I],i0=576+N*576-Z.FFTOFFSET;if(h.VBR==$.vbr_mtrh||h.VBR==$.vbr_mt?t0=Y.L3psycho_anal_vbr(h,l0,i0,N,a,s,y[N],r[N],L[N],_0):t0=Y.L3psycho_anal_ns(h,l0,i0,N,a,s,y[N],r[N],L[N],_0),t0!=0)return-4;for(h.mode==MPEGMode.JOINT_STEREO&&(x[N]=L[N][2]+L[N][3],x[N]>0&&(x[N]=L[N][3]/x[N])),I=0;I<o.channels_out;I++){var S0=o.l3_side.tt[N][I];S0.block_type=_0[I],S0.mixed_block_flag=0}}}else for(N=0;N<o.mode_gr;N++)for(I=0;I<o.channels_out;I++)o.l3_side.tt[N][I].block_type=Z.NORM_TYPE,o.l3_side.tt[N][I].mixed_block_flag=0,r[N][I]=y[N][I]=700;if(n(o),d.mdct_sub48(o,v[0],v[1]),o.mode_ext=Z.MPG_MD_LR_LR,h.force_ms)o.mode_ext=Z.MPG_MD_MS_LR;else if(h.mode==MPEGMode.JOINT_STEREO){var h0=0,s0=0;for(N=0;N<o.mode_gr;N++)for(I=0;I<o.channels_out;I++)h0+=r[N][I],s0+=y[N][I];if(h0<=1*s0){var B0=o.l3_side.tt[0],F0=o.l3_side.tt[o.mode_gr-1];B0[0].block_type==B0[1].block_type&&F0[0].block_type==F0[1].block_type&&(o.mode_ext=Z.MPG_MD_MS_LR)}}if(o.mode_ext==J?(_=s,l=r):(_=a,l=y),h.analysis&&o.pinfo!=null)for(N=0;N<o.mode_gr;N++)for(I=0;I<o.channels_out;I++)o.pinfo.ms_ratio[N]=o.ms_ratio[N],o.pinfo.ms_ener_ratio[N]=x[N],o.pinfo.blocktype[N][I]=o.l3_side.tt[N][I].block_type,o.pinfo.pe[N][I]=l[N][I],F.arraycopy(o.l3_side.tt[N][I].xr,0,o.pinfo.xr[N][I],0,576),o.mode_ext==J&&(o.pinfo.ers[N][I]=o.pinfo.ers[N][I+2],F.arraycopy(o.pinfo.energy[N][I+2],0,o.pinfo.energy[N][I],0,o.pinfo.energy[N][I].length));if(h.VBR==$.vbr_off||h.VBR==$.vbr_abr){var A0,w0;for(A0=0;A0<18;A0++)o.nsPsy.pefirbuf[A0]=o.nsPsy.pefirbuf[A0+1];for(w0=0,N=0;N<o.mode_gr;N++)for(I=0;I<o.channels_out;I++)w0+=l[N][I];for(o.nsPsy.pefirbuf[18]=w0,w0=o.nsPsy.pefirbuf[9],A0=0;A0<9;A0++)w0+=(o.nsPsy.pefirbuf[A0]+o.nsPsy.pefirbuf[18-A0])*Z.fircoef[A0];for(w0=670*5*o.mode_gr*o.channels_out/w0,N=0;N<o.mode_gr;N++)for(I=0;I<o.channels_out;I++)l[N][I]*=w0}if(o.iteration_loop.iteration_loop(h,l,x,_),O.format_bitstream(h),t=O.copy_buffer(o,m,u,i,1),h.bWriteVbrTag&&q.addVbrFrame(h),h.analysis&&o.pinfo!=null){for(I=0;I<o.channels_out;I++){var T0;for(T0=0;T0<M;T0++)o.pinfo.pcmdata[I][T0]=o.pinfo.pcmdata[I][T0+h.framesize];for(T0=M;T0<1600;T0++)o.pinfo.pcmdata[I][T0]=v[I][T0-M]}G.set_frame_pinfo(h,_)}return e(o),t}}return na=Z,na}var _1=C0;_1.System;_1.VbrMode;_1.Float;_1.ShortBlock;var Na=_1.Util;_1.Arrays;_1.new_array_n;_1.new_byte;_1.new_double;var Va=_1.new_float;_1.new_float_n;_1.new_int;_1.new_int_n;_1.assert;var D0=j0();function R2(){var E=Va(D0.BLKSIZE),F=Va(D0.BLKSIZE_s/2),$=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function P(K,z,D){var Z=0,T,V,M;D<<=1;var J=z+D;T=4;do{var O,Y,q,G,d,n,e;e=T>>1,G=T,d=T<<1,n=d+G,T=d<<1,V=z,M=V+e;do{var c,h,A,f;h=K[V+0]-K[V+G],c=K[V+0]+K[V+G],f=K[V+d]-K[V+n],A=K[V+d]+K[V+n],K[V+d]=c-A,K[V+0]=c+A,K[V+n]=h-f,K[V+G]=h+f,h=K[M+0]-K[M+G],c=K[M+0]+K[M+G],f=Na.SQRT2*K[M+n],A=Na.SQRT2*K[M+d],K[M+d]=c-A,K[M+0]=c+A,K[M+n]=h-f,K[M+G]=h+f,M+=T,V+=T}while(V<J);for(Y=$[Z+0],O=$[Z+1],q=1;q<e;q++){var m,u;m=1-2*O*O,u=2*O*Y,V=z+q,M=z+G-q;do{var i,t,a,c,h,s,A,_,f,v;t=u*K[V+G]-m*K[M+G],i=m*K[V+G]+u*K[M+G],h=K[V+0]-i,c=K[V+0]+i,s=K[M+0]-t,a=K[M+0]+t,t=u*K[V+n]-m*K[M+n],i=m*K[V+n]+u*K[M+n],f=K[V+d]-i,A=K[V+d]+i,v=K[M+d]-t,_=K[M+d]+t,t=O*A-Y*v,i=Y*A+O*v,K[V+d]=c-i,K[V+0]=c+i,K[M+n]=s-t,K[M+G]=s+t,t=Y*_-O*f,i=O*_+Y*f,K[M+d]=a-i,K[M+0]=a+i,K[V+n]=h-t,K[V+G]=h+t,M+=T,V+=T}while(V<J);m=Y,Y=m*$[Z+0]-O*$[Z+1],O=m*$[Z+1]+O*$[Z+0]}Z+=2}while(T<D)}var n0=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(K,z,D,Z,T){for(var V=0;V<3;V++){var M=D0.BLKSIZE_s/2,J=65535&576/3*(V+1),O=D0.BLKSIZE_s/8-1;do{var Y,q,G,d,n,e=n0[O<<2]&255;Y=F[e]*Z[D][T+e+J],n=F[127-e]*Z[D][T+e+J+128],q=Y-n,Y=Y+n,G=F[e+64]*Z[D][T+e+J+64],n=F[63-e]*Z[D][T+e+J+192],d=G-n,G=G+n,M-=4,z[V][M+0]=Y+G,z[V][M+2]=Y-G,z[V][M+1]=q+d,z[V][M+3]=q-d,Y=F[e+1]*Z[D][T+e+J+1],n=F[126-e]*Z[D][T+e+J+129],q=Y-n,Y=Y+n,G=F[e+65]*Z[D][T+e+J+65],n=F[62-e]*Z[D][T+e+J+193],d=G-n,G=G+n,z[V][M+D0.BLKSIZE_s/2+0]=Y+G,z[V][M+D0.BLKSIZE_s/2+2]=Y-G,z[V][M+D0.BLKSIZE_s/2+1]=q+d,z[V][M+D0.BLKSIZE_s/2+3]=q-d}while(--O>=0);P(z[V],M,D0.BLKSIZE_s/2)}},this.fft_long=function(K,z,D,Z,T){var V=D0.BLKSIZE/8-1,M=D0.BLKSIZE/2;do{var J,O,Y,q,G,d=n0[V]&255;J=E[d]*Z[D][T+d],G=E[d+512]*Z[D][T+d+512],O=J-G,J=J+G,Y=E[d+256]*Z[D][T+d+256],G=E[d+768]*Z[D][T+d+768],q=Y-G,Y=Y+G,M-=4,z[M+0]=J+Y,z[M+2]=J-Y,z[M+1]=O+q,z[M+3]=O-q,J=E[d+1]*Z[D][T+d+1],G=E[d+513]*Z[D][T+d+513],O=J-G,J=J+G,Y=E[d+257]*Z[D][T+d+257],G=E[d+769]*Z[D][T+d+769],q=Y-G,Y=Y+G,z[M+D0.BLKSIZE/2+0]=J+Y,z[M+D0.BLKSIZE/2+2]=J-Y,z[M+D0.BLKSIZE/2+1]=O+q,z[M+D0.BLKSIZE/2+3]=O-q}while(--V>=0);P(z,M,D0.BLKSIZE/2)},this.init_fft=function(K){for(var z=0;z<D0.BLKSIZE;z++)E[z]=.42-.5*Math.cos(2*Math.PI*(z+.5)/D0.BLKSIZE)+.08*Math.cos(4*Math.PI*(z+.5)/D0.BLKSIZE);for(var z=0;z<D0.BLKSIZE_s/2;z++)F[z]=.5*(1-Math.cos(2*Math.PI*(z+.5)/D0.BLKSIZE_s))}}var x2=R2,i1=C0;i1.System;var Se=i1.VbrMode,pa=i1.Float,Ae=i1.ShortBlock,t1=i1.Util,E2=i1.Arrays;i1.new_array_n;i1.new_byte;i1.new_double;var P0=i1.new_float,p1=i1.new_float_n,ne=i1.new_int;i1.new_int_n;var u0=i1.assert,B2=x2,Q=j0();function T2(){var E=new B2,F=2.302585092994046,$=2,P=16,n0=2,K=16,z=.34,D=1/(14752*14752)/(Q.BLKSIZE/2),Z=.01,T=.8,V=.6,M=.3,J=3.5,O=21,Y=.2302585093;function q(b){return b}function G(b,S){for(var B=0,w=0;w<Q.BLKSIZE/2;++w)B+=b[w]*S.ATH.eql_w[w];return B*=D,B}function d(b,S,B,w,C,R,H,k,p,W,X){var j=b.internal_flags;if(p<2)E.fft_long(j,w[C],p,W,X),E.fft_short(j,R[H],p,W,X);else if(p==2){for(var o0=Q.BLKSIZE-1;o0>=0;--o0){var c0=w[C+0][o0],e0=w[C+1][o0];w[C+0][o0]=(c0+e0)*t1.SQRT2*.5,w[C+1][o0]=(c0-e0)*t1.SQRT2*.5}for(var b0=2;b0>=0;--b0)for(var o0=Q.BLKSIZE_s-1;o0>=0;--o0){var c0=R[H+0][b0][o0],e0=R[H+1][b0][o0];R[H+0][b0][o0]=(c0+e0)*t1.SQRT2*.5,R[H+1][b0][o0]=(c0-e0)*t1.SQRT2*.5}}S[0]=w[C+0][0],S[0]*=S[0];for(var o0=Q.BLKSIZE/2-1;o0>=0;--o0){var U=w[C+0][Q.BLKSIZE/2-o0],f0=w[C+0][Q.BLKSIZE/2+o0];S[Q.BLKSIZE/2-o0]=(U*U+f0*f0)*.5}for(var b0=2;b0>=0;--b0){B[b0][0]=R[H+0][b0][0],B[b0][0]*=B[b0][0];for(var o0=Q.BLKSIZE_s/2-1;o0>=0;--o0){var U=R[H+0][b0][Q.BLKSIZE_s/2-o0],f0=R[H+0][b0][Q.BLKSIZE_s/2+o0];B[b0][Q.BLKSIZE_s/2-o0]=(U*U+f0*f0)*.5}}{for(var x0=0,o0=11;o0<Q.HBLKSIZE;o0++)x0+=S[o0];j.tot_ener[p]=x0}if(b.analysis){for(var o0=0;o0<Q.HBLKSIZE;o0++)j.pinfo.energy[k][p][o0]=j.pinfo.energy_save[p][o0],j.pinfo.energy_save[p][o0]=S[o0];j.pinfo.pe[k][p]=j.pe[p]}b.athaa_loudapprox==2&&p<2&&(j.loudness_sq[k][p]=j.loudness_sq_save[p],j.loudness_sq_save[p]=G(S,j))}var n=8,e=23,c=15,h,A,f,m=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function u(){h=Math.pow(10,(n+1)/16),A=Math.pow(10,(e+1)/16),f=Math.pow(10,c/10)}var i=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],t=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],a=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function s(b,S,B,w,C,R){var H;if(S>b)if(S<b*A)H=S/b;else return b+S;else{if(b>=S*A)return b+S;H=b/S}if(u0(b>=0),u0(S>=0),b+=S,w+3<=6){if(H>=h)return b;var k=0|t1.FAST_LOG10_X(H,16);return b*t[k]}var k=0|t1.FAST_LOG10_X(H,16);if(S=C.ATH.cb_l[B]*C.ATH.adjust,u0(S>=0),b<f*S){if(b>S){var p,W;return p=1,k<=13&&(p=a[k]),W=t1.FAST_LOG10_X(b/S,10/15),b*((i[k]-p)*W+p)}return k>13?b:b*a[k]}return b*i[k]}var _=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function v(b,S,B){var w;if(b<0&&(b=0),S<0&&(S=0),b<=0)return S;if(S<=0)return b;if(S>b?w=S/b:w=b/S,-2<=B&&B<=2){if(w>=h)return b+S;var C=0|t1.FAST_LOG10_X(w,16);return(b+S)*_[C]}return w<A?b+S:(b<S&&(b=S),b)}function o(b,S){var B=b.internal_flags;if(B.channels_out>1){for(var w=0;w<Q.SBMAX_l;w++){var C=B.thm[0].l[w],R=B.thm[1].l[w];B.thm[0].l[w]+=R*S,B.thm[1].l[w]+=C*S}for(var w=0;w<Q.SBMAX_s;w++)for(var H=0;H<3;H++){var C=B.thm[0].s[w][H],R=B.thm[1].s[w][H];B.thm[0].s[w][H]+=R*S,B.thm[1].s[w][H]+=C*S}}}function L(b){for(var S=0;S<Q.SBMAX_l;S++)if(!(b.thm[0].l[S]>1.58*b.thm[1].l[S]||b.thm[1].l[S]>1.58*b.thm[0].l[S])){var B=b.mld_l[S]*b.en[3].l[S],w=Math.max(b.thm[2].l[S],Math.min(b.thm[3].l[S],B));B=b.mld_l[S]*b.en[2].l[S];var C=Math.max(b.thm[3].l[S],Math.min(b.thm[2].l[S],B));b.thm[2].l[S]=w,b.thm[3].l[S]=C}for(var S=0;S<Q.SBMAX_s;S++)for(var R=0;R<3;R++)if(!(b.thm[0].s[S][R]>1.58*b.thm[1].s[S][R]||b.thm[1].s[S][R]>1.58*b.thm[0].s[S][R])){var B=b.mld_s[S]*b.en[3].s[S][R],w=Math.max(b.thm[2].s[S][R],Math.min(b.thm[3].s[S][R],B));B=b.mld_s[S]*b.en[2].s[S][R];var C=Math.max(b.thm[3].s[S][R],Math.min(b.thm[2].s[S][R],B));b.thm[2].s[S][R]=w,b.thm[3].s[S][R]=C}}function x(b,S,B){var w=S,C=Math.pow(10,B);S*=2,w*=2;for(var R=0;R<Q.SBMAX_l;R++){var H,k,p,W;if(W=b.ATH.cb_l[b.bm_l[R]]*C,H=Math.min(Math.max(b.thm[0].l[R],W),Math.max(b.thm[1].l[R],W)),k=Math.max(b.thm[2].l[R],W),p=Math.max(b.thm[3].l[R],W),H*S<k+p){var X=H*w/(k+p);k*=X,p*=X,u0(k+p>0)}b.thm[2].l[R]=Math.min(k,b.thm[2].l[R]),b.thm[3].l[R]=Math.min(p,b.thm[3].l[R])}C*=Q.BLKSIZE_s/Q.BLKSIZE;for(var R=0;R<Q.SBMAX_s;R++)for(var j=0;j<3;j++){var H,k,p,W;if(W=b.ATH.cb_s[b.bm_s[R]]*C,H=Math.min(Math.max(b.thm[0].s[R][j],W),Math.max(b.thm[1].s[R][j],W)),k=Math.max(b.thm[2].s[R][j],W),p=Math.max(b.thm[3].s[R][j],W),H*S<k+p){var X=H*S/(k+p);k*=X,p*=X,u0(k+p>0)}b.thm[2].s[R][j]=Math.min(b.thm[2].s[R][j],k),b.thm[3].s[R][j]=Math.min(b.thm[3].s[R][j],p)}}function y(b,S,B,w,C){var R,H,k=0,p=0;for(R=H=0;R<Q.SBMAX_s;++H,++R){for(var W=b.bo_s[R],X=b.npart_s,j=W<X?W:X;H<j;)u0(S[H]>=0),u0(B[H]>=0),k+=S[H],p+=B[H],H++;if(b.en[w].s[R][C]=k,b.thm[w].s[R][C]=p,H>=X){++R;break}u0(S[H]>=0),u0(B[H]>=0);{var o0=b.PSY.bo_s_weight[R],c0=1-o0;k=o0*S[H],p=o0*B[H],b.en[w].s[R][C]+=k,b.thm[w].s[R][C]+=p,k=c0*S[H],p=c0*B[H]}}for(;R<Q.SBMAX_s;++R)b.en[w].s[R][C]=0,b.thm[w].s[R][C]=0}function r(b,S,B,w){var C,R,H=0,k=0;for(C=R=0;C<Q.SBMAX_l;++R,++C){for(var p=b.bo_l[C],W=b.npart_l,X=p<W?p:W;R<X;)u0(S[R]>=0),u0(B[R]>=0),H+=S[R],k+=B[R],R++;if(b.en[w].l[C]=H,b.thm[w].l[C]=k,R>=W){++C;break}u0(S[R]>=0),u0(B[R]>=0);{var j=b.PSY.bo_l_weight[C],o0=1-j;H=j*S[R],k=j*B[R],b.en[w].l[C]+=H,b.thm[w].l[C]+=k,H=o0*S[R],k=o0*B[R]}}for(;C<Q.SBMAX_l;++C)b.en[w].l[C]=0,b.thm[w].l[C]=0}function l(b,S,B,w,C,R){var H=b.internal_flags,k,p;for(p=k=0;p<H.npart_s;++p){for(var W=0,X=H.numlines_s[p],j=0;j<X;++j,++k){var o0=S[R][k];W+=o0}B[p]=W}for(u0(p==H.npart_s),u0(k==129),k=p=0;p<H.npart_s;p++){var c0=H.s3ind_s[p][0],e0=H.s3_ss[k++]*B[c0];for(++c0;c0<=H.s3ind_s[p][1];)e0+=H.s3_ss[k]*B[c0],++k,++c0;{var b0=n0*H.nb_s1[C][p];w[p]=Math.min(e0,b0)}if(H.blocktype_old[C&1]==Q.SHORT_TYPE){var b0=K*H.nb_s2[C][p],U=w[p];w[p]=Math.min(b0,U)}H.nb_s2[C][p]=H.nb_s1[C][p],H.nb_s1[C][p]=e0,u0(w[p]>=0)}for(;p<=Q.CBANDS;++p)B[p]=0,w[p]=0}function I(b,S,B,w){var C=b.internal_flags;b.short_blocks==Ae.short_block_coupled&&!(S[0]!=0&&S[1]!=0)&&(S[0]=S[1]=0);for(var R=0;R<C.channels_out;R++)w[R]=Q.NORM_TYPE,b.short_blocks==Ae.short_block_dispensed&&(S[R]=1),b.short_blocks==Ae.short_block_forced&&(S[R]=0),S[R]!=0?(u0(C.blocktype_old[R]!=Q.START_TYPE),C.blocktype_old[R]==Q.SHORT_TYPE&&(w[R]=Q.STOP_TYPE)):(w[R]=Q.SHORT_TYPE,C.blocktype_old[R]==Q.NORM_TYPE&&(C.blocktype_old[R]=Q.START_TYPE),C.blocktype_old[R]==Q.STOP_TYPE&&(C.blocktype_old[R]=Q.SHORT_TYPE)),B[R]=C.blocktype_old[R],C.blocktype_old[R]=w[R]}function N(b,S,B){return B>=1?b:B<=0?S:S>0?Math.pow(b/S,B)*S:0}var t0=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function l0(b,S){for(var B=309.07,w=0;w<Q.SBMAX_s-1;w++)for(var C=0;C<3;C++){var R=b.thm.s[w][C];if(u0(w<t0.length),R>0){var H=R*S,k=b.en.s[w][C];k>H&&(k>H*1e10?B+=t0[w]*(10*F):(u0(H>0),B+=t0[w]*t1.FAST_LOG10(k/H)))}}return B}var i0=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function _0(b,S){for(var B=281.0575,w=0;w<Q.SBMAX_l-1;w++){var C=b.thm.l[w];if(u0(w<i0.length),C>0){var R=C*S,H=b.en.l[w];H>R&&(H>R*1e10?B+=i0[w]*(10*F):(u0(R>0),B+=i0[w]*t1.FAST_LOG10(H/R)))}}return B}function S0(b,S,B,w,C){var R,H;for(R=H=0;R<b.npart_l;++R){var k=0,p=0,W;for(W=0;W<b.numlines_l[R];++W,++H){var X=S[H];u0(X>=0),k+=X,p<X&&(p=X)}B[R]=k,w[R]=p,C[R]=k*b.rnumlines_l[R],u0(b.rnumlines_l[R]>=0),u0(k>=0),u0(B[R]>=0),u0(w[R]>=0),u0(C[R]>=0)}}function h0(b,S,B,w){var C=m.length-1,R=0,H=B[R]+B[R+1];if(u0(H>=0),H>0){var k=S[R];k<S[R+1]&&(k=S[R+1]),u0(b.numlines_l[R]+b.numlines_l[R+1]-1>0),H=20*(k*2-H)/(H*(b.numlines_l[R]+b.numlines_l[R+1]-1));var p=0|H;p>C&&(p=C),w[R]=p}else w[R]=0;for(R=1;R<b.npart_l-1;R++)if(H=B[R-1]+B[R]+B[R+1],u0(H>=0),H>0){var k=S[R-1];k<S[R]&&(k=S[R]),k<S[R+1]&&(k=S[R+1]),u0(b.numlines_l[R-1]+b.numlines_l[R]+b.numlines_l[R+1]-1>0),H=20*(k*3-H)/(H*(b.numlines_l[R-1]+b.numlines_l[R]+b.numlines_l[R+1]-1));var p=0|H;p>C&&(p=C),w[R]=p}else w[R]=0;if(u0(R>0),u0(R==b.npart_l-1),H=B[R-1]+B[R],u0(H>=0),H>0){var k=S[R-1];k<S[R]&&(k=S[R]),u0(b.numlines_l[R-1]+b.numlines_l[R]-1>0),H=20*(k*2-H)/(H*(b.numlines_l[R-1]+b.numlines_l[R]-1));var p=0|H;p>C&&(p=C),w[R]=p}else w[R]=0;u0(R==b.npart_l-1)}var s0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(b,S,B,w,C,R,H,k,p,W){var X=b.internal_flags,j=p1([2,Q.BLKSIZE]),o0=p1([2,3,Q.BLKSIZE_s]),c0=P0(Q.CBANDS+1),e0=P0(Q.CBANDS+1),b0=P0(Q.CBANDS+2),U=ne(2),f0=ne(2),x0,a0,m0,g,d0,N0,v0,M0,E0=p1([2,576]),H0,w1=ne(Q.CBANDS+2),q0=ne(Q.CBANDS+2);for(E2.fill(q0,0),x0=X.channels_out,b.mode==MPEGMode.JOINT_STEREO&&(x0=4),b.VBR==Se.vbr_off?H0=X.ResvMax==0?0:X.ResvSize/X.ResvMax*.5:b.VBR==Se.vbr_rh||b.VBR==Se.vbr_mtrh||b.VBR==Se.vbr_mt?H0=.6:H0=1,a0=0;a0<X.channels_out;a0++){var V0=S[a0],a1=B+576-350-O+192;for(u0(s0.length==(O-1)/2),g=0;g<576;g++){var y1,I1;for(y1=V0[a1+g+10],I1=0,d0=0;d0<(O-1)/2-1;d0+=2)y1+=s0[d0]*(V0[a1+g+d0]+V0[a1+g+O-d0]),I1+=s0[d0+1]*(V0[a1+g+d0+1]+V0[a1+g+O-d0-1]);E0[a0][g]=y1+I1}C[w][a0].en.assign(X.en[a0]),C[w][a0].thm.assign(X.thm[a0]),x0>2&&(R[w][a0].en.assign(X.en[a0+2]),R[w][a0].thm.assign(X.thm[a0+2]))}for(a0=0;a0<x0;a0++){var k1,X1,W0=P0(12),D1=[0,0,0,0],de=P0(12),Ke=1,Ma,Ra=P0(Q.CBANDS),xa=P0(Q.CBANDS),O0=[0,0,0,0],Ea=P0(Q.HBLKSIZE),Ba=p1([3,Q.HBLKSIZE_s]);for(u0(X.npart_s<=Q.CBANDS),u0(X.npart_l<=Q.CBANDS),g=0;g<3;g++)W0[g]=X.nsPsy.last_en_subshort[a0][g+6],u0(X.nsPsy.last_en_subshort[a0][g+4]>0),de[g]=W0[g]/X.nsPsy.last_en_subshort[a0][g+4],D1[0]+=W0[g];if(a0==2)for(g=0;g<576;g++){var Qe,We;Qe=E0[0][g],We=E0[1][g],E0[0][g]=Qe+We,E0[1][g]=Qe-We}{var Ta=E0[a0&1],xe=0;for(g=0;g<9;g++){for(var f2=xe+64,K0=1;xe<f2;xe++)K0<Math.abs(Ta[xe])&&(K0=Math.abs(Ta[xe]));X.nsPsy.last_en_subshort[a0][g]=W0[g+3]=K0,D1[1+g/3]+=K0,K0>W0[g+3-2]?(u0(W0[g+3-2]>0),K0=K0/W0[g+3-2]):W0[g+3-2]>K0*10?(u0(K0>0),K0=W0[g+3-2]/(K0*10)):K0=0,de[g+3]=K0}}if(b.analysis){var je=de[0];for(g=1;g<12;g++)je<de[g]&&(je=de[g]);X.pinfo.ers[w][a0]=X.pinfo.ers_save[a0],X.pinfo.ers_save[a0]=je}for(Ma=a0==3?X.nsPsy.attackthre_s:X.nsPsy.attackthre,g=0;g<12;g++)O0[g/3]==0&&de[g]>Ma&&(O0[g/3]=g%3+1);for(g=1;g<4;g++){var ze;D1[g-1]>D1[g]?(u0(D1[g]>0),ze=D1[g-1]/D1[g]):(u0(D1[g-1]>0),ze=D1[g]/D1[g-1]),ze<1.7&&(O0[g]=0,g==1&&(O0[0]=0))}for(O0[0]!=0&&X.nsPsy.lastAttacks[a0]!=0&&(O0[0]=0),(X.nsPsy.lastAttacks[a0]==3||O0[0]+O0[1]+O0[2]+O0[3]!=0)&&(Ke=0,O0[1]!=0&&O0[0]!=0&&(O0[1]=0),O0[2]!=0&&O0[1]!=0&&(O0[2]=0),O0[3]!=0&&O0[2]!=0&&(O0[3]=0)),a0<2?f0[a0]=Ke:Ke==0&&(f0[0]=f0[1]=0),p[a0]=X.tot_ener[a0],X1=o0,k1=j,d(b,Ea,Ba,k1,a0&1,X1,a0&1,w,a0,S,B),S0(X,Ea,c0,Ra,xa),h0(X,Ra,xa,w1),M0=0;M0<3;M0++){var Je,r1;for(l(b,Ba,e0,b0,a0,M0),y(X,e0,b0,a0,M0),v0=0;v0<Q.SBMAX_s;v0++){if(r1=X.thm[a0].s[v0][M0],r1*=T,O0[M0]>=2||O0[M0+1]==1){var Ee=M0!=0?M0-1:2,K0=N(X.thm[a0].s[v0][Ee],r1,V*H0);r1=Math.min(r1,K0)}if(O0[M0]==1){var Ee=M0!=0?M0-1:2,K0=N(X.thm[a0].s[v0][Ee],r1,M*H0);r1=Math.min(r1,K0)}else if(M0!=0&&O0[M0-1]==3||M0==0&&X.nsPsy.lastAttacks[a0]==3){var Ee=M0!=2?M0+1:0,K0=N(X.thm[a0].s[v0][Ee],r1,M*H0);r1=Math.min(r1,K0)}Je=W0[M0*3+3]+W0[M0*3+4]+W0[M0*3+5],W0[M0*3+5]*6<Je&&(r1*=.5,W0[M0*3+4]*6<Je&&(r1*=.5)),X.thm[a0].s[v0][M0]=r1}}for(X.nsPsy.lastAttacks[a0]=O0[2],N0=0,m0=0;m0<X.npart_l;m0++){for(var re=X.s3ind[m0][0],ge=c0[re]*m[w1[re]],te=X.s3_ll[N0++]*ge;++re<=X.s3ind[m0][1];)ge=c0[re]*m[w1[re]],te=s(te,X.s3_ll[N0++]*ge,re,re-m0,X);te*=.158489319246111,X.blocktype_old[a0&1]==Q.SHORT_TYPE?b0[m0]=te:b0[m0]=N(Math.min(te,Math.min($*X.nb_1[a0][m0],P*X.nb_2[a0][m0])),te,H0),X.nb_2[a0][m0]=X.nb_1[a0][m0],X.nb_1[a0][m0]=te}for(;m0<=Q.CBANDS;++m0)c0[m0]=0,b0[m0]=0;r(X,c0,b0,a0)}if((b.mode==MPEGMode.STEREO||b.mode==MPEGMode.JOINT_STEREO)&&b.interChRatio>0&&o(b,b.interChRatio),b.mode==MPEGMode.JOINT_STEREO){var ea;L(X),ea=b.msfix,Math.abs(ea)>0&&x(X,ea,b.ATHlower*X.ATH.adjust)}for(I(b,f0,W,U),a0=0;a0<x0;a0++){var Be,Te=0,Ve,pe;a0>1?(Be=k,Te=-2,Ve=Q.NORM_TYPE,(W[0]==Q.SHORT_TYPE||W[1]==Q.SHORT_TYPE)&&(Ve=Q.SHORT_TYPE),pe=R[w][a0-2]):(Be=H,Te=0,Ve=W[a0],pe=C[w][a0]),Ve==Q.SHORT_TYPE?Be[Te+a0]=l0(pe,X.masking_lower):Be[Te+a0]=_0(pe,X.masking_lower),b.analysis&&(X.pinfo.pe[w][a0]=Be[Te+a0])}return 0};function B0(b,S,B,w,C,R,H,k){var p=b.internal_flags;if(w<2)E.fft_long(p,H[k],w,S,B);else if(w==2)for(var W=Q.BLKSIZE-1;W>=0;--W){var X=H[k+0][W],j=H[k+1][W];H[k+0][W]=(X+j)*t1.SQRT2*.5,H[k+1][W]=(X-j)*t1.SQRT2*.5}R[0]=H[k+0][0],R[0]*=R[0];for(var W=Q.BLKSIZE/2-1;W>=0;--W){var o0=H[k+0][Q.BLKSIZE/2-W],c0=H[k+0][Q.BLKSIZE/2+W];R[Q.BLKSIZE/2-W]=(o0*o0+c0*c0)*.5}{for(var e0=0,W=11;W<Q.HBLKSIZE;W++)e0+=R[W];p.tot_ener[w]=e0}if(b.analysis){for(var W=0;W<Q.HBLKSIZE;W++)p.pinfo.energy[C][w][W]=p.pinfo.energy_save[w][W],p.pinfo.energy_save[w][W]=R[W];p.pinfo.pe[C][w]=p.pe[w]}}function F0(b,S,B,w,C,R,H,k){var p=b.internal_flags;if(C==0&&w<2&&E.fft_short(p,H[k],w,S,B),w==2)for(var W=Q.BLKSIZE_s-1;W>=0;--W){var X=H[k+0][C][W],j=H[k+1][C][W];H[k+0][C][W]=(X+j)*t1.SQRT2*.5,H[k+1][C][W]=(X-j)*t1.SQRT2*.5}R[C][0]=H[k+0][C][0],R[C][0]*=R[C][0];for(var W=Q.BLKSIZE_s/2-1;W>=0;--W){var o0=H[k+0][C][Q.BLKSIZE_s/2-W],c0=H[k+0][C][Q.BLKSIZE_s/2+W];R[C][Q.BLKSIZE_s/2-W]=(o0*o0+c0*c0)*.5}}function A0(b,S,B,w){var C=b.internal_flags;b.athaa_loudapprox==2&&B<2&&(C.loudness_sq[S][B]=C.loudness_sq_save[B],C.loudness_sq_save[B]=G(w,C))}var w0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function T0(b,S,B,w,C,R,H,k,p,W){for(var X=p1([2,576]),j=b.internal_flags,o0=j.channels_out,c0=b.mode==MPEGMode.JOINT_STEREO?4:o0,e0=0;e0<o0;e0++){firbuf=S[e0];var b0=B+576-350-O+192;u0(w0.length==(O-1)/2);for(var U=0;U<576;U++){var f0,x0;f0=firbuf[b0+U+10],x0=0;for(var a0=0;a0<(O-1)/2-1;a0+=2)f0+=w0[a0]*(firbuf[b0+U+a0]+firbuf[b0+U+O-a0]),x0+=w0[a0+1]*(firbuf[b0+U+a0+1]+firbuf[b0+U+O-a0-1]);X[e0][U]=f0+x0}C[w][e0].en.assign(j.en[e0]),C[w][e0].thm.assign(j.thm[e0]),c0>2&&(R[w][e0].en.assign(j.en[e0+2]),R[w][e0].thm.assign(j.thm[e0+2]))}for(var e0=0;e0<c0;e0++){var m0=P0(12),g=P0(12),d0=[0,0,0,0],N0=X[e0&1],v0=0,M0=e0==3?j.nsPsy.attackthre_s:j.nsPsy.attackthre,E0=1;if(e0==2)for(var U=0,a0=576;a0>0;++U,--a0){var H0=X[0][U],w1=X[1][U];X[0][U]=H0+w1,X[1][U]=H0-w1}for(var U=0;U<3;U++)g[U]=j.nsPsy.last_en_subshort[e0][U+6],u0(j.nsPsy.last_en_subshort[e0][U+4]>0),m0[U]=g[U]/j.nsPsy.last_en_subshort[e0][U+4],d0[0]+=g[U];for(var U=0;U<9;U++){for(var q0=v0+64,V0=1;v0<q0;v0++)V0<Math.abs(N0[v0])&&(V0=Math.abs(N0[v0]));j.nsPsy.last_en_subshort[e0][U]=g[U+3]=V0,d0[1+U/3]+=V0,V0>g[U+3-2]?(u0(g[U+3-2]>0),V0=V0/g[U+3-2]):g[U+3-2]>V0*10?(u0(V0>0),V0=g[U+3-2]/(V0*10)):V0=0,m0[U+3]=V0}for(var U=0;U<3;++U){var a1=g[U*3+3]+g[U*3+4]+g[U*3+5],y1=1;g[U*3+5]*6<a1&&(y1*=.5,g[U*3+4]*6<a1&&(y1*=.5)),k[e0][U]=y1}if(b.analysis){for(var I1=m0[0],U=1;U<12;U++)I1<m0[U]&&(I1=m0[U]);j.pinfo.ers[w][e0]=j.pinfo.ers_save[e0],j.pinfo.ers_save[e0]=I1}for(var U=0;U<12;U++)p[e0][U/3]==0&&m0[U]>M0&&(p[e0][U/3]=U%3+1);for(var U=1;U<4;U++){var k1=d0[U-1],X1=d0[U],W0=Math.max(k1,X1);W0<4e4&&k1<1.7*X1&&X1<1.7*k1&&(U==1&&p[e0][0]<=p[e0][U]&&(p[e0][0]=0),p[e0][U]=0)}p[e0][0]<=j.nsPsy.lastAttacks[e0]&&(p[e0][0]=0),(j.nsPsy.lastAttacks[e0]==3||p[e0][0]+p[e0][1]+p[e0][2]+p[e0][3]!=0)&&(E0=0,p[e0][1]!=0&&p[e0][0]!=0&&(p[e0][1]=0),p[e0][2]!=0&&p[e0][1]!=0&&(p[e0][2]=0),p[e0][3]!=0&&p[e0][2]!=0&&(p[e0][3]=0)),e0<2?W[e0]=E0:E0==0&&(W[0]=W[1]=0),H[e0]=j.tot_ener[e0]}}function Y0(b,S,B){if(B==0)for(var w=0;w<b.npart_s;w++)b.nb_s2[S][w]=b.nb_s1[S][w],b.nb_s1[S][w]=0}function Z0(b,S){for(var B=0;B<b.npart_l;B++)b.nb_2[S][B]=b.nb_1[S][B],b.nb_1[S][B]=0}function q1(b,S,B,w){var C=m.length-1,R=0,H=B[R]+B[R+1];if(u0(H>=0),H>0){var k=S[R];k<S[R+1]&&(k=S[R+1]),u0(b.numlines_s[R]+b.numlines_s[R+1]-1>0),H=20*(k*2-H)/(H*(b.numlines_s[R]+b.numlines_s[R+1]-1));var p=0|H;p>C&&(p=C),w[R]=p}else w[R]=0;for(R=1;R<b.npart_s-1;R++)if(H=B[R-1]+B[R]+B[R+1],u0(R+1<b.npart_s),u0(H>=0),H>0){var k=S[R-1];k<S[R]&&(k=S[R]),k<S[R+1]&&(k=S[R+1]),u0(b.numlines_s[R-1]+b.numlines_s[R]+b.numlines_s[R+1]-1>0),H=20*(k*3-H)/(H*(b.numlines_s[R-1]+b.numlines_s[R]+b.numlines_s[R+1]-1));var p=0|H;p>C&&(p=C),w[R]=p}else w[R]=0;if(u0(R>0),u0(R==b.npart_s-1),H=B[R-1]+B[R],u0(H>=0),H>0){var k=S[R-1];k<S[R]&&(k=S[R]),u0(b.numlines_s[R-1]+b.numlines_s[R]-1>0),H=20*(k*2-H)/(H*(b.numlines_s[R-1]+b.numlines_s[R]-1));var p=0|H;p>C&&(p=C),w[R]=p}else w[R]=0;u0(R==b.npart_s-1)}function B1(b,S,B,w,C,R){var H=b.internal_flags,k=new float[Q.CBANDS],p=P0(Q.CBANDS),W,X,j,o0=new int[Q.CBANDS];for(j=X=0;j<H.npart_s;++j){var c0=0,e0=0,b0=H.numlines_s[j];for(W=0;W<b0;++W,++X){var U=S[R][X];c0+=U,e0<U&&(e0=U)}B[j]=c0,u0(c0>=0),k[j]=e0,u0(b0>0),p[j]=c0/b0,u0(p[j]>=0)}for(u0(j==H.npart_s),u0(X==129);j<Q.CBANDS;++j)k[j]=0,p[j]=0;for(q1(H,k,p,o0),X=j=0;j<H.npart_s;j++){var f0=H.s3ind_s[j][0],x0=H.s3ind_s[j][1],a0,m0,g,d0,N0;for(a0=o0[f0],m0=1,d0=H.s3_ss[X]*B[f0]*m[o0[f0]],++X,++f0;f0<=x0;)a0+=o0[f0],m0+=1,g=H.s3_ss[X]*B[f0]*m[o0[f0]],d0=v(d0,g,f0-j),++X,++f0;a0=(1+2*a0)/(2*m0),N0=m[a0]*.5,d0*=N0,w[j]=d0,H.nb_s2[C][j]=H.nb_s1[C][j],H.nb_s1[C][j]=d0,g=k[j],g*=H.minval_s[j],g*=N0,w[j]>g&&(w[j]=g),H.masking_lower>1&&(w[j]*=H.masking_lower),w[j]>B[j]&&(w[j]=B[j]),H.masking_lower<1&&(w[j]*=H.masking_lower),u0(w[j]>=0)}for(;j<Q.CBANDS;++j)B[j]=0,w[j]=0}function e1(b,S,B,w,C){var R=P0(Q.CBANDS),H=P0(Q.CBANDS),k=ne(Q.CBANDS+2),p;S0(b,S,B,R,H),h0(b,R,H,k);var W=0;for(p=0;p<b.npart_l;p++){var X,j,o0,c0,e0=b.s3ind[p][0],b0=b.s3ind[p][1],U=0,f0=0;for(U=k[e0],f0+=1,j=b.s3_ll[W]*B[e0]*m[k[e0]],++W,++e0;e0<=b0;)U+=k[e0],f0+=1,X=b.s3_ll[W]*B[e0]*m[k[e0]],c0=v(j,X,e0-p),j=c0,++W,++e0;if(U=(1+2*U)/(2*f0),o0=m[U]*.5,j*=o0,b.blocktype_old[C&1]==Q.SHORT_TYPE){var x0=$*b.nb_1[C][p];x0>0?w[p]=Math.min(j,x0):w[p]=Math.min(j,B[p]*M)}else{var a0=P*b.nb_2[C][p],m0=$*b.nb_1[C][p],x0;a0<=0&&(a0=j),m0<=0&&(m0=j),b.blocktype_old[C&1]==Q.NORM_TYPE?x0=Math.min(m0,a0):x0=m0,w[p]=Math.min(j,x0)}b.nb_2[C][p]=b.nb_1[C][p],b.nb_1[C][p]=j,X=R[p],X*=b.minval_l[p],X*=o0,w[p]>X&&(w[p]=X),b.masking_lower>1&&(w[p]*=b.masking_lower),w[p]>B[p]&&(w[p]=B[p]),b.masking_lower<1&&(w[p]*=b.masking_lower),u0(w[p]>=0)}for(;p<Q.CBANDS;++p)B[p]=0,w[p]=0}function F1(b,S){var B=b.internal_flags;b.short_blocks==Ae.short_block_coupled&&!(S[0]!=0&&S[1]!=0)&&(S[0]=S[1]=0);for(var w=0;w<B.channels_out;w++)b.short_blocks==Ae.short_block_dispensed&&(S[w]=1),b.short_blocks==Ae.short_block_forced&&(S[w]=0)}function ee(b,S,B){for(var w=b.internal_flags,C=0;C<w.channels_out;C++){var R=Q.NORM_TYPE;S[C]!=0?(u0(w.blocktype_old[C]!=Q.START_TYPE),w.blocktype_old[C]==Q.SHORT_TYPE&&(R=Q.STOP_TYPE)):(R=Q.SHORT_TYPE,w.blocktype_old[C]==Q.NORM_TYPE&&(w.blocktype_old[C]=Q.START_TYPE),w.blocktype_old[C]==Q.STOP_TYPE&&(w.blocktype_old[C]=Q.SHORT_TYPE)),B[C]=w.blocktype_old[C],w.blocktype_old[C]=R}}function J1(b,S,B,w,C,R,H){for(var k=R*2,p=R>0?Math.pow(10,C):1,W,X,j=0;j<H;++j){var o0=b[2][j],c0=b[3][j],e0=S[0][j],b0=S[1][j],U=S[2][j],f0=S[3][j];if(e0<=1.58*b0&&b0<=1.58*e0){var x0=B[j]*c0,a0=B[j]*o0;X=Math.max(U,Math.min(f0,x0)),W=Math.max(f0,Math.min(U,a0))}else X=U,W=f0;if(R>0){var m0,g,d0=w[j]*p;if(m0=Math.min(Math.max(e0,d0),Math.max(b0,d0)),U=Math.max(X,d0),f0=Math.max(W,d0),g=U+f0,g>0&&m0*k<g){var N0=m0*k/g;U*=N0,f0*=N0,u0(g>0)}X=Math.min(U,X),W=Math.min(f0,W)}X>o0&&(X=o0),W>c0&&(W=c0),S[2][j]=X,S[3][j]=W}}this.L3psycho_anal_vbr=function(b,S,B,w,C,R,H,k,p,W){var X=b.internal_flags,j,o0,c0=P0(Q.HBLKSIZE),e0=p1([3,Q.HBLKSIZE_s]),b0=p1([2,Q.BLKSIZE]),U=p1([2,3,Q.BLKSIZE_s]),f0=p1([4,Q.CBANDS]),x0=p1([4,Q.CBANDS]),a0=p1([4,3]),m0=.6,g=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],d0=ne(2),N0=b.mode==MPEGMode.JOINT_STEREO?4:X.channels_out;T0(b,S,B,w,C,R,p,a0,g,d0),F1(b,d0);{for(var v0=0;v0<N0;v0++){var M0=v0&1;j=b0,B0(b,S,B,v0,w,c0,j,M0),A0(b,w,v0,c0),d0[M0]!=0?e1(X,c0,f0[v0],x0[v0],v0):Z0(X,v0)}d0[0]+d0[1]==2&&b.mode==MPEGMode.JOINT_STEREO&&J1(f0,x0,X.mld_cb_l,X.ATH.cb_l,b.ATHlower*X.ATH.adjust,b.msfix,X.npart_l);for(var v0=0;v0<N0;v0++){var M0=v0&1;d0[M0]!=0&&r(X,f0[v0],x0[v0],v0)}}{for(var E0=0;E0<3;E0++){for(var v0=0;v0<N0;++v0){var M0=v0&1;d0[M0]!=0?Y0(X,v0,E0):(o0=U,F0(b,S,B,v0,E0,e0,o0,M0),B1(b,e0,f0[v0],x0[v0],v0,E0))}d0[0]+d0[1]==0&&b.mode==MPEGMode.JOINT_STEREO&&J1(f0,x0,X.mld_cb_s,X.ATH.cb_s,b.ATHlower*X.ATH.adjust,b.msfix,X.npart_s);for(var v0=0;v0<N0;++v0){var M0=v0&1;d0[M0]==0&&y(X,f0[v0],x0[v0],v0,E0)}}for(var v0=0;v0<N0;v0++){var M0=v0&1;if(d0[M0]==0)for(var H0=0;H0<Q.SBMAX_s;H0++){for(var w1=P0(3),E0=0;E0<3;E0++){var q0=X.thm[v0].s[H0][E0];if(q0*=T,g[v0][E0]>=2||g[v0][E0+1]==1){var V0=E0!=0?E0-1:2,a1=N(X.thm[v0].s[H0][V0],q0,V*m0);q0=Math.min(q0,a1)}else if(g[v0][E0]==1){var V0=E0!=0?E0-1:2,a1=N(X.thm[v0].s[H0][V0],q0,M*m0);q0=Math.min(q0,a1)}else if(E0!=0&&g[v0][E0-1]==3||E0==0&&X.nsPsy.lastAttacks[v0]==3){var V0=E0!=2?E0+1:0,a1=N(X.thm[v0].s[H0][V0],q0,M*m0);q0=Math.min(q0,a1)}q0*=a0[v0][E0],w1[E0]=q0}for(var E0=0;E0<3;E0++)X.thm[v0].s[H0][E0]=w1[E0]}}}for(var v0=0;v0<N0;v0++)X.nsPsy.lastAttacks[v0]=g[v0][2];ee(b,d0,W);for(var v0=0;v0<N0;v0++){var y1,I1,k1,X1;v0>1?(y1=k,I1=-2,k1=Q.NORM_TYPE,(W[0]==Q.SHORT_TYPE||W[1]==Q.SHORT_TYPE)&&(k1=Q.SHORT_TYPE),X1=R[w][v0-2]):(y1=H,I1=0,k1=W[v0],X1=C[w][v0]),k1==Q.SHORT_TYPE?y1[I1+v0]=l0(X1,X.masking_lower):y1[I1+v0]=_0(X1,X.masking_lower),b.analysis&&(X.pinfo.pe[w][v0]=y1[I1+v0])}return 0};function z0(b,S){var B=b,w;return B>=0?w=-B*27:w=B*S,w<=-72?0:Math.exp(w*Y)}function ae(b){var S=0,B=0;{var w=0,C,R;for(w=0;z0(w,b)>1e-20;w-=1);for(C=w,R=0;Math.abs(R-C)>1e-12;)w=(R+C)/2,z0(w,b)>0?R=w:C=w;S=C}{var w=0,C,R;for(w=0;z0(w,b)>1e-20;w+=1);for(C=0,R=w;Math.abs(R-C)>1e-12;)w=(R+C)/2,z0(w,b)>0?C=w:R=w;B=R}{var H=0,k=1e3,p;for(p=0;p<=k;++p){var w=S+p*(B-S)/k,W=z0(w,b);H+=W}{var X=(k+1)/(H*(B-S));return X}}}function K1(b){var S,B,w,C;return S=b,S>=0?S*=3:S*=1.5,S>=.5&&S<=2.5?(C=S-.5,B=8*(C*C-2*C)):B=0,S+=.474,w=15.811389+7.5*S-17.5*Math.sqrt(1+S*S),w<=-60?0:(S=Math.exp((B+w)*Y),S/=.6609193,S)}function T1(b){return b<0&&(b=0),b=b*.001,13*Math.atan(.76*b)+3.5*Math.atan(b*b/(7.5*7.5))}function be(b,S,B,w,C,R,H,k,p,W,X,j){var o0=P0(Q.CBANDS+1),c0=k/(j>15?2*576:2*192),e0=ne(Q.HBLKSIZE),b0;k/=p;var U=0,f0=0;for(b0=0;b0<Q.CBANDS;b0++){var x0,a0;for(x0=T1(k*U),o0[b0]=k*U,a0=U;T1(k*a0)-x0<z&&a0<=p/2;a0++);for(b[b0]=a0-U,f0=b0+1;U<a0;)u0(U<Q.HBLKSIZE),e0[U++]=b0;if(U>p/2){U=p/2,++b0;break}}u0(b0<Q.CBANDS),o0[b0]=k*U;for(var m0=0;m0<j;m0++){var g,d0,N0,v0,M0;N0=W[m0],v0=W[m0+1],g=0|Math.floor(.5+X*(N0-.5)),g<0&&(g=0),d0=0|Math.floor(.5+X*(v0-.5)),d0>p/2&&(d0=p/2),B[m0]=(e0[g]+e0[d0])/2,S[m0]=e0[d0];var E0=c0*v0;H[m0]=(E0-o0[S[m0]])/(o0[S[m0]+1]-o0[S[m0]]),H[m0]<0?H[m0]=0:H[m0]>1&&(H[m0]=1),M0=T1(k*W[m0]*X),M0=Math.min(M0,15.5)/15.5,R[m0]=Math.pow(10,1.25*(1-Math.cos(Math.PI*M0))-2.5)}U=0;for(var H0=0;H0<f0;H0++){var w1=b[H0],x0,q0;x0=T1(k*U),q0=T1(k*(U+w1-1)),w[H0]=.5*(x0+q0),x0=T1(k*(U-.5)),q0=T1(k*(U+w1-.5)),C[H0]=q0-x0,U+=w1}return f0}function Sa(b,S,B,w,C,R){var H=p1([Q.CBANDS,Q.CBANDS]),k,p=0;if(R)for(var W=0;W<S;W++)for(k=0;k<S;k++){var X=K1(B[W]-B[k])*w[k];H[W][k]=X*C[W]}else for(k=0;k<S;k++)for(var j=15+Math.min(21/B[k],12),o0=ae(j),W=0;W<S;W++){var X=o0*z0(B[W]-B[k],j)*w[k];H[W][k]=X*C[W]}for(var W=0;W<S;W++){for(k=0;k<S&&!(H[W][k]>0);k++);for(b[W][0]=k,k=S-1;k>0&&!(H[W][k]>0);k--);b[W][1]=k,p+=b[W][1]-b[W][0]+1}for(var c0=P0(p),e0=0,W=0;W<S;W++)for(k=b[W][0];k<=b[W][1];k++)c0[e0++]=H[W][k];return c0}function Aa(b){var S=T1(b);return S=Math.min(S,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*S))-2.5)}this.psymodel_init=function(b){var S=b.internal_flags,B,w=!0,C=13,R=24,H=0,k=0,p=-8.25,W=-4.5,X=P0(Q.CBANDS),j=P0(Q.CBANDS),o0=P0(Q.CBANDS),c0=b.out_samplerate;switch(b.experimentalZ){default:case 0:w=!0;break;case 1:w=!(b.VBR==Se.vbr_mtrh||b.VBR==Se.vbr_mt);break;case 2:w=!1;break;case 3:C=8,H=-1.75,k=-.0125,p=-8.25,W=-2.25;break}for(S.ms_ener_ratio_old=.25,S.blocktype_old[0]=S.blocktype_old[1]=Q.NORM_TYPE,B=0;B<4;++B){for(var U=0;U<Q.CBANDS;++U)S.nb_1[B][U]=1e20,S.nb_2[B][U]=1e20,S.nb_s1[B][U]=S.nb_s2[B][U]=1;for(var e0=0;e0<Q.SBMAX_l;e0++)S.en[B].l[e0]=1e20,S.thm[B].l[e0]=1e20;for(var U=0;U<3;++U){for(var e0=0;e0<Q.SBMAX_s;e0++)S.en[B].s[e0][U]=1e20,S.thm[B].s[e0][U]=1e20;S.nsPsy.lastAttacks[B]=0}for(var U=0;U<9;U++)S.nsPsy.last_en_subshort[B][U]=10}for(S.loudness_sq_save[0]=S.loudness_sq_save[1]=0,S.npart_l=be(S.numlines_l,S.bo_l,S.bm_l,X,j,S.mld_l,S.PSY.bo_l_weight,c0,Q.BLKSIZE,S.scalefac_band.l,Q.BLKSIZE/(2*576),Q.SBMAX_l),u0(S.npart_l<Q.CBANDS),B=0;B<S.npart_l;B++){var b0=H;X[B]>=C&&(b0=k*(X[B]-C)/(R-C)+H*(R-X[B])/(R-C)),o0[B]=Math.pow(10,b0/10),S.numlines_l[B]>0?S.rnumlines_l[B]=1/S.numlines_l[B]:S.rnumlines_l[B]=0}S.s3_ll=Sa(S.s3ind,S.npart_l,X,j,o0,w);var U=0;for(B=0;B<S.npart_l;B++){var f0;f0=pa.MAX_VALUE;for(var x0=0;x0<S.numlines_l[B];x0++,U++){var a0=c0*U/(1e3*Q.BLKSIZE),m0;m0=this.ATHformula(a0*1e3,b)-20,m0=Math.pow(10,.1*m0),m0*=S.numlines_l[B],f0>m0&&(f0=m0)}S.ATH.cb_l[B]=f0,f0=-20+X[B]*20/10,f0>6&&(f0=100),f0<-15&&(f0=-15),f0-=8,S.minval_l[B]=Math.pow(10,f0/10)*S.numlines_l[B]}for(S.npart_s=be(S.numlines_s,S.bo_s,S.bm_s,X,j,S.mld_s,S.PSY.bo_s_weight,c0,Q.BLKSIZE_s,S.scalefac_band.s,Q.BLKSIZE_s/(2*192),Q.SBMAX_s),u0(S.npart_s<Q.CBANDS),U=0,B=0;B<S.npart_s;B++){var f0,b0=p;X[B]>=C&&(b0=W*(X[B]-C)/(R-C)+p*(R-X[B])/(R-C)),o0[B]=Math.pow(10,b0/10),f0=pa.MAX_VALUE;for(var x0=0;x0<S.numlines_s[B];x0++,U++){var a0=c0*U/(1e3*Q.BLKSIZE_s),m0;m0=this.ATHformula(a0*1e3,b)-20,m0=Math.pow(10,.1*m0),m0*=S.numlines_s[B],f0>m0&&(f0=m0)}S.ATH.cb_s[B]=f0,f0=-7+X[B]*7/12,X[B]>12&&(f0*=1+Math.log(1+f0)*3.1),X[B]<12&&(f0*=1+Math.log(1-f0)*2.3),f0<-15&&(f0=-15),f0-=8,S.minval_s[B]=Math.pow(10,f0/10)*S.numlines_s[B]}S.s3_ss=Sa(S.s3ind_s,S.npart_s,X,j,o0,w),u(),E.init_fft(S),S.decay=Math.exp(-1*F/(Z*c0/192));{var g;g=J,b.exp_nspsytune&2&&(g=1),Math.abs(b.msfix)>0&&(g=b.msfix),b.msfix=g;for(var d0=0;d0<S.npart_l;d0++)S.s3ind[d0][1]>S.npart_l-1&&(S.s3ind[d0][1]=S.npart_l-1)}var N0=576*S.mode_gr/c0;if(S.ATH.decay=Math.pow(10,-12/10*N0),S.ATH.adjust=.01,S.ATH.adjustLimit=1,u0(S.bo_l[Q.SBMAX_l-1]<=S.npart_l),u0(S.bo_s[Q.SBMAX_s-1]<=S.npart_s),b.ATHtype!=-1){var a0,v0=b.out_samplerate/Q.BLKSIZE,M0=0;for(a0=0,B=0;B<Q.BLKSIZE/2;++B)a0+=v0,S.ATH.eql_w[B]=1/Math.pow(10,this.ATHformula(a0,b)/10),M0+=S.ATH.eql_w[B];for(M0=1/M0,B=Q.BLKSIZE/2;--B>=0;)S.ATH.eql_w[B]*=M0}{for(var d0=U=0;d0<S.npart_s;++d0)for(B=0;B<S.numlines_s[d0];++B)++U;u0(U==129);for(var d0=U=0;d0<S.npart_l;++d0)for(B=0;B<S.numlines_l[d0];++B)++U;u0(U==513)}for(U=0,B=0;B<S.npart_l;B++){var a0=c0*(U+S.numlines_l[B]/2)/(1*Q.BLKSIZE);S.mld_cb_l[B]=Aa(a0),U+=S.numlines_l[B]}for(;B<Q.CBANDS;++B)S.mld_cb_l[B]=1;for(U=0,B=0;B<S.npart_s;B++){var a0=c0*(U+S.numlines_s[B]/2)/(1*Q.BLKSIZE_s);S.mld_cb_s[B]=Aa(a0),U+=S.numlines_s[B]}for(;B<Q.CBANDS;++B)S.mld_cb_s[B]=1;return 0};function ce(b,S){b<-.3&&(b=3410),b/=1e3,b=Math.max(.1,b);var B=3.64*Math.pow(b,-.8)-6.8*Math.exp(-.6*Math.pow(b-3.4,2))+6*Math.exp(-.15*Math.pow(b-8.7,2))+(.6+.04*S)*.001*Math.pow(b,4);return B}this.ATHformula=function(b,S){var B;switch(S.ATHtype){case 0:B=ce(b,9);break;case 1:B=ce(b,-1);break;case 2:B=ce(b,0);break;case 3:B=ce(b,1)+6;break;case 4:B=ce(b,S.ATHcurve);break;default:B=ce(b,0);break}return B}}var w2=T2;function $1(E){var F=E;this.ordinal=function(){return F}}$1.STEREO=new $1(0);$1.JOINT_STEREO=new $1(1);$1.DUAL_CHANNEL=new $1(2);$1.MONO=new $1(3);$1.NOT_SET=new $1(4);var s2=$1,y2=s2;function I2(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=y2.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var L2=I2,N2=j0(),_2={};_2.SFBMAX=N2.SBMAX_s*3;var Pe=_2,l1=C0;l1.System;l1.VbrMode;l1.Float;l1.ShortBlock;l1.Util;l1.Arrays;l1.new_array_n;l1.new_byte;l1.new_double;var V2=l1.new_float;l1.new_float_n;var se=l1.new_int;l1.new_int_n;l1.assert;var sa=Pe;function p2(){this.xr=V2(576),this.l3_enc=se(576),this.scalefac=se(sa.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=se(3),this.subblock_gain=se(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=se(sa.SFBMAX),this.window=se(sa.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=se(4),this.max_nonzero_coeff=0;var E=this;function F(P){return new Int32Array(P)}function $(P){return new Float32Array(P)}this.assign=function(P){E.xr=$(P.xr),E.l3_enc=F(P.l3_enc),E.scalefac=F(P.scalefac),E.xrpow_max=P.xrpow_max,E.part2_3_length=P.part2_3_length,E.big_values=P.big_values,E.count1=P.count1,E.global_gain=P.global_gain,E.scalefac_compress=P.scalefac_compress,E.block_type=P.block_type,E.mixed_block_flag=P.mixed_block_flag,E.table_select=F(P.table_select),E.subblock_gain=F(P.subblock_gain),E.region0_count=P.region0_count,E.region1_count=P.region1_count,E.preflag=P.preflag,E.scalefac_scale=P.scalefac_scale,E.count1table_select=P.count1table_select,E.part2_length=P.part2_length,E.sfb_lmax=P.sfb_lmax,E.sfb_smin=P.sfb_smin,E.psy_lmax=P.psy_lmax,E.sfbmax=P.sfbmax,E.psymax=P.psymax,E.sfbdivide=P.sfbdivide,E.width=F(P.width),E.window=F(P.window),E.count1bits=P.count1bits,E.sfb_partition_table=P.sfb_partition_table.slice(0),E.slen=F(P.slen),E.max_nonzero_coeff=P.max_nonzero_coeff}}var ba=p2,o1=C0;o1.System;o1.VbrMode;o1.Float;o1.ShortBlock;o1.Util;o1.Arrays;o1.new_array_n;o1.new_byte;o1.new_double;o1.new_float;o1.new_float_n;var Ha=o1.new_int;o1.new_int_n;o1.assert;var H2=ba;function O2(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[Ha(4),Ha(4)];for(var E=0;E<2;E++)for(var F=0;F<2;F++)this.tt[E][F]=new H2}var C2=O2,v1=C0,He=v1.System;v1.VbrMode;v1.Float;v1.ShortBlock;v1.Util;v1.Arrays;v1.new_array_n;v1.new_byte;v1.new_double;v1.new_float;v1.new_float_n;var Oe=v1.new_int;v1.new_int_n;v1.assert;var Ce=j0();function F2(E,F,$,P){this.l=Oe(1+Ce.SBMAX_l),this.s=Oe(1+Ce.SBMAX_s),this.psfb21=Oe(1+Ce.PSFB21),this.psfb12=Oe(1+Ce.PSFB12);var n0=this.l,K=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],He.arraycopy(this.arrL,0,n0,0,Math.min(this.arrL.length,this.l.length)),He.arraycopy(this.arrS,0,K,0,Math.min(this.arrS.length,this.s.length)),He.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),He.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var i2=F2,h1=C0;h1.System;h1.VbrMode;h1.Float;h1.ShortBlock;h1.Util;h1.Arrays;h1.new_array_n;h1.new_byte;h1.new_double;var _a=h1.new_float,k2=h1.new_float_n,X2=h1.new_int;h1.new_int_n;h1.assert;var Oa=j0();function Y2(){this.last_en_subshort=k2([4,9]),this.lastAttacks=X2(4),this.pefirbuf=_a(19),this.longfact=_a(Oa.SBMAX_l),this.shortfact=_a(Oa.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var G2=Y2;function $2(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var q2=$2,u1=C0;u1.System;u1.VbrMode;u1.Float;u1.ShortBlock;u1.Util;u1.Arrays;u1.new_array_n;var D2=u1.new_byte,P2=u1.new_double,H1=u1.new_float,_e=u1.new_float_n,Y1=u1.new_int,Fe=u1.new_int_n;u1.assert;var U2=C2,Z2=i2,K2=G2,Q2=q2,Ca=n2(),$0=j0(),W2=Pe;j1.MFSIZE=3*1152+$0.ENCDELAY-$0.MDCTDELAY;j1.MAX_HEADER_BUF=256;j1.MAX_BITS_PER_CHANNEL=4095;j1.MAX_BITS_PER_GRANULE=7680;j1.BPC=320;function j1(){var E=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=_e([2,j1.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new U2,this.ms_ratio=H1(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=Y1(2),this.CurrentStep=Y1(2),this.masking_lower=0,this.bv_scf=Y1(576),this.pseudohalf=Y1(W2.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*j1.BPC+1),this.itime=P2(2),this.sideinfo_len=0,this.sb_sample=_e([2,2,18,$0.SBLIMIT]),this.amp_filter=H1(32);function F(){this.write_timing=0,this.ptr=0,this.buf=D2(E)}this.header=new Array(j1.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new Z2,this.minval_l=H1($0.CBANDS),this.minval_s=H1($0.CBANDS),this.nb_1=_e([4,$0.CBANDS]),this.nb_2=_e([4,$0.CBANDS]),this.nb_s1=_e([4,$0.CBANDS]),this.nb_s2=_e([4,$0.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=H1(4),this.loudness_sq=_e([2,2]),this.loudness_sq_save=H1(2),this.mld_l=H1($0.SBMAX_l),this.mld_s=H1($0.SBMAX_s),this.bm_l=Y1($0.SBMAX_l),this.bo_l=Y1($0.SBMAX_l),this.bm_s=Y1($0.SBMAX_s),this.bo_s=Y1($0.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=Fe([$0.CBANDS,2]),this.s3ind_s=Fe([$0.CBANDS,2]),this.numlines_s=Y1($0.CBANDS),this.numlines_l=Y1($0.CBANDS),this.rnumlines_l=H1($0.CBANDS),this.mld_cb_l=H1($0.CBANDS),this.mld_cb_s=H1($0.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=H1(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=Y1(2),this.nsPsy=new K2,this.VBR_seek_table=new Q2,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=Fe([16,5]),this.bitrate_blockType_Hist=Fe([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var $=0;$<this.en.length;$++)this.en[$]=new Ca;for(var $=0;$<this.thm.length;$++)this.thm[$]=new Ca;for(var $=0;$<this.header.length;$++)this.header[$]=new F}var Ue=j1,f1=C0;f1.System;f1.VbrMode;f1.Float;f1.ShortBlock;f1.Util;f1.Arrays;f1.new_array_n;f1.new_byte;f1.new_double;var ie=f1.new_float;f1.new_float_n;f1.new_int;f1.new_int_n;f1.assert;var le=j0();function j2(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=ie(le.SBMAX_l),this.s=ie(le.SBMAX_s),this.psfb21=ie(le.PSFB21),this.psfb12=ie(le.PSFB12),this.cb_l=ie(le.CBANDS),this.cb_s=ie(le.CBANDS),this.eql_w=ie(le.BLKSIZE/2)}var z2=j2,m1=C0,n1=m1.System;m1.VbrMode;m1.Float;m1.ShortBlock;m1.Util;var Fa=m1.Arrays;m1.new_array_n;m1.new_byte;m1.new_double;m1.new_float;m1.new_float_n;m1.new_int;m1.new_int_n;m1.assert;p0.STEPS_per_dB=100;p0.MAX_dB=120;p0.GAIN_NOT_ENOUGH_SAMPLES=-24601;p0.GAIN_ANALYSIS_ERROR=0;p0.GAIN_ANALYSIS_OK=1;p0.INIT_GAIN_ANALYSIS_ERROR=0;p0.INIT_GAIN_ANALYSIS_OK=1;p0.YULE_ORDER=10;p0.MAX_ORDER=p0.YULE_ORDER;p0.MAX_SAMP_FREQ=48e3;p0.RMS_WINDOW_TIME_NUMERATOR=1;p0.RMS_WINDOW_TIME_DENOMINATOR=20;p0.MAX_SAMPLES_PER_WINDOW=p0.MAX_SAMP_FREQ*p0.RMS_WINDOW_TIME_NUMERATOR/p0.RMS_WINDOW_TIME_DENOMINATOR+1;function p0(){var E=64.82;p0.YULE_ORDER;var F=.95;p0.MAX_SAMP_FREQ;var $=p0.RMS_WINDOW_TIME_NUMERATOR,P=p0.RMS_WINDOW_TIME_DENOMINATOR;p0.MAX_SAMPLES_PER_WINDOW;var n0=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],K=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function z(M,J,O,Y,q,G){for(;q--!=0;)O[Y]=1e-10+M[J+0]*G[0]-O[Y-1]*G[1]+M[J-1]*G[2]-O[Y-2]*G[3]+M[J-2]*G[4]-O[Y-3]*G[5]+M[J-3]*G[6]-O[Y-4]*G[7]+M[J-4]*G[8]-O[Y-5]*G[9]+M[J-5]*G[10]-O[Y-6]*G[11]+M[J-6]*G[12]-O[Y-7]*G[13]+M[J-7]*G[14]-O[Y-8]*G[15]+M[J-8]*G[16]-O[Y-9]*G[17]+M[J-9]*G[18]-O[Y-10]*G[19]+M[J-10]*G[20],++Y,++J}function D(M,J,O,Y,q,G){for(;q--!=0;)O[Y]=M[J+0]*G[0]-O[Y-1]*G[1]+M[J-1]*G[2]-O[Y-2]*G[3]+M[J-2]*G[4],++Y,++J}function Z(M,J){for(var O=0;O<MAX_ORDER;O++)M.linprebuf[O]=M.lstepbuf[O]=M.loutbuf[O]=M.rinprebuf[O]=M.rstepbuf[O]=M.routbuf[O]=0;switch(0|J){case 48e3:M.reqindex=0;break;case 44100:M.reqindex=1;break;case 32e3:M.reqindex=2;break;case 24e3:M.reqindex=3;break;case 22050:M.reqindex=4;break;case 16e3:M.reqindex=5;break;case 12e3:M.reqindex=6;break;case 11025:M.reqindex=7;break;case 8e3:M.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return M.sampleWindow=0|(J*$+P-1)/P,M.lsum=0,M.rsum=0,M.totsamp=0,Fa.ill(M.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(M,J){return Z(M,J)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(M.linpre=MAX_ORDER,M.rinpre=MAX_ORDER,M.lstep=MAX_ORDER,M.rstep=MAX_ORDER,M.lout=MAX_ORDER,M.rout=MAX_ORDER,Fa.fill(M.B,0),INIT_GAIN_ANALYSIS_OK)};function T(M){return M*M}this.AnalyzeSamples=function(M,J,O,Y,q,G,d){var n,e,c,h,A,f,m;if(G==0)return GAIN_ANALYSIS_OK;switch(m=0,A=G,d){case 1:Y=J,q=O;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(G<MAX_ORDER?(n1.arraycopy(J,O,M.linprebuf,MAX_ORDER,G),n1.arraycopy(Y,q,M.rinprebuf,MAX_ORDER,G)):(n1.arraycopy(J,O,M.linprebuf,MAX_ORDER,MAX_ORDER),n1.arraycopy(Y,q,M.rinprebuf,MAX_ORDER,MAX_ORDER));A>0;){f=A>M.sampleWindow-M.totsamp?M.sampleWindow-M.totsamp:A,m<MAX_ORDER?(n=M.linpre+m,e=M.linprebuf,c=M.rinpre+m,h=M.rinprebuf,f>MAX_ORDER-m&&(f=MAX_ORDER-m)):(n=O+m,e=J,c=q+m,h=Y),z(e,n,M.lstepbuf,M.lstep+M.totsamp,f,n0[M.reqindex]),z(h,c,M.rstepbuf,M.rstep+M.totsamp,f,n0[M.reqindex]),D(M.lstepbuf,M.lstep+M.totsamp,M.loutbuf,M.lout+M.totsamp,f,K[M.reqindex]),D(M.rstepbuf,M.rstep+M.totsamp,M.routbuf,M.rout+M.totsamp,f,K[M.reqindex]),n=M.lout+M.totsamp,e=M.loutbuf,c=M.rout+M.totsamp,h=M.routbuf;for(var u=f%8;u--!=0;)M.lsum+=T(e[n++]),M.rsum+=T(h[c++]);for(u=f/8;u--!=0;)M.lsum+=T(e[n+0])+T(e[n+1])+T(e[n+2])+T(e[n+3])+T(e[n+4])+T(e[n+5])+T(e[n+6])+T(e[n+7]),n+=8,M.rsum+=T(h[c+0])+T(h[c+1])+T(h[c+2])+T(h[c+3])+T(h[c+4])+T(h[c+5])+T(h[c+6])+T(h[c+7]),c+=8;if(A-=f,m+=f,M.totsamp+=f,M.totsamp==M.sampleWindow){var i=p0.STEPS_per_dB*10*Math.log10((M.lsum+M.rsum)/M.totsamp*.5+1e-37),t=i<=0?0:0|i;t>=M.A.length&&(t=M.A.length-1),M.A[t]++,M.lsum=M.rsum=0,n1.arraycopy(M.loutbuf,M.totsamp,M.loutbuf,0,MAX_ORDER),n1.arraycopy(M.routbuf,M.totsamp,M.routbuf,0,MAX_ORDER),n1.arraycopy(M.lstepbuf,M.totsamp,M.lstepbuf,0,MAX_ORDER),n1.arraycopy(M.rstepbuf,M.totsamp,M.rstepbuf,0,MAX_ORDER),M.totsamp=0}if(M.totsamp>M.sampleWindow)return GAIN_ANALYSIS_ERROR}return G<MAX_ORDER?(n1.arraycopy(M.linprebuf,G,M.linprebuf,0,MAX_ORDER-G),n1.arraycopy(M.rinprebuf,G,M.rinprebuf,0,MAX_ORDER-G),n1.arraycopy(J,O,M.linprebuf,MAX_ORDER-G,G),n1.arraycopy(Y,q,M.rinprebuf,MAX_ORDER-G,G)):(n1.arraycopy(J,O+G-MAX_ORDER,M.linprebuf,0,MAX_ORDER),n1.arraycopy(Y,q+G-MAX_ORDER,M.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function V(M,J){var O,Y=0;for(O=0;O<J;O++)Y+=M[O];if(Y==0)return GAIN_NOT_ENOUGH_SAMPLES;var q=0|Math.ceil(Y*(1-F));for(O=J;O-- >0&&!((q-=M[O])<=0););return E-O/p0.STEPS_per_dB}this.GetTitleGain=function(M){for(var J=V(M.A,M.A.length),O=0;O<M.A.length;O++)M.B[O]+=M.A[O],M.A[O]=0;for(var O=0;O<MAX_ORDER;O++)M.linprebuf[O]=M.lstepbuf[O]=M.loutbuf[O]=M.rinprebuf[O]=M.rstepbuf[O]=M.routbuf[O]=0;return M.totsamp=0,M.lsum=M.rsum=0,J}}var l2=p0,b1=C0;b1.System;b1.VbrMode;b1.Float;b1.ShortBlock;b1.Util;b1.Arrays;b1.new_array_n;b1.new_byte;b1.new_double;var Me=b1.new_float;b1.new_float_n;var ka=b1.new_int;b1.new_int_n;b1.assert;var s1=l2;function J2(){this.linprebuf=Me(s1.MAX_ORDER*2),this.linpre=0,this.lstepbuf=Me(s1.MAX_SAMPLES_PER_WINDOW+s1.MAX_ORDER),this.lstep=0,this.loutbuf=Me(s1.MAX_SAMPLES_PER_WINDOW+s1.MAX_ORDER),this.lout=0,this.rinprebuf=Me(s1.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=Me(s1.MAX_SAMPLES_PER_WINDOW+s1.MAX_ORDER),this.rstep=0,this.routbuf=Me(s1.MAX_SAMPLES_PER_WINDOW+s1.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=ka(0|s1.STEPS_per_dB*s1.MAX_dB),this.B=ka(0|s1.STEPS_per_dB*s1.MAX_dB)}var g2=J2;function er(E){this.bits=E}var o2=er,c1=C0;c1.System;c1.VbrMode;c1.Float;c1.ShortBlock;c1.Util;c1.Arrays;c1.new_array_n;c1.new_byte;c1.new_double;var Xa=c1.new_float;c1.new_float_n;var ar=c1.new_int;c1.new_int_n;var Ya=c1.assert,rr=o2,Ga=j0(),tr=Pe,nr=Ue;function sr(E){var F=E;this.quantize=F,this.iteration_loop=function($,P,n0,K){var z=$.internal_flags,D=Xa(tr.SFBMAX),Z=Xa(576),T=ar(2),V=0,M,J=z.l3_side,O=new rr(V);this.quantize.rv.ResvFrameBegin($,O),V=O.bits;for(var Y=0;Y<z.mode_gr;Y++){M=this.quantize.qupvt.on_pe($,P,T,V,Y,Y),z.mode_ext==Ga.MPG_MD_MS_LR&&(this.quantize.ms_convert(z.l3_side,Y),this.quantize.qupvt.reduce_side(T,n0[Y],V,M));for(var q=0;q<z.channels_out;q++){var G,d,n=J.tt[Y][q];n.block_type!=Ga.SHORT_TYPE?(G=0,d=z.PSY.mask_adjust-G):(G=0,d=z.PSY.mask_adjust_short-G),z.masking_lower=Math.pow(10,d*.1),this.quantize.init_outer_loop(z,n),this.quantize.init_xrpow(z,n,Z)&&(this.quantize.qupvt.calc_xmin($,K[Y][q],n,D),this.quantize.outer_loop($,n,D,Z,q,T[q])),this.quantize.iteration_finish_one(z,Y,q),Ya(n.part2_3_length<=nr.MAX_BITS_PER_CHANNEL),Ya(n.part2_3_length<=T[q])}}this.quantize.rv.ResvFrameEnd(z,V)}}var _r=sr;function y0(E,F,$,P){this.xlen=E,this.linmax=F,this.table=$,this.hlen=P}var r0={};r0.t1HB=[1,1,1,0];r0.t2HB=[1,2,1,3,1,1,3,2,0];r0.t3HB=[3,2,1,1,1,1,3,2,0];r0.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];r0.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];r0.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];r0.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];r0.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];r0.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];r0.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];r0.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];r0.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];r0.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];r0.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];r0.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];r0.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];r0.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];r0.t1l=[1,4,3,5];r0.t2l=[1,4,7,4,5,7,6,7,8];r0.t3l=[2,3,7,4,4,7,6,7,8];r0.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];r0.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];r0.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];r0.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];r0.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];r0.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];r0.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];r0.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];r0.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];r0.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];r0.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];r0.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];r0.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];r0.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10];r0.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];r0.ht=[new y0(0,0,null,null),new y0(2,0,r0.t1HB,r0.t1l),new y0(3,0,r0.t2HB,r0.t2l),new y0(3,0,r0.t3HB,r0.t3l),new y0(0,0,null,null),new y0(4,0,r0.t5HB,r0.t5l),new y0(4,0,r0.t6HB,r0.t6l),new y0(6,0,r0.t7HB,r0.t7l),new y0(6,0,r0.t8HB,r0.t8l),new y0(6,0,r0.t9HB,r0.t9l),new y0(8,0,r0.t10HB,r0.t10l),new y0(8,0,r0.t11HB,r0.t11l),new y0(8,0,r0.t12HB,r0.t12l),new y0(16,0,r0.t13HB,r0.t13l),new y0(0,0,null,r0.t16_5l),new y0(16,0,r0.t15HB,r0.t15l),new y0(1,1,r0.t16HB,r0.t16l),new y0(2,3,r0.t16HB,r0.t16l),new y0(3,7,r0.t16HB,r0.t16l),new y0(4,15,r0.t16HB,r0.t16l),new y0(6,63,r0.t16HB,r0.t16l),new y0(8,255,r0.t16HB,r0.t16l),new y0(10,1023,r0.t16HB,r0.t16l),new y0(13,8191,r0.t16HB,r0.t16l),new y0(4,15,r0.t24HB,r0.t24l),new y0(5,31,r0.t24HB,r0.t24l),new y0(6,63,r0.t24HB,r0.t24l),new y0(7,127,r0.t24HB,r0.t24l),new y0(8,255,r0.t24HB,r0.t24l),new y0(9,511,r0.t24HB,r0.t24l),new y0(11,2047,r0.t24HB,r0.t24l),new y0(13,8191,r0.t24HB,r0.t24l),new y0(0,0,r0.t32HB,r0.t32l),new y0(0,0,r0.t33HB,r0.t33l)];r0.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];r0.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];r0.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];r0.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];r0.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];r0.scfsi_band=[0,6,11,16,21];var ca=r0,Q1=i2,d1=C0;d1.System;var oe=d1.VbrMode,ke=d1.Float;d1.ShortBlock;var ia=d1.Util;d1.Arrays;d1.new_array_n;d1.new_byte;d1.new_double;var ve=d1.new_float;d1.new_float_n;var ir=d1.new_int;d1.new_int_n;var W1=d1.assert,Q0=j0(),lr=o2,J0=Ue;N1.Q_MAX=257;N1.Q_MAX2=116;N1.LARGE_BITS=1e5;N1.IXMAX_VAL=8206;function N1(){var E=null,F=null,$=null;this.setModules=function(n,e,c){E=n,F=e,$=c};function P(n){return W1(0<=n+N1.Q_MAX2&&n<N1.Q_MAX),M[n+N1.Q_MAX2]}this.IPOW20=function(n){return W1(0<=n&&n<N1.Q_MAX),J[n]};var n0=2220446049250313e-31,K=N1.IXMAX_VAL,z=K+2,D=N1.Q_MAX,Z=N1.Q_MAX2;N1.LARGE_BITS;var T=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var V=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=V,this.sfBandIndex=[new Q1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Q1([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Q1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Q1([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Q1([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Q1([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Q1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Q1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Q1([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var M=ve(D+Z+1),J=ve(D),O=ve(z),Y=ve(z);this.adj43=Y;function q(n,e){var c=$.ATHformula(e,n);return c-=T,c=Math.pow(10,c/10+n.ATHlower),c}function G(n){for(var e=n.internal_flags.ATH.l,c=n.internal_flags.ATH.psfb21,h=n.internal_flags.ATH.s,A=n.internal_flags.ATH.psfb12,f=n.internal_flags,m=n.out_samplerate,u=0;u<Q0.SBMAX_l;u++){var i=f.scalefac_band.l[u],t=f.scalefac_band.l[u+1];e[u]=ke.MAX_VALUE;for(var a=i;a<t;a++){var s=a*m/1152,_=q(n,s);e[u]=Math.min(e[u],_)}}for(var u=0;u<Q0.PSFB21;u++){var i=f.scalefac_band.psfb21[u],t=f.scalefac_band.psfb21[u+1];c[u]=ke.MAX_VALUE;for(var a=i;a<t;a++){var s=a*m/1152,_=q(n,s);c[u]=Math.min(c[u],_)}}for(var u=0;u<Q0.SBMAX_s;u++){var i=f.scalefac_band.s[u],t=f.scalefac_band.s[u+1];h[u]=ke.MAX_VALUE;for(var a=i;a<t;a++){var s=a*m/384,_=q(n,s);h[u]=Math.min(h[u],_)}h[u]*=f.scalefac_band.s[u+1]-f.scalefac_band.s[u]}for(var u=0;u<Q0.PSFB12;u++){var i=f.scalefac_band.psfb12[u],t=f.scalefac_band.psfb12[u+1];A[u]=ke.MAX_VALUE;for(var a=i;a<t;a++){var s=a*m/384,_=q(n,s);A[u]=Math.min(A[u],_)}A[u]*=f.scalefac_band.s[13]-f.scalefac_band.s[12]}if(n.noATH){for(var u=0;u<Q0.SBMAX_l;u++)e[u]=1e-20;for(var u=0;u<Q0.PSFB21;u++)c[u]=1e-20;for(var u=0;u<Q0.SBMAX_s;u++)h[u]=1e-20;for(var u=0;u<Q0.PSFB12;u++)A[u]=1e-20}f.ATH.floor=10*Math.log10(q(n,-1))}this.iteration_init=function(n){var e=n.internal_flags,c=e.l3_side,h;if(e.iteration_init_init==0){for(e.iteration_init_init=1,c.main_data_begin=0,G(n),O[0]=0,h=1;h<z;h++)O[h]=Math.pow(h,4/3);for(h=0;h<z-1;h++)Y[h]=h+1-Math.pow(.5*(O[h]+O[h+1]),.75);for(Y[h]=.5,h=0;h<D;h++)J[h]=Math.pow(2,(h-210)*-.1875);for(h=0;h<=D+Z;h++)M[h]=Math.pow(2,(h-210-Z)*.25);E.huffman_init(e);{var A,f,m,u;for(h=n.exp_nspsytune>>2&63,h>=32&&(h-=64),A=Math.pow(10,h/4/10),h=n.exp_nspsytune>>8&63,h>=32&&(h-=64),f=Math.pow(10,h/4/10),h=n.exp_nspsytune>>14&63,h>=32&&(h-=64),m=Math.pow(10,h/4/10),h=n.exp_nspsytune>>20&63,h>=32&&(h-=64),u=m*Math.pow(10,h/4/10),h=0;h<Q0.SBMAX_l;h++){var i;h<=6?i=A:h<=13?i=f:h<=20?i=m:i=u,e.nsPsy.longfact[h]=i}for(h=0;h<Q0.SBMAX_s;h++){var i;h<=5?i=A:h<=10?i=f:h<=11?i=m:i=u,e.nsPsy.shortfact[h]=i}}}},this.on_pe=function(n,e,c,h,A,f){var m=n.internal_flags,u=0,i,t=ir(2),a,s=new lr(u),_=F.ResvMaxBits(n,h,s,f);u=s.bits;var v=u+_;for(v>J0.MAX_BITS_PER_GRANULE&&(v=J0.MAX_BITS_PER_GRANULE),i=0,a=0;a<m.channels_out;++a)c[a]=Math.min(J0.MAX_BITS_PER_CHANNEL,u/m.channels_out),t[a]=0|c[a]*e[A][a]/700-c[a],t[a]>h*3/4&&(t[a]=h*3/4),t[a]<0&&(t[a]=0),t[a]+c[a]>J0.MAX_BITS_PER_CHANNEL&&(t[a]=Math.max(0,J0.MAX_BITS_PER_CHANNEL-c[a])),i+=t[a];if(i>_)for(a=0;a<m.channels_out;++a)t[a]=_*t[a]/i;for(a=0;a<m.channels_out;++a)c[a]+=t[a],_-=t[a];for(i=0,a=0;a<m.channels_out;++a)i+=c[a];if(i>J0.MAX_BITS_PER_GRANULE){var o=0;for(a=0;a<m.channels_out;++a)c[a]*=J0.MAX_BITS_PER_GRANULE,c[a]/=i,o+=c[a];W1(o<=J0.MAX_BITS_PER_GRANULE)}return v},this.reduce_side=function(n,e,c,h){W1(h<=J0.MAX_BITS_PER_GRANULE),W1(n[0]+n[1]<=J0.MAX_BITS_PER_GRANULE);var A=.33*(.5-e)/.5;A<0&&(A=0),A>.5&&(A=.5);var f=0|A*.5*(n[0]+n[1]);f>J0.MAX_BITS_PER_CHANNEL-n[0]&&(f=J0.MAX_BITS_PER_CHANNEL-n[0]),f<0&&(f=0),n[1]>=125&&(n[1]-f>125?(n[0]<c&&(n[0]+=f),n[1]-=f):(n[0]+=n[1]-125,n[1]=125)),f=n[0]+n[1],f>h&&(n[0]=h*n[0]/f,n[1]=h*n[1]/f),W1(n[0]<=J0.MAX_BITS_PER_CHANNEL),W1(n[1]<=J0.MAX_BITS_PER_CHANNEL),W1(n[0]+n[1]<=J0.MAX_BITS_PER_GRANULE)},this.athAdjust=function(n,e,c){var h=90.30873362,A=94.82444863,f=ia.FAST_LOG10_X(e,10),m=n*n,u=0;return f-=c,m>1e-20&&(u=1+ia.FAST_LOG10_X(m,10/h)),u<0&&(u=0),f*=u,f+=c+h-A,Math.pow(10,.1*f)},this.calc_xmin=function(n,e,c,h){var A=0,f=n.internal_flags,m,u=0,i=0,t=f.ATH,a=c.xr,s=n.VBR==oe.vbr_mtrh?1:0,_=f.masking_lower;for((n.VBR==oe.vbr_mtrh||n.VBR==oe.vbr_mt)&&(_=1),m=0;m<c.psy_lmax;m++){var v,o,L,x,y,r;n.VBR==oe.vbr_rh||n.VBR==oe.vbr_mtrh?o=athAdjust(t.adjust,t.l[m],t.floor):o=t.adjust*t.l[m],y=c.width[m],L=o/y,x=n0,r=y>>1,v=0;do{var l,I;l=a[u]*a[u],v+=l,x+=l<L?l:L,u++,I=a[u]*a[u],v+=I,x+=I<L?I:L,u++}while(--r>0);if(v>o&&i++,m==Q0.SBPSY_l){var N=o*f.nsPsy.longfact[m];x<N&&(x=N)}if(s!=0&&(o=x),!n.ATHonly){var t0=e.en.l[m];if(t0>0){var N;N=v*e.thm.l[m]*_/t0,s!=0&&(N*=f.nsPsy.longfact[m]),o<N&&(o=N)}}s!=0?h[A++]=o:h[A++]=o*f.nsPsy.longfact[m]}var l0=575;if(c.block_type!=Q0.SHORT_TYPE)for(var i0=576;i0--!=0&&BitStream.EQ(a[i0],0);)l0=i0;c.max_nonzero_coeff=l0;for(var _0=c.sfb_smin;m<c.psymax;_0++,m+=3){var y,S0,h0;for(n.VBR==oe.vbr_rh||n.VBR==oe.vbr_mtrh?h0=athAdjust(t.adjust,t.s[_0],t.floor):h0=t.adjust*t.s[_0],y=c.width[m],S0=0;S0<3;S0++){var v=0,o,L,x,r=y>>1;L=h0/y,x=n0;do{var l,I;l=a[u]*a[u],v+=l,x+=l<L?l:L,u++,I=a[u]*a[u],v+=I,x+=I<L?I:L,u++}while(--r>0);if(v>h0&&i++,_0==Q0.SBPSY_s){var N=h0*f.nsPsy.shortfact[_0];x<N&&(x=N)}if(s!=0?o=x:o=h0,!n.ATHonly&&!n.ATHshort){var t0=e.en.s[_0][S0];if(t0>0){var N;N=v*e.thm.s[_0][S0]*_/t0,s!=0&&(N*=f.nsPsy.shortfact[_0]),o<N&&(o=N)}}s!=0?h[A++]=o:h[A++]=o*f.nsPsy.shortfact[_0]}n.useTemporal&&(h[A-3]>h[A-3+1]&&(h[A-3+1]+=(h[A-3]-h[A-3+1])*f.decay),h[A-3+1]>h[A-3+2]&&(h[A-3+2]+=(h[A-3+1]-h[A-3+2])*f.decay))}return i};function d(n){this.s=n}this.calc_noise_core=function(n,e,c,h){var A=0,f=e.s,m=n.l3_enc;if(f>n.count1)for(;c--!=0;){var u;u=n.xr[f],f++,A+=u*u,u=n.xr[f],f++,A+=u*u}else if(f>n.big_values){var i=ve(2);for(i[0]=0,i[1]=h;c--!=0;){var u;u=Math.abs(n.xr[f])-i[m[f]],f++,A+=u*u,u=Math.abs(n.xr[f])-i[m[f]],f++,A+=u*u}}else for(;c--!=0;){var u;u=Math.abs(n.xr[f])-O[m[f]]*h,f++,A+=u*u,u=Math.abs(n.xr[f])-O[m[f]]*h,f++,A+=u*u}return e.s=f,A},this.calc_noise=function(n,e,c,h,A){var f=0,m=0,u,i,t=0,a=0,s=0,_=-20,v=0,o=n.scalefac,L=0;for(h.over_SSD=0,u=0;u<n.psymax;u++){var x=n.global_gain-(o[L++]+(n.preflag!=0?V[u]:0)<<n.scalefac_scale+1)-n.subblock_gain[n.window[u]]*8,y=0;if(A!=null&&A.step[u]==x)y=A.noise[u],v+=n.width[u],c[f++]=y/e[m++],y=A.noise_log[u];else{var r=P(x);if(i=n.width[u]>>1,v+n.width[u]>n.max_nonzero_coeff){var l;l=n.max_nonzero_coeff-v+1,l>0?i=l>>1:i=0}var I=new d(v);y=this.calc_noise_core(n,I,i,r),v=I.s,A!=null&&(A.step[u]=x,A.noise[u]=y),y=c[f++]=y/e[m++],y=ia.FAST_LOG10(Math.max(y,1e-20)),A!=null&&(A.noise_log[u]=y)}if(A!=null&&(A.global_gain=n.global_gain),s+=y,y>0){var N;N=Math.max(0|y*10+.5,1),h.over_SSD+=N*N,t++,a+=y}_=Math.max(_,y)}return h.over_count=t,h.tot_noise=s,h.over_noise=a,h.max_noise=_,t},this.set_pinfo=function(n,e,c,h,A){var f=n.internal_flags,m,u,i,t,a,s=e.scalefac_scale==0?.5:1,_=e.scalefac,v=ve(L3Side.SFBMAX),o=ve(L3Side.SFBMAX),L=new CalcNoiseResult;calc_xmin(n,c,e,v),calc_noise(e,v,o,L,null);var x=0;for(u=e.sfb_lmax,e.block_type!=Q0.SHORT_TYPE&&e.mixed_block_flag==0&&(u=22),m=0;m<u;m++){var y=f.scalefac_band.l[m],r=f.scalefac_band.l[m+1],l=r-y;for(t=0;x<r;x++)t+=e.xr[x]*e.xr[x];t/=l,a=1e15,f.pinfo.en[h][A][m]=a*t,f.pinfo.xfsf[h][A][m]=a*v[m]*o[m]/l,c.en.l[m]>0&&!n.ATHonly?t=t/c.en.l[m]:t=0,f.pinfo.thr[h][A][m]=a*Math.max(t*c.thm.l[m],f.ATH.l[m]),f.pinfo.LAMEsfb[h][A][m]=0,e.preflag!=0&&m>=11&&(f.pinfo.LAMEsfb[h][A][m]=-s*V[m]),m<Q0.SBPSY_l&&(W1(_[m]>=0),f.pinfo.LAMEsfb[h][A][m]-=s*_[m])}if(e.block_type==Q0.SHORT_TYPE)for(u=m,m=e.sfb_smin;m<Q0.SBMAX_s;m++)for(var y=f.scalefac_band.s[m],r=f.scalefac_band.s[m+1],l=r-y,I=0;I<3;I++){for(t=0,i=y;i<r;i++)t+=e.xr[x]*e.xr[x],x++;t=Math.max(t/l,1e-20),a=1e15,f.pinfo.en_s[h][A][3*m+I]=a*t,f.pinfo.xfsf_s[h][A][3*m+I]=a*v[u]*o[u]/l,c.en.s[m][I]>0?t=t/c.en.s[m][I]:t=0,(n.ATHonly||n.ATHshort)&&(t=0),f.pinfo.thr_s[h][A][3*m+I]=a*Math.max(t*c.thm.s[m][I],f.ATH.s[m]),f.pinfo.LAMEsfb_s[h][A][3*m+I]=-2*e.subblock_gain[I],m<Q0.SBPSY_s&&(f.pinfo.LAMEsfb_s[h][A][3*m+I]-=s*_[u]),u++}f.pinfo.LAMEqss[h][A]=e.global_gain,f.pinfo.LAMEmainbits[h][A]=e.part2_3_length+e.part2_length,f.pinfo.LAMEsfbits[h][A]=e.part2_length,f.pinfo.over[h][A]=L.over_count,f.pinfo.max_noise[h][A]=L.max_noise*10,f.pinfo.over_noise[h][A]=L.over_noise*10,f.pinfo.tot_noise[h][A]=L.tot_noise*10,f.pinfo.over_SSD[h][A]=L.over_SSD}}var v2=N1,S1=C0,or=S1.System;S1.VbrMode;S1.Float;S1.ShortBlock;S1.Util;var vr=S1.Arrays;S1.new_array_n;S1.new_byte;S1.new_double;S1.new_float;S1.new_float_n;var we=S1.new_int;S1.new_int_n;var O1=S1.assert,k0=j0(),X0=ca,hr=ba,he=v2;function ma(){var E=null;this.qupvt=null,this.setModules=function(i){this.qupvt=i,E=i};function F(i){this.bits=0|i}var $=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function P(i,t,a,s,_,v){var o=.5946/t;for(O1(i>0),i=i>>1;i--!=0;)_[v++]=o>a[s++]?0:1,_[v++]=o>a[s++]?0:1}function n0(i,t,a,s,_,v){O1(i>0),i=i>>1;var o=i%2;for(i=i>>1;i--!=0;){var L,x,y,r,l,I,N,t0;L=a[s++]*t,x=a[s++]*t,l=0|L,y=a[s++]*t,I=0|x,r=a[s++]*t,N=0|y,L+=E.adj43[l],t0=0|r,x+=E.adj43[I],_[v++]=0|L,y+=E.adj43[N],_[v++]=0|x,r+=E.adj43[t0],_[v++]=0|y,_[v++]=0|r}if(o!=0){var L,x,l,I;L=a[s++]*t,x=a[s++]*t,l=0|L,I=0|x,L+=E.adj43[l],x+=E.adj43[I],_[v++]=0|L,_[v++]=0|x}}function K(i,t,a,s,_){var v,o,L=0,x,y=0,r=0,l=0,I=t,N=0,t0=I,l0=0,i0=i,_0=0;for(x=_!=null&&s.global_gain==_.global_gain,s.block_type==k0.SHORT_TYPE?o=38:o=21,v=0;v<=o;v++){var S0=-1;if((x||s.block_type==k0.NORM_TYPE)&&(S0=s.global_gain-(s.scalefac[v]+(s.preflag!=0?E.pretab[v]:0)<<s.scalefac_scale+1)-s.subblock_gain[s.window[v]]*8),O1(s.width[v]>=0),x&&_.step[v]==S0)y!=0&&(n0(y,a,i0,_0,t0,l0),y=0),r!=0&&(P(r,a,i0,_0,t0,l0),r=0);else{var h0=s.width[v];if(L+s.width[v]>s.max_nonzero_coeff){var s0;s0=s.max_nonzero_coeff-L+1,vr.fill(t,s.max_nonzero_coeff,576,0),h0=s0,h0<0&&(h0=0),v=o+1}if(y==0&&r==0&&(t0=I,l0=N,i0=i,_0=l),_!=null&&_.sfb_count1>0&&v>=_.sfb_count1&&_.step[v]>0&&S0>=_.step[v]?(y!=0&&(n0(y,a,i0,_0,t0,l0),y=0,t0=I,l0=N,i0=i,_0=l),r+=h0):(r!=0&&(P(r,a,i0,_0,t0,l0),r=0,t0=I,l0=N,i0=i,_0=l),y+=h0),h0<=0){r!=0&&(P(r,a,i0,_0,t0,l0),r=0),y!=0&&(n0(y,a,i0,_0,t0,l0),y=0);break}}v<=o&&(N+=s.width[v],l+=s.width[v],L+=s.width[v])}y!=0&&(n0(y,a,i0,_0,t0,l0),y=0),r!=0&&(P(r,a,i0,_0,t0,l0),r=0)}function z(i,t,a){var s=0,_=0;do{var v=i[t++],o=i[t++];s<v&&(s=v),_<o&&(_=o)}while(t<a);return s<_&&(s=_),s}function D(i,t,a,s,_,v){var o=X0.ht[s].xlen*65536+X0.ht[_].xlen,L=0,x;do{var y=i[t++],r=i[t++];y!=0&&(y>14&&(y=15,L+=o),y*=16),r!=0&&(r>14&&(r=15,L+=o),y+=r),L+=X0.largetbl[y]}while(t<a);return x=L&65535,L>>=16,L>x&&(L=x,s=_),v.bits+=L,s}function Z(i,t,a,s){var _=0,v=X0.ht[1].hlen;do{var o=i[t+0]*2+i[t+1];t+=2,_+=v[o]}while(t<a);return s.bits+=_,1}function T(i,t,a,s,_){var v=0,o,L=X0.ht[s].xlen,x;s==2?x=X0.table23:x=X0.table56;do{var y=i[t+0]*L+i[t+1];t+=2,v+=x[y]}while(t<a);return o=v&65535,v>>=16,v>o&&(v=o,s++),_.bits+=v,s}function V(i,t,a,s,_){var v=0,o=0,L=0,x=X0.ht[s].xlen,y=X0.ht[s].hlen,r=X0.ht[s+1].hlen,l=X0.ht[s+2].hlen;do{var I=i[t+0]*x+i[t+1];t+=2,v+=y[I],o+=r[I],L+=l[I]}while(t<a);var N=s;return v>o&&(v=o,N++),v>L&&(v=L,N=s+2),_.bits+=v,N}var M=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function J(i,t,a,s){var _=z(i,t,a);switch(_){case 0:return _;case 1:return Z(i,t,a,s);case 2:case 3:return T(i,t,a,M[_-1],s);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return V(i,t,a,M[_-1],s);default:if(_>he.IXMAX_VAL)return s.bits=he.LARGE_BITS,-1;_-=15;var v;for(v=24;v<32&&!(X0.ht[v].linmax>=_);v++);var o;for(o=v-8;o<24&&!(X0.ht[o].linmax>=_);o++);return D(i,t,a,o,v,s)}}this.noquant_count_bits=function(i,t,a){var s=t.l3_enc,_=Math.min(576,t.max_nonzero_coeff+2>>1<<1);for(a!=null&&(a.sfb_count1=0);_>1&&!(s[_-1]|s[_-2]);_-=2);t.count1=_;for(var v=0,o=0;_>3;_-=4){var L;if(((s[_-1]|s[_-2]|s[_-3]|s[_-4])&2147483647)>1)break;L=((s[_-4]*2+s[_-3])*2+s[_-2])*2+s[_-1],v+=X0.t32l[L],o+=X0.t33l[L]}var x=v;if(t.count1table_select=0,v>o&&(x=o,t.count1table_select=1),t.count1bits=x,t.big_values=_,_==0)return x;if(t.block_type==k0.SHORT_TYPE)v=3*i.scalefac_band.s[3],v>t.big_values&&(v=t.big_values),o=t.big_values;else if(t.block_type==k0.NORM_TYPE){if(O1(_<=576),v=t.region0_count=i.bv_scf[_-2],o=t.region1_count=i.bv_scf[_-1],O1(v+o+2<k0.SBPSY_l),o=i.scalefac_band.l[v+o+2],v=i.scalefac_band.l[v+1],o<_){var y=new F(x);t.table_select[2]=J(s,o,_,y),x=y.bits}}else t.region0_count=7,t.region1_count=k0.SBMAX_l-1-7-1,v=i.scalefac_band.l[8],o=_,v>o&&(v=o);if(v=Math.min(v,_),o=Math.min(o,_),O1(v>=0),O1(o>=0),0<v){var y=new F(x);t.table_select[0]=J(s,0,v,y),x=y.bits}if(v<o){var y=new F(x);t.table_select[1]=J(s,v,o,y),x=y.bits}if(i.use_best_huffman==2&&(t.part2_3_length=x,best_huffman_divide(i,t),x=t.part2_3_length),a!=null&&t.block_type==k0.NORM_TYPE){for(var r=0;i.scalefac_band.l[r]<t.big_values;)r++;a.sfb_count1=r}return x},this.count_bits=function(i,t,a,s){var _=a.l3_enc,v=he.IXMAX_VAL/E.IPOW20(a.global_gain);if(a.xrpow_max>v)return he.LARGE_BITS;if(K(t,_,E.IPOW20(a.global_gain),a,s),i.substep_shaping&2)for(var o=0,L=a.global_gain+a.scalefac_scale,x=.634521682242439/E.IPOW20(L),y=0;y<a.sfbmax;y++){var r=a.width[y];if(O1(r>=0),i.pseudohalf[y]==0)o+=r;else{var l;for(l=o,o+=r;l<o;++l)_[l]=t[l]>=x?_[l]:0}}return this.noquant_count_bits(i,a,s)};function O(i,t,a,s,_,v,o){for(var L=t.big_values,x=0;x<=22;x++)s[x]=he.LARGE_BITS;for(var x=0;x<16;x++){var y=i.scalefac_band.l[x+1];if(y>=L)break;var r=0,l=new F(r),I=J(a,0,y,l);r=l.bits;for(var N=0;N<8;N++){var t0=i.scalefac_band.l[x+N+2];if(t0>=L)break;var l0=r;l=new F(l0);var i0=J(a,y,t0,l);l0=l.bits,s[x+N]>l0&&(s[x+N]=l0,_[x+N]=x,v[x+N]=I,o[x+N]=i0)}}}function Y(i,t,a,s,_,v,o,L){for(var x=t.big_values,y=2;y<k0.SBMAX_l+1;y++){var r=i.scalefac_band.l[y];if(r>=x)break;var l=_[y-2]+t.count1bits;if(a.part2_3_length<=l)break;var I=new F(l),N=J(s,r,x,I);l=I.bits,!(a.part2_3_length<=l)&&(a.assign(t),a.part2_3_length=l,a.region0_count=v[y-2],a.region1_count=y-2-v[y-2],a.table_select[0]=o[y-2],a.table_select[1]=L[y-2],a.table_select[2]=N)}}this.best_huffman_divide=function(i,t){var a=new hr,s=t.l3_enc,_=we(23),v=we(23),o=we(23),L=we(23);if(!(t.block_type==k0.SHORT_TYPE&&i.mode_gr==1)){a.assign(t),t.block_type==k0.NORM_TYPE&&(O(i,t,s,_,v,o,L),Y(i,a,t,s,_,v,o,L));var x=a.big_values;if(!(x==0||(s[x-2]|s[x-1])>1)&&(x=t.count1+2,!(x>576))){a.assign(t),a.count1=x;var y=0,r=0;for(O1(x<=576);x>a.big_values;x-=4){var l=((s[x-4]*2+s[x-3])*2+s[x-2])*2+s[x-1];y+=X0.t32l[l],r+=X0.t33l[l]}if(a.big_values=x,a.count1table_select=0,y>r&&(y=r,a.count1table_select=1),a.count1bits=y,a.block_type==k0.NORM_TYPE)Y(i,a,t,s,_,v,o,L);else{if(a.part2_3_length=y,y=i.scalefac_band.l[8],y>x&&(y=x),y>0){var I=new F(a.part2_3_length);a.table_select[0]=J(s,0,y,I),a.part2_3_length=I.bits}if(x>y){var I=new F(a.part2_3_length);a.table_select[1]=J(s,y,x,I),a.part2_3_length=I.bits}t.part2_3_length>a.part2_3_length&&t.assign(a)}}}};var q=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],G=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],d=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],n=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];ma.slen1_tab=d,ma.slen2_tab=n;function e(i,t){for(var a,s=t.tt[1][i],_=t.tt[0][i],v=0;v<X0.scfsi_band.length-1;v++){for(a=X0.scfsi_band[v];a<X0.scfsi_band[v+1]&&!(_.scalefac[a]!=s.scalefac[a]&&s.scalefac[a]>=0);a++);if(a==X0.scfsi_band[v+1]){for(a=X0.scfsi_band[v];a<X0.scfsi_band[v+1];a++)s.scalefac[a]=-1;t.scfsi[i][v]=1}}var o=0,L=0;for(a=0;a<11;a++)s.scalefac[a]!=-1&&(L++,o<s.scalefac[a]&&(o=s.scalefac[a]));for(var x=0,y=0;a<k0.SBPSY_l;a++)s.scalefac[a]!=-1&&(y++,x<s.scalefac[a]&&(x=s.scalefac[a]));for(var v=0;v<16;v++)if(o<q[v]&&x<G[v]){var r=d[v]*L+n[v]*y;s.part2_length>r&&(s.part2_length=r,s.scalefac_compress=v)}}this.best_scalefac_store=function(i,t,a,s){var _=s.tt[t][a],v,o,L,x,y=0;for(L=0,v=0;v<_.sfbmax;v++){var r=_.width[v];for(O1(r>=0),L+=r,x=-r;x<0&&_.l3_enc[x+L]==0;x++);x==0&&(_.scalefac[v]=y=-2)}if(_.scalefac_scale==0&&_.preflag==0){var l=0;for(v=0;v<_.sfbmax;v++)_.scalefac[v]>0&&(l|=_.scalefac[v]);if(!(l&1)&&l!=0){for(v=0;v<_.sfbmax;v++)_.scalefac[v]>0&&(_.scalefac[v]>>=1);_.scalefac_scale=y=1}}if(_.preflag==0&&_.block_type!=k0.SHORT_TYPE&&i.mode_gr==2){for(v=11;v<k0.SBPSY_l&&!(_.scalefac[v]<E.pretab[v]&&_.scalefac[v]!=-2);v++);if(v==k0.SBPSY_l){for(v=11;v<k0.SBPSY_l;v++)_.scalefac[v]>0&&(_.scalefac[v]-=E.pretab[v]);_.preflag=y=1}}for(o=0;o<4;o++)s.scfsi[a][o]=0;for(i.mode_gr==2&&t==1&&s.tt[0][a].block_type!=k0.SHORT_TYPE&&s.tt[1][a].block_type!=k0.SHORT_TYPE&&(e(a,s),y=0),v=0;v<_.sfbmax;v++)_.scalefac[v]==-2&&(_.scalefac[v]=0);y!=0&&(i.mode_gr==2?this.scale_bitcount(_):this.scale_bitcount_lsf(i,_))};function c(i,t){for(var a=0;a<t;++a)if(i[a]<0)return!1;return!0}var h=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],A=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],f=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(i){var t,a,s=0,_=0,v,o=i.scalefac;if(O1(c(o,i.sfbmax)),i.block_type==k0.SHORT_TYPE)v=h,i.mixed_block_flag!=0&&(v=A);else if(v=f,i.preflag==0){for(a=11;a<k0.SBPSY_l&&!(o[a]<E.pretab[a]);a++);if(a==k0.SBPSY_l)for(i.preflag=1,a=11;a<k0.SBPSY_l;a++)o[a]-=E.pretab[a]}for(a=0;a<i.sfbdivide;a++)s<o[a]&&(s=o[a]);for(;a<i.sfbmax;a++)_<o[a]&&(_=o[a]);for(i.part2_length=he.LARGE_BITS,t=0;t<16;t++)s<q[t]&&_<G[t]&&i.part2_length>v[t]&&(i.part2_length=v[t],i.scalefac_compress=t);return i.part2_length==he.LARGE_BITS};var m=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(i,t){var a,s,_,v,o,L,x,y,r=we(4),l=t.scalefac;for(t.preflag!=0?a=2:a=0,x=0;x<4;x++)r[x]=0;if(t.block_type==k0.SHORT_TYPE){s=1;var I=E.nr_of_sfb_block[a][s];for(y=0,_=0;_<4;_++)for(v=I[_]/3,x=0;x<v;x++,y++)for(o=0;o<3;o++)l[y*3+o]>r[_]&&(r[_]=l[y*3+o])}else{s=0;var I=E.nr_of_sfb_block[a][s];for(y=0,_=0;_<4;_++)for(v=I[_],x=0;x<v;x++,y++)l[y]>r[_]&&(r[_]=l[y])}for(L=!1,_=0;_<4;_++)r[_]>m[a][_]&&(L=!0);if(!L){var N,t0,l0,i0;for(t.sfb_partition_table=E.nr_of_sfb_block[a][s],_=0;_<4;_++)t.slen[_]=u[r[_]];switch(N=t.slen[0],t0=t.slen[1],l0=t.slen[2],i0=t.slen[3],a){case 0:t.scalefac_compress=(N*5+t0<<4)+(l0<<2)+i0;break;case 1:t.scalefac_compress=400+(N*5+t0<<2)+l0;break;case 2:t.scalefac_compress=500+N*3+t0;break;default:or.err.printf(`intensity stereo not implemented yet
`);break}}if(!L)for(O1(t.sfb_partition_table!=null),t.part2_length=0,_=0;_<4;_++)t.part2_length+=t.slen[_]*t.sfb_partition_table[_];return L};var u=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(i){for(var t=2;t<=576;t+=2){for(var a=0,s;i.scalefac_band.l[++a]<t;);for(s=$[a][0];i.scalefac_band.l[s+1]>t;)s--;for(s<0&&(s=$[a][0]),i.bv_scf[t-2]=s,s=$[a][1];i.scalefac_band.l[s+i.bv_scf[t-2]+2]>t;)s--;s<0&&(s=$[a][1]),i.bv_scf[t-1]=s}}}var h2=ma,A1=C0,P1=A1.System;A1.VbrMode;A1.Float;A1.ShortBlock;A1.Util;var ur=A1.Arrays;A1.new_array_n;var fr=A1.new_byte;A1.new_double;A1.new_float;var mr=A1.new_float_n,br=A1.new_int;A1.new_int_n;var R0=A1.assert,$a=h2,la=ca,Xe=j0(),ue=Ue;qe.EQ=function(E,F){return Math.abs(E)>Math.abs(F)?Math.abs(E-F)<=Math.abs(E)*1e-6:Math.abs(E-F)<=Math.abs(F)*1e-6};qe.NEQ=function(E,F){return!qe.EQ(E,F)};function qe(){var E=this,F=32773,$=32,P=null,n0=null,K=null,z=null;this.setModules=function(u,i,t,a){P=u,n0=i,K=t,z=a};var D=null,Z=0,T=0,V=0;this.getframebits=function(u){var i=u.internal_flags,t;i.bitrate_index!=0?t=la.bitrate_table[u.version][i.bitrate_index]:t=u.brate,R0(8<=t&&t<=640);var a=0|(u.version+1)*72e3*t/u.out_samplerate+i.padding;return 8*a};function M(u){P1.arraycopy(u.header[u.w_ptr].buf,0,D,T,u.sideinfo_len),T+=u.sideinfo_len,Z+=u.sideinfo_len*8,u.w_ptr=u.w_ptr+1&ue.MAX_HEADER_BUF-1}function J(u,i,t){for(R0(t<$-2);t>0;){var a;V==0&&(V=8,T++,R0(T<Lame.LAME_MAXMP3BUFFER),R0(u.header[u.w_ptr].write_timing>=Z),u.header[u.w_ptr].write_timing==Z&&M(u),D[T]=0),a=Math.min(t,V),t-=a,V-=a,R0(t<$),R0(V<$),D[T]|=i>>t<<V,Z+=a}}function O(u,i,t){for(R0(t<$-2);t>0;){var a;V==0&&(V=8,T++,R0(T<Lame.LAME_MAXMP3BUFFER),D[T]=0),a=Math.min(t,V),t-=a,V-=a,R0(t<$),R0(V<$),D[T]|=i>>t<<V,Z+=a}}function Y(u,i){var t=u.internal_flags,a;if(R0(i>=0),i>=8&&(J(t,76,8),i-=8),i>=8&&(J(t,65,8),i-=8),i>=8&&(J(t,77,8),i-=8),i>=8&&(J(t,69,8),i-=8),i>=32){var s=K.getLameShortVersion();if(i>=32)for(a=0;a<s.length&&i>=8;++a)i-=8,J(t,s.charAt(a),8)}for(;i>=1;i-=1)J(t,t.ancillary_flag,1),t.ancillary_flag^=u.disable_reservoir?0:1;R0(i==0)}function q(u,i,t){for(var a=u.header[u.h_ptr].ptr;t>0;){var s=Math.min(t,8-(a&7));t-=s,R0(t<$),u.header[u.h_ptr].buf[a>>3]|=i>>t<<8-(a&7)-s,a+=s}u.header[u.h_ptr].ptr=a}function G(u,i){u<<=8;for(var t=0;t<8;t++)u<<=1,i<<=1,(i^u)&65536&&(i^=F);return i}this.CRC_writeheader=function(u,i){var t=65535;t=G(i[2]&255,t),t=G(i[3]&255,t);for(var a=6;a<u.sideinfo_len;a++)t=G(i[a]&255,t);i[4]=byte(t>>8),i[5]=byte(t&255)};function d(u,i){var t=u.internal_flags,a,s,_;if(a=t.l3_side,t.header[t.h_ptr].ptr=0,ur.fill(t.header[t.h_ptr].buf,0,t.sideinfo_len,0),u.out_samplerate<16e3?q(t,4094,12):q(t,4095,12),q(t,u.version,1),q(t,1,2),q(t,u.error_protection?0:1,1),q(t,t.bitrate_index,4),q(t,t.samplerate_index,2),q(t,t.padding,1),q(t,u.extension,1),q(t,u.mode.ordinal(),2),q(t,t.mode_ext,2),q(t,u.copyright,1),q(t,u.original,1),q(t,u.emphasis,2),u.error_protection&&q(t,0,16),u.version==1){for(R0(a.main_data_begin>=0),q(t,a.main_data_begin,9),t.channels_out==2?q(t,a.private_bits,3):q(t,a.private_bits,5),_=0;_<t.channels_out;_++){var v;for(v=0;v<4;v++)q(t,a.scfsi[_][v],1)}for(s=0;s<2;s++)for(_=0;_<t.channels_out;_++){var o=a.tt[s][_];q(t,o.part2_3_length+o.part2_length,12),q(t,o.big_values/2,9),q(t,o.global_gain,8),q(t,o.scalefac_compress,4),o.block_type!=Xe.NORM_TYPE?(q(t,1,1),q(t,o.block_type,2),q(t,o.mixed_block_flag,1),o.table_select[0]==14&&(o.table_select[0]=16),q(t,o.table_select[0],5),o.table_select[1]==14&&(o.table_select[1]=16),q(t,o.table_select[1],5),q(t,o.subblock_gain[0],3),q(t,o.subblock_gain[1],3),q(t,o.subblock_gain[2],3)):(q(t,0,1),o.table_select[0]==14&&(o.table_select[0]=16),q(t,o.table_select[0],5),o.table_select[1]==14&&(o.table_select[1]=16),q(t,o.table_select[1],5),o.table_select[2]==14&&(o.table_select[2]=16),q(t,o.table_select[2],5),R0(0<=o.region0_count&&o.region0_count<16),R0(0<=o.region1_count&&o.region1_count<8),q(t,o.region0_count,4),q(t,o.region1_count,3)),q(t,o.preflag,1),q(t,o.scalefac_scale,1),q(t,o.count1table_select,1)}}else for(R0(a.main_data_begin>=0),q(t,a.main_data_begin,8),q(t,a.private_bits,t.channels_out),s=0,_=0;_<t.channels_out;_++){var o=a.tt[s][_];q(t,o.part2_3_length+o.part2_length,12),q(t,o.big_values/2,9),q(t,o.global_gain,8),q(t,o.scalefac_compress,9),o.block_type!=Xe.NORM_TYPE?(q(t,1,1),q(t,o.block_type,2),q(t,o.mixed_block_flag,1),o.table_select[0]==14&&(o.table_select[0]=16),q(t,o.table_select[0],5),o.table_select[1]==14&&(o.table_select[1]=16),q(t,o.table_select[1],5),q(t,o.subblock_gain[0],3),q(t,o.subblock_gain[1],3),q(t,o.subblock_gain[2],3)):(q(t,0,1),o.table_select[0]==14&&(o.table_select[0]=16),q(t,o.table_select[0],5),o.table_select[1]==14&&(o.table_select[1]=16),q(t,o.table_select[1],5),o.table_select[2]==14&&(o.table_select[2]=16),q(t,o.table_select[2],5),R0(0<=o.region0_count&&o.region0_count<16),R0(0<=o.region1_count&&o.region1_count<8),q(t,o.region0_count,4),q(t,o.region1_count,3)),q(t,o.scalefac_scale,1),q(t,o.count1table_select,1)}u.error_protection&&CRC_writeheader(t,t.header[t.h_ptr].buf);{var L=t.h_ptr;R0(t.header[L].ptr==t.sideinfo_len*8),t.h_ptr=L+1&ue.MAX_HEADER_BUF-1,t.header[t.h_ptr].write_timing=t.header[L].write_timing+i,t.h_ptr==t.w_ptr&&P1.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function n(u,i){var t=la.ht[i.count1table_select+32],a,s=0,_=i.big_values,v=i.big_values;for(R0(i.count1table_select<2),a=(i.count1-i.big_values)/4;a>0;--a){var o=0,L=0,x;x=i.l3_enc[_+0],x!=0&&(L+=8,i.xr[v+0]<0&&o++,R0(x<=1)),x=i.l3_enc[_+1],x!=0&&(L+=4,o*=2,i.xr[v+1]<0&&o++,R0(x<=1)),x=i.l3_enc[_+2],x!=0&&(L+=2,o*=2,i.xr[v+2]<0&&o++,R0(x<=1)),x=i.l3_enc[_+3],x!=0&&(L++,o*=2,i.xr[v+3]<0&&o++,R0(x<=1)),_+=4,v+=4,J(u,o+t.table[L],t.hlen[L]),s+=t.hlen[L]}return s}function e(u,i,t,a,s){var _=la.ht[i],v=0;if(R0(i<32),i==0)return v;for(var o=t;o<a;o+=2){var L=0,x=0,y=_.xlen,r=_.xlen,l=0,I=s.l3_enc[o],N=s.l3_enc[o+1];if(I!=0&&(s.xr[o]<0&&l++,L--),i>15){if(I>14){var t0=I-15;R0(t0<=_.linmax),l|=t0<<1,x=y,I=15}if(N>14){var l0=N-15;R0(l0<=_.linmax),l<<=y,l|=l0,x+=y,N=15}r=16}N!=0&&(l<<=1,s.xr[o+1]<0&&l++,L--),R0((I|N)<16),I=I*r+N,x-=L,L+=_.hlen[I],R0(L<=$),R0(x<=$),J(u,_.table[I],L),J(u,l,x),v+=L+x}return v}function c(u,i){var t=3*u.scalefac_band.s[3];t>i.big_values&&(t=i.big_values);var a=e(u,i.table_select[0],0,t,i);return a+=e(u,i.table_select[1],t,i.big_values,i),a}function h(u,i){var t,a,s,_;t=i.big_values,R0(0<=t&&t<=576);var v=i.region0_count+1;return R0(0<=v),R0(v<u.scalefac_band.l.length),s=u.scalefac_band.l[v],v+=i.region1_count+1,R0(0<=v),R0(v<u.scalefac_band.l.length),_=u.scalefac_band.l[v],s>t&&(s=t),_>t&&(_=t),a=e(u,i.table_select[0],0,s,i),a+=e(u,i.table_select[1],s,_,i),a+=e(u,i.table_select[2],_,t,i),a}function A(u){var i,t,a,s,_=0,v=u.internal_flags,o=v.l3_side;if(u.version==1)for(i=0;i<2;i++)for(t=0;t<v.channels_out;t++){var L=o.tt[i][t],x=$a.slen1_tab[L.scalefac_compress],y=$a.slen2_tab[L.scalefac_compress];for(s=0,a=0;a<L.sfbdivide;a++)L.scalefac[a]!=-1&&(J(v,L.scalefac[a],x),s+=x);for(;a<L.sfbmax;a++)L.scalefac[a]!=-1&&(J(v,L.scalefac[a],y),s+=y);R0(s==L.part2_length),L.block_type==Xe.SHORT_TYPE?s+=c(v,L):s+=h(v,L),s+=n(v,L),R0(s==L.part2_3_length+L.part2_length),_+=s}else for(i=0,t=0;t<v.channels_out;t++){var L=o.tt[i][t],r,l,I=0;if(R0(L.sfb_partition_table!=null),s=0,a=0,l=0,L.block_type==Xe.SHORT_TYPE){for(;l<4;l++){var N=L.sfb_partition_table[l]/3,t0=L.slen[l];for(r=0;r<N;r++,a++)J(v,Math.max(L.scalefac[a*3+0],0),t0),J(v,Math.max(L.scalefac[a*3+1],0),t0),J(v,Math.max(L.scalefac[a*3+2],0),t0),I+=3*t0}s+=c(v,L)}else{for(;l<4;l++){var N=L.sfb_partition_table[l],t0=L.slen[l];for(r=0;r<N;r++,a++)J(v,Math.max(L.scalefac[a],0),t0),I+=t0}s+=h(v,L)}s+=n(v,L),R0(s==L.part2_3_length),R0(I==L.part2_length),_+=I+s}return _}function f(){this.total=0}function m(u,i){var t=u.internal_flags,a,s,_,v,o;return o=t.w_ptr,v=t.h_ptr-1,v==-1&&(v=ue.MAX_HEADER_BUF-1),a=t.header[v].write_timing-Z,i.total=a,a>=0&&(s=1+v-o,v<o&&(s=1+v-o+ue.MAX_HEADER_BUF),a-=s*8*t.sideinfo_len),_=E.getframebits(u),a+=_,i.total+=_,i.total%8!=0?i.total=1+i.total/8:i.total=i.total/8,i.total+=T+1,a<0&&P1.err.println(`strange error flushing buffer ... 
`),a}this.flush_bitstream=function(u){var i=u.internal_flags,t,a,s=i.h_ptr-1;if(s==-1&&(s=ue.MAX_HEADER_BUF-1),t=i.l3_side,!((a=m(u,new f))<0)){if(Y(u,a),R0(i.header[s].write_timing+this.getframebits(u)==Z),i.ResvSize=0,t.main_data_begin=0,i.findReplayGain){var _=P.GetTitleGain(i.rgdata);R0(NEQ(_,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),i.RadioGain=Math.floor(_*10+.5)|0}i.findPeakSample&&(i.noclipGainChange=Math.ceil(Math.log10(i.PeakSample/32767)*20*10)|0,i.noclipGainChange>0&&(EQ(u.scale,1)||EQ(u.scale,0))?i.noclipScale=Math.floor(32767/i.PeakSample*100)/100:i.noclipScale=-1)}},this.add_dummy_byte=function(u,i,t){for(var a=u.internal_flags,s;t-- >0;)for(O(a,i,8),s=0;s<ue.MAX_HEADER_BUF;++s)a.header[s].write_timing+=8},this.format_bitstream=function(u){var i=u.internal_flags,t;t=i.l3_side;var a=this.getframebits(u);Y(u,t.resvDrain_pre),d(u,a);var s=8*i.sideinfo_len;if(s+=A(u),Y(u,t.resvDrain_post),s+=t.resvDrain_post,t.main_data_begin+=(a-s)/8,m(u,new f)!=i.ResvSize&&P1.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),t.main_data_begin*8!=i.ResvSize&&(P1.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*t.main_data_begin,i.ResvSize,t.resvDrain_post,t.resvDrain_pre,8*i.sideinfo_len,s-t.resvDrain_post-8*i.sideinfo_len,s,s%8,a),P1.err.println("This is a fatal error.  It has several possible causes:"),P1.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),P1.err.println(" 9%%  Your system is overclocked"),P1.err.println(" 1%%  bug in LAME encoding library"),i.ResvSize=t.main_data_begin*8),R0(Z%8==0),Z>1e9){var _;for(_=0;_<ue.MAX_HEADER_BUF;++_)i.header[_].write_timing-=Z;Z=0}return 0},this.copy_buffer=function(u,i,t,a,s){var _=T+1;if(_<=0)return 0;if(a!=0&&_>a)return-1;if(P1.arraycopy(D,0,i,t,_),T=-1,V=0,s!=0){var v=br(1);if(v[0]=u.nMusicCRC,z.updateMusicCRC(v,i,t,_),u.nMusicCRC=v[0],_>0&&(u.VBR_seek_table.nBytesWritten+=_),u.decode_on_the_fly){for(var o=mr([2,1152]),L=_,x=-1,y;x!=0;)if(x=n0.hip_decode1_unclipped(u.hip,i,t,L,o[0],o[1]),L=0,x==-1&&(x=0),x>0){if(R0(x<=1152),u.findPeakSample){for(y=0;y<x;y++)o[0][y]>u.PeakSample?u.PeakSample=o[0][y]:-o[0][y]>u.PeakSample&&(u.PeakSample=-o[0][y]);if(u.channels_out>1)for(y=0;y<x;y++)o[1][y]>u.PeakSample?u.PeakSample=o[1][y]:-o[1][y]>u.PeakSample&&(u.PeakSample=-o[1][y])}if(u.findReplayGain&&P.AnalyzeSamples(u.rgdata,o[0],0,o[1],0,x,u.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return _},this.init_bit_stream_w=function(u){D=fr(Lame.LAME_MAXMP3BUFFER),u.h_ptr=u.w_ptr=0,u.header[u.h_ptr].write_timing=0,T=-1,V=0,Z=0}}var u2=qe,g0=C0,cr=g0.System,L0=g0.VbrMode;g0.Float;var oa=g0.ShortBlock;g0.Util;g0.Arrays;g0.new_array_n;g0.new_byte;g0.new_double;var fe=g0.new_float;g0.new_float_n;g0.new_int;var qa=g0.new_int_n,dr=g0.new_short_n,L1=g0.assert,va=w2,Sr=L2,ye=Ue,Ar=z2,Mr=g2,Rr=_r,me=u2,U1=ca,G0=j0();function U0(){var E=this,F=128*1024;U0.V9=410,U0.V8=420,U0.V7=430,U0.V6=440,U0.V5=450,U0.V4=460,U0.V3=470,U0.V2=480,U0.V1=490,U0.V0=500,U0.R3MIX=1e3,U0.STANDARD=1001,U0.EXTREME=1002,U0.INSANE=1003,U0.STANDARD_FAST=1004,U0.EXTREME_FAST=1005,U0.MEDIUM=1006,U0.MEDIUM_FAST=1007;var $=16384+F;U0.LAME_MAXMP3BUFFER=$;var P,n0,K,z,D,Z=new va,T,V,M;this.enc=new G0,this.setModules=function(r,l,I,N,t0,l0,i0,_0,S0){P=r,n0=l,K=I,z=N,D=t0,T=l0,V=_0,M=S0,this.enc.setModules(n0,Z,z,T)};function J(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=fe(G0.SBMAX_l),this.bo_s_weight=fe(G0.SBMAX_s)}function O(){this.lowerlimit=0}function Y(r,l){this.lowpass=l}var q=4294479419;function G(r){var l;return r.class_id=q,l=r.internal_flags=new ye,r.mode=MPEGMode.NOT_SET,r.original=1,r.in_samplerate=44100,r.num_channels=2,r.num_samples=-1,r.bWriteVbrTag=!0,r.quality=-1,r.short_blocks=null,l.subblock_gain=-1,r.lowpassfreq=0,r.highpassfreq=0,r.lowpasswidth=-1,r.highpasswidth=-1,r.VBR=L0.vbr_off,r.VBR_q=4,r.ATHcurve=-1,r.VBR_mean_bitrate_kbps=128,r.VBR_min_bitrate_kbps=0,r.VBR_max_bitrate_kbps=0,r.VBR_hard_min=0,l.VBR_min_bitrate=1,l.VBR_max_bitrate=13,r.quant_comp=-1,r.quant_comp_short=-1,r.msfix=-1,l.resample_ratio=1,l.OldValue[0]=180,l.OldValue[1]=180,l.CurrentStep[0]=4,l.CurrentStep[1]=4,l.masking_lower=1,l.nsPsy.attackthre=-1,l.nsPsy.attackthre_s=-1,r.scale=-1,r.athaa_type=-1,r.ATHtype=-1,r.athaa_loudapprox=-1,r.athaa_sensitivity=0,r.useTemporal=null,r.interChRatio=-1,l.mf_samples_to_encode=G0.ENCDELAY+G0.POSTDELAY,r.encoder_padding=0,l.mf_size=G0.ENCDELAY-G0.MDCTDELAY,r.findReplayGain=!1,r.decode_on_the_fly=!1,l.decode_on_the_fly=!1,l.findReplayGain=!1,l.findPeakSample=!1,l.RadioGain=0,l.AudiophileGain=0,l.noclipGainChange=0,l.noclipScale=-1,r.preset=0,r.write_id3tag_automatic=!0,0}this.lame_init=function(){var r=new Sr;return G(r),r.lame_allocated_gfp=1,r};function d(r){return r>1?0:r<=0?1:Math.cos(Math.PI/2*r)}this.nearestBitrateFullIndex=function(r){var l=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],I=0,N=0,t0=0,l0=0;l0=l[16],t0=16,N=l[16],I=16;for(var i0=0;i0<16;i0++)if(Math.max(r,l[i0+1])!=r){l0=l[i0+1],t0=i0+1,N=l[i0],I=i0;break}return l0-r>r-N?I:t0};function n(r,l){var I=44100;return l>=48e3?I=48e3:l>=44100?I=44100:l>=32e3?I=32e3:l>=24e3?I=24e3:l>=22050?I=22050:l>=16e3?I=16e3:l>=12e3?I=12e3:l>=11025?I=11025:l>=8e3&&(I=8e3),r==-1?I:(r<=15960&&(I=44100),r<=15250&&(I=32e3),r<=11220&&(I=24e3),r<=9970&&(I=22050),r<=7230&&(I=16e3),r<=5420&&(I=12e3),r<=4510&&(I=11025),r<=3970&&(I=8e3),l<I?l>44100?48e3:l>32e3?44100:l>24e3?32e3:l>22050?24e3:l>16e3?22050:l>12e3?16e3:l>11025?12e3:l>8e3?11025:8e3:I)}function e(r,l){switch(r){case 44100:return l.version=1,0;case 48e3:return l.version=1,1;case 32e3:return l.version=1,2;case 22050:return l.version=0,0;case 24e3:return l.version=0,1;case 16e3:return l.version=0,2;case 11025:return l.version=0,0;case 12e3:return l.version=0,1;case 8e3:return l.version=0,2;default:return l.version=0,-1}}function c(r,l,I){I<16e3&&(l=2);for(var N=U1.bitrate_table[l][1],t0=2;t0<=14;t0++)U1.bitrate_table[l][t0]>0&&Math.abs(U1.bitrate_table[l][t0]-r)<Math.abs(N-r)&&(N=U1.bitrate_table[l][t0]);return N}function h(r,l,I){I<16e3&&(l=2);for(var N=0;N<=14;N++)if(U1.bitrate_table[l][N]>0&&U1.bitrate_table[l][N]==r)return N;return-1}function A(r,l){var I=[new Y(8,2e3),new Y(16,3700),new Y(24,3900),new Y(32,5500),new Y(40,7e3),new Y(48,7500),new Y(56,1e4),new Y(64,11e3),new Y(80,13500),new Y(96,15100),new Y(112,15600),new Y(128,17e3),new Y(160,17500),new Y(192,18600),new Y(224,19400),new Y(256,19700),new Y(320,20500)],N=E.nearestBitrateFullIndex(l);r.lowerlimit=I[N].lowpass}function f(r){var l=r.internal_flags,I=32,N=-1;if(l.lowpass1>0){for(var t0=999,l0=0;l0<=31;l0++){var i0=l0/31;i0>=l.lowpass2&&(I=Math.min(I,l0)),l.lowpass1<i0&&i0<l.lowpass2&&(t0=Math.min(t0,l0))}t0==999?l.lowpass1=(I-.75)/31:l.lowpass1=(t0-.75)/31,l.lowpass2=I/31}if(l.highpass2>0&&l.highpass2<.9*(.75/31)&&(l.highpass1=0,l.highpass2=0,cr.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),l.highpass2>0){for(var _0=-1,l0=0;l0<=31;l0++){var i0=l0/31;i0<=l.highpass1&&(N=Math.max(N,l0)),l.highpass1<i0&&i0<l.highpass2&&(_0=Math.max(_0,l0))}l.highpass1=N/31,_0==-1?l.highpass2=(N+.75)/31:l.highpass2=(_0+.75)/31}for(var l0=0;l0<32;l0++){var S0,h0,i0=l0/31;l.highpass2>l.highpass1?S0=d((l.highpass2-i0)/(l.highpass2-l.highpass1+1e-20)):S0=1,l.lowpass2>l.lowpass1?h0=d((i0-l.lowpass1)/(l.lowpass2-l.lowpass1+1e-20)):h0=1,l.amp_filter[l0]=S0*h0}}function m(r){var l=r.internal_flags;switch(r.quality){default:case 9:l.psymodel=0,l.noise_shaping=0,l.noise_shaping_amp=0,l.noise_shaping_stop=0,l.use_best_huffman=0,l.full_outer_loop=0;break;case 8:r.quality=7;case 7:l.psymodel=1,l.noise_shaping=0,l.noise_shaping_amp=0,l.noise_shaping_stop=0,l.use_best_huffman=0,l.full_outer_loop=0;break;case 6:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.noise_shaping_amp=0,l.noise_shaping_stop=0,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=0,l.full_outer_loop=0;break;case 5:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.noise_shaping_amp=0,l.noise_shaping_stop=0,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=0,l.full_outer_loop=0;break;case 4:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.noise_shaping_amp=0,l.noise_shaping_stop=0,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=1,l.full_outer_loop=0;break;case 3:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.noise_shaping_amp=1,l.noise_shaping_stop=1,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=1,l.full_outer_loop=0;break;case 2:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.substep_shaping==0&&(l.substep_shaping=2),l.noise_shaping_amp=1,l.noise_shaping_stop=1,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=1,l.full_outer_loop=0;break;case 1:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.substep_shaping==0&&(l.substep_shaping=2),l.noise_shaping_amp=2,l.noise_shaping_stop=1,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=1,l.full_outer_loop=0;break;case 0:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.substep_shaping==0&&(l.substep_shaping=2),l.noise_shaping_amp=2,l.noise_shaping_stop=1,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=1,l.full_outer_loop=0;break}}function u(r){var l=r.internal_flags;r.frameNum=0,r.write_id3tag_automatic&&V.id3tag_write_v2(r),l.bitrate_stereoMode_Hist=qa([16,5]),l.bitrate_blockType_Hist=qa([16,6]),l.PeakSample=0,r.bWriteVbrTag&&T.InitVbrTag(r)}this.lame_init_params=function(r){var l=r.internal_flags;if(l.Class_ID=0,l.ATH==null&&(l.ATH=new Ar),l.PSY==null&&(l.PSY=new J),l.rgdata==null&&(l.rgdata=new Mr),l.channels_in=r.num_channels,l.channels_in==1&&(r.mode=MPEGMode.MONO),l.channels_out=r.mode==MPEGMode.MONO?1:2,l.mode_ext=G0.MPG_MD_MS_LR,r.mode==MPEGMode.MONO&&(r.force_ms=!1),r.VBR==L0.vbr_off&&r.VBR_mean_bitrate_kbps!=128&&r.brate==0&&(r.brate=r.VBR_mean_bitrate_kbps),r.VBR==L0.vbr_off||r.VBR==L0.vbr_mtrh||r.VBR==L0.vbr_mt||(r.free_format=!1),r.VBR==L0.vbr_off&&r.brate==0&&me.EQ(r.compression_ratio,0)&&(r.compression_ratio=11.025),r.VBR==L0.vbr_off&&r.compression_ratio>0&&(r.out_samplerate==0&&(r.out_samplerate=map2MP3Frequency(int(.97*r.in_samplerate))),r.brate=0|r.out_samplerate*16*l.channels_out/(1e3*r.compression_ratio),l.samplerate_index=e(r.out_samplerate,r),r.free_format||(r.brate=c(r.brate,r.version,r.out_samplerate))),r.out_samplerate!=0&&(r.out_samplerate<16e3?(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,8),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,64)):r.out_samplerate<32e3?(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,8),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,160)):(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,32),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,320))),r.lowpassfreq==0){var I=16e3;switch(r.VBR){case L0.vbr_off:{var N=new O;A(N,r.brate),I=N.lowerlimit;break}case L0.vbr_abr:{var N=new O;A(N,r.VBR_mean_bitrate_kbps),I=N.lowerlimit;break}case L0.vbr_rh:{var t0=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=r.VBR_q&&r.VBR_q<=9){var l0=t0[r.VBR_q],i0=t0[r.VBR_q+1],_0=r.VBR_q_frac;I=linear_int(l0,i0,_0)}else I=19500;break}default:{var t0=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=r.VBR_q&&r.VBR_q<=9){var l0=t0[r.VBR_q],i0=t0[r.VBR_q+1],_0=r.VBR_q_frac;I=linear_int(l0,i0,_0)}else I=19500}}r.mode==MPEGMode.MONO&&(r.VBR==L0.vbr_off||r.VBR==L0.vbr_abr)&&(I*=1.5),r.lowpassfreq=I|0}if(r.out_samplerate==0&&(2*r.lowpassfreq>r.in_samplerate&&(r.lowpassfreq=r.in_samplerate/2),r.out_samplerate=n(r.lowpassfreq|0,r.in_samplerate)),r.lowpassfreq=Math.min(20500,r.lowpassfreq),r.lowpassfreq=Math.min(r.out_samplerate/2,r.lowpassfreq),r.VBR==L0.vbr_off&&(r.compression_ratio=r.out_samplerate*16*l.channels_out/(1e3*r.brate)),r.VBR==L0.vbr_abr&&(r.compression_ratio=r.out_samplerate*16*l.channels_out/(1e3*r.VBR_mean_bitrate_kbps)),r.bWriteVbrTag||(r.findReplayGain=!1,r.decode_on_the_fly=!1,l.findPeakSample=!1),l.findReplayGain=r.findReplayGain,l.decode_on_the_fly=r.decode_on_the_fly,l.decode_on_the_fly&&(l.findPeakSample=!0),l.findReplayGain&&P.InitGainAnalysis(l.rgdata,r.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return r.internal_flags=null,-6;switch(l.decode_on_the_fly&&!r.decode_only&&(l.hip!=null&&M.hip_decode_exit(l.hip),l.hip=M.hip_decode_init()),l.mode_gr=r.out_samplerate<=24e3?1:2,r.framesize=576*l.mode_gr,r.encoder_delay=G0.ENCDELAY,l.resample_ratio=r.in_samplerate/r.out_samplerate,r.VBR){case L0.vbr_mt:case L0.vbr_rh:case L0.vbr_mtrh:{var S0=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];r.compression_ratio=S0[r.VBR_q]}break;case L0.vbr_abr:r.compression_ratio=r.out_samplerate*16*l.channels_out/(1e3*r.VBR_mean_bitrate_kbps);break;default:r.compression_ratio=r.out_samplerate*16*l.channels_out/(1e3*r.brate);break}if(r.mode==MPEGMode.NOT_SET&&(r.mode=MPEGMode.JOINT_STEREO),r.highpassfreq>0?(l.highpass1=2*r.highpassfreq,r.highpasswidth>=0?l.highpass2=2*(r.highpassfreq+r.highpasswidth):l.highpass2=1*2*r.highpassfreq,l.highpass1/=r.out_samplerate,l.highpass2/=r.out_samplerate):(l.highpass1=0,l.highpass2=0),r.lowpassfreq>0?(l.lowpass2=2*r.lowpassfreq,r.lowpasswidth>=0?(l.lowpass1=2*(r.lowpassfreq-r.lowpasswidth),l.lowpass1<0&&(l.lowpass1=0)):l.lowpass1=1*2*r.lowpassfreq,l.lowpass1/=r.out_samplerate,l.lowpass2/=r.out_samplerate):(l.lowpass1=0,l.lowpass2=0),f(r),l.samplerate_index=e(r.out_samplerate,r),l.samplerate_index<0)return r.internal_flags=null,-1;if(r.VBR==L0.vbr_off){if(r.free_format)l.bitrate_index=0;else if(r.brate=c(r.brate,r.version,r.out_samplerate),l.bitrate_index=h(r.brate,r.version,r.out_samplerate),l.bitrate_index<=0)return r.internal_flags=null,-1}else l.bitrate_index=1;r.analysis&&(r.bWriteVbrTag=!1),l.pinfo!=null&&(r.bWriteVbrTag=!1),n0.init_bit_stream_w(l);for(var h0=l.samplerate_index+3*r.version+6*(r.out_samplerate<16e3?1:0),s0=0;s0<G0.SBMAX_l+1;s0++)l.scalefac_band.l[s0]=z.sfBandIndex[h0].l[s0];for(var s0=0;s0<G0.PSFB21+1;s0++){var B0=(l.scalefac_band.l[22]-l.scalefac_band.l[21])/G0.PSFB21,F0=l.scalefac_band.l[21]+s0*B0;l.scalefac_band.psfb21[s0]=F0}l.scalefac_band.psfb21[G0.PSFB21]=576;for(var s0=0;s0<G0.SBMAX_s+1;s0++)l.scalefac_band.s[s0]=z.sfBandIndex[h0].s[s0];for(var s0=0;s0<G0.PSFB12+1;s0++){var B0=(l.scalefac_band.s[13]-l.scalefac_band.s[12])/G0.PSFB12,F0=l.scalefac_band.s[12]+s0*B0;l.scalefac_band.psfb12[s0]=F0}l.scalefac_band.psfb12[G0.PSFB12]=192,r.version==1?l.sideinfo_len=l.channels_out==1?21:36:l.sideinfo_len=l.channels_out==1?13:21,r.error_protection&&(l.sideinfo_len+=2),u(r),l.Class_ID=q;{var A0;for(A0=0;A0<19;A0++)l.nsPsy.pefirbuf[A0]=700*l.mode_gr*l.channels_out;r.ATHtype==-1&&(r.ATHtype=4)}switch(L1(r.VBR_q<=9),L1(r.VBR_q>=0),r.VBR){case L0.vbr_mt:r.VBR=L0.vbr_mtrh;case L0.vbr_mtrh:{r.useTemporal==null&&(r.useTemporal=!1),K.apply_preset(r,500-r.VBR_q*10,0),r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),r.quality<5&&(r.quality=0),r.quality>5&&(r.quality=5),l.PSY.mask_adjust=r.maskingadjust,l.PSY.mask_adjust_short=r.maskingadjust_short,r.experimentalY?l.sfb21_extra=!1:l.sfb21_extra=r.out_samplerate>44e3,l.iteration_loop=new VBRNewIterationLoop(D);break}case L0.vbr_rh:{K.apply_preset(r,500-r.VBR_q*10,0),l.PSY.mask_adjust=r.maskingadjust,l.PSY.mask_adjust_short=r.maskingadjust_short,r.experimentalY?l.sfb21_extra=!1:l.sfb21_extra=r.out_samplerate>44e3,r.quality>6&&(r.quality=6),r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),l.iteration_loop=new VBROldIterationLoop(D);break}default:{var w0;l.sfb21_extra=!1,r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),w0=r.VBR,w0==L0.vbr_off&&(r.VBR_mean_bitrate_kbps=r.brate),K.apply_preset(r,r.VBR_mean_bitrate_kbps,0),r.VBR=w0,l.PSY.mask_adjust=r.maskingadjust,l.PSY.mask_adjust_short=r.maskingadjust_short,w0==L0.vbr_off?l.iteration_loop=new Rr(D):l.iteration_loop=new ABRIterationLoop(D);break}}if(L1(r.scale>=0),r.VBR!=L0.vbr_off){if(l.VBR_min_bitrate=1,l.VBR_max_bitrate=14,r.out_samplerate<16e3&&(l.VBR_max_bitrate=8),r.VBR_min_bitrate_kbps!=0&&(r.VBR_min_bitrate_kbps=c(r.VBR_min_bitrate_kbps,r.version,r.out_samplerate),l.VBR_min_bitrate=h(r.VBR_min_bitrate_kbps,r.version,r.out_samplerate),l.VBR_min_bitrate<0)||r.VBR_max_bitrate_kbps!=0&&(r.VBR_max_bitrate_kbps=c(r.VBR_max_bitrate_kbps,r.version,r.out_samplerate),l.VBR_max_bitrate=h(r.VBR_max_bitrate_kbps,r.version,r.out_samplerate),l.VBR_max_bitrate<0))return-1;r.VBR_min_bitrate_kbps=U1.bitrate_table[r.version][l.VBR_min_bitrate],r.VBR_max_bitrate_kbps=U1.bitrate_table[r.version][l.VBR_max_bitrate],r.VBR_mean_bitrate_kbps=Math.min(U1.bitrate_table[r.version][l.VBR_max_bitrate],r.VBR_mean_bitrate_kbps),r.VBR_mean_bitrate_kbps=Math.max(U1.bitrate_table[r.version][l.VBR_min_bitrate],r.VBR_mean_bitrate_kbps)}return r.tune&&(l.PSY.mask_adjust+=r.tune_value_a,l.PSY.mask_adjust_short+=r.tune_value_a),m(r),L1(r.scale>=0),r.athaa_type<0?l.ATH.useAdjust=3:l.ATH.useAdjust=r.athaa_type,l.ATH.aaSensitivityP=Math.pow(10,r.athaa_sensitivity/-10),r.short_blocks==null&&(r.short_blocks=oa.short_block_allowed),r.short_blocks==oa.short_block_allowed&&(r.mode==MPEGMode.JOINT_STEREO||r.mode==MPEGMode.STEREO)&&(r.short_blocks=oa.short_block_coupled),r.quant_comp<0&&(r.quant_comp=1),r.quant_comp_short<0&&(r.quant_comp_short=0),r.msfix<0&&(r.msfix=0),r.exp_nspsytune=r.exp_nspsytune|1,r.internal_flags.nsPsy.attackthre<0&&(r.internal_flags.nsPsy.attackthre=va.NSATTACKTHRE),r.internal_flags.nsPsy.attackthre_s<0&&(r.internal_flags.nsPsy.attackthre_s=va.NSATTACKTHRE_S),L1(r.scale>=0),r.scale<0&&(r.scale=1),r.ATHtype<0&&(r.ATHtype=4),r.ATHcurve<0&&(r.ATHcurve=4),r.athaa_loudapprox<0&&(r.athaa_loudapprox=2),r.interChRatio<0&&(r.interChRatio=0),r.useTemporal==null&&(r.useTemporal=!0),l.slot_lag=l.frac_SpF=0,r.VBR==L0.vbr_off&&(l.slot_lag=l.frac_SpF=(r.version+1)*72e3*r.brate%r.out_samplerate|0),z.iteration_init(r),Z.psymodel_init(r),L1(r.scale>=0),0};function i(r,l){(r.in_buffer_0==null||r.in_buffer_nsamples<l)&&(r.in_buffer_0=fe(l),r.in_buffer_1=fe(l),r.in_buffer_nsamples=l)}this.lame_encode_flush=function(r,l,I,N){var t0=r.internal_flags,l0=dr([2,1152]),i0=0,_0,S0,h0,s0,B0=t0.mf_samples_to_encode-G0.POSTDELAY,F0=t(r);if(t0.mf_samples_to_encode<1)return 0;for(_0=0,r.in_samplerate!=r.out_samplerate&&(B0+=16*r.out_samplerate/r.in_samplerate),h0=r.framesize-B0%r.framesize,h0<576&&(h0+=r.framesize),r.encoder_padding=h0,s0=(B0+h0)/r.framesize;s0>0&&i0>=0;){var A0=F0-t0.mf_size,w0=r.frameNum;A0*=r.in_samplerate,A0/=r.out_samplerate,A0>1152&&(A0=1152),A0<1&&(A0=1),S0=N-_0,N==0&&(S0=0),i0=this.lame_encode_buffer(r,l0[0],l0[1],A0,l,I,S0),I+=i0,_0+=i0,s0-=w0!=r.frameNum?1:0}if(t0.mf_samples_to_encode=0,i0<0||(S0=N-_0,N==0&&(S0=0),n0.flush_bitstream(r),i0=n0.copy_buffer(t0,l,I,S0,1),i0<0))return i0;if(I+=i0,_0+=i0,S0=N-_0,N==0&&(S0=0),r.write_id3tag_automatic){if(V.id3tag_write_v1(r),i0=n0.copy_buffer(t0,l,I,S0,0),i0<0)return i0;_0+=i0}return _0},this.lame_encode_buffer=function(r,l,I,N,t0,l0,i0){var _0=r.internal_flags,S0=[null,null];if(_0.Class_ID!=q)return-3;if(N==0)return 0;i(_0,N),S0[0]=_0.in_buffer_0,S0[1]=_0.in_buffer_1;for(var h0=0;h0<N;h0++)S0[0][h0]=l[h0],_0.channels_in>1&&(S0[1][h0]=I[h0]);return a(r,S0[0],S0[1],N,t0,l0,i0)};function t(r){var l=G0.BLKSIZE+r.framesize-G0.FFTOFFSET;return l=Math.max(l,512+r.framesize-32),L1(ye.MFSIZE>=l),l}function a(r,l,I,N,t0,l0,i0){var _0=r.internal_flags,S0=0,h0,s0,B0,F0,A0,w0=[null,null],T0=[null,null];if(_0.Class_ID!=q)return-3;if(N==0)return 0;if(A0=n0.copy_buffer(_0,t0,l0,i0,0),A0<0)return A0;if(l0+=A0,S0+=A0,T0[0]=l,T0[1]=I,me.NEQ(r.scale,0)&&me.NEQ(r.scale,1))for(s0=0;s0<N;++s0)T0[0][s0]*=r.scale,_0.channels_out==2&&(T0[1][s0]*=r.scale);if(me.NEQ(r.scale_left,0)&&me.NEQ(r.scale_left,1))for(s0=0;s0<N;++s0)T0[0][s0]*=r.scale_left;if(me.NEQ(r.scale_right,0)&&me.NEQ(r.scale_right,1))for(s0=0;s0<N;++s0)T0[1][s0]*=r.scale_right;if(r.num_channels==2&&_0.channels_out==1)for(s0=0;s0<N;++s0)T0[0][s0]=.5*(T0[0][s0]+T0[1][s0]),T0[1][s0]=0;F0=t(r),w0[0]=_0.mfbuf[0],w0[1]=_0.mfbuf[1];for(var Y0=0;N>0;){var Z0=[null,null],q1=0,B1=0;Z0[0]=T0[0],Z0[1]=T0[1];var e1=new _;if(y(r,w0,Z0,Y0,N,e1),q1=e1.n_in,B1=e1.n_out,_0.findReplayGain&&!_0.decode_on_the_fly&&P.AnalyzeSamples(_0.rgdata,w0[0],_0.mf_size,w0[1],_0.mf_size,B1,_0.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(N-=q1,Y0+=q1,_0.channels_out==2,_0.mf_size+=B1,L1(_0.mf_size<=ye.MFSIZE),_0.mf_samples_to_encode<1&&(_0.mf_samples_to_encode=G0.ENCDELAY+G0.POSTDELAY),_0.mf_samples_to_encode+=B1,_0.mf_size>=F0){var F1=i0-S0;if(i0==0&&(F1=0),h0=s(r,w0[0],w0[1],t0,l0,F1),h0<0)return h0;for(l0+=h0,S0+=h0,_0.mf_size-=r.framesize,_0.mf_samples_to_encode-=r.framesize,B0=0;B0<_0.channels_out;B0++)for(s0=0;s0<_0.mf_size;s0++)w0[B0][s0]=w0[B0][s0+r.framesize]}}return L1(N==0),S0}function s(r,l,I,N,t0,l0){var i0=E.enc.lame_encode_mp3_frame(r,l,I,N,t0,l0);return r.frameNum++,i0}function _(){this.n_in=0,this.n_out=0}function v(){this.num_used=0}function o(r,l){return l!=0?o(l,r%l):r}function L(r,l,I){var N=Math.PI*l;r/=I,r<0&&(r=0),r>1&&(r=1);var t0=r-.5,l0=.42-.5*Math.cos(2*r*Math.PI)+.08*Math.cos(4*r*Math.PI);return Math.abs(t0)<1e-9?N/Math.PI:l0*Math.sin(I*N*t0)/(Math.PI*I*t0)}function x(r,l,I,N,t0,l0,i0,_0,S0){var h0=r.internal_flags,s0,B0=0,F0,A0=r.out_samplerate/o(r.out_samplerate,r.in_samplerate);A0>ye.BPC&&(A0=ye.BPC);var w0=Math.abs(h0.resample_ratio-Math.floor(.5+h0.resample_ratio))<1e-4?1:0,T0=1/h0.resample_ratio;T0>1&&(T0=1);var Y0=31;Y0%2==0&&--Y0,Y0+=w0;var Z0=Y0+1;if(h0.fill_buffer_resample_init==0){for(h0.inbuf_old[0]=fe(Z0),h0.inbuf_old[1]=fe(Z0),s0=0;s0<=2*A0;++s0)h0.blackfilt[s0]=fe(Z0);for(h0.itime[0]=0,h0.itime[1]=0,B0=0;B0<=2*A0;B0++){var q1=0,B1=(B0-A0)/(2*A0);for(s0=0;s0<=Y0;s0++)q1+=h0.blackfilt[B0][s0]=L(s0-B1,T0,Y0);for(s0=0;s0<=Y0;s0++)h0.blackfilt[B0][s0]/=q1}h0.fill_buffer_resample_init=1}var e1=h0.inbuf_old[S0];for(F0=0;F0<N;F0++){var F1,ee;if(F1=F0*h0.resample_ratio,B0=0|Math.floor(F1-h0.itime[S0]),Y0+B0-Y0/2>=i0)break;var B1=F1-h0.itime[S0]-(B0+.5*(Y0%2));L1(Math.abs(B1)<=.501),ee=0|Math.floor(B1*2*A0+A0+.5);var J1=0;for(s0=0;s0<=Y0;++s0){var z0=0|s0+B0-Y0/2,ae;L1(z0<i0),L1(z0+Z0>=0),ae=z0<0?e1[Z0+z0]:t0[l0+z0],J1+=ae*h0.blackfilt[ee][s0]}l[I+F0]=J1}if(_0.num_used=Math.min(i0,Y0+B0-Y0/2),h0.itime[S0]+=_0.num_used-F0*h0.resample_ratio,_0.num_used>=Z0)for(s0=0;s0<Z0;s0++)e1[s0]=t0[l0+_0.num_used+s0-Z0];else{var K1=Z0-_0.num_used;for(s0=0;s0<K1;++s0)e1[s0]=e1[s0+_0.num_used];for(B0=0;s0<Z0;++s0,++B0)e1[s0]=t0[l0+B0];L1(B0==_0.num_used)}return F0}function y(r,l,I,N,t0,l0){var i0=r.internal_flags;if(i0.resample_ratio<.9999||i0.resample_ratio>1.0001)for(var _0=0;_0<i0.channels_out;_0++){var S0=new v;l0.n_out=x(r,l[_0],i0.mf_size,r.framesize,I[_0],N,t0,S0,_0),l0.n_in=S0.num_used}else{l0.n_out=Math.min(r.framesize,t0),l0.n_in=l0.n_out;for(var h0=0;h0<l0.n_out;++h0)l[0][i0.mf_size+h0]=I[0][N+h0],i0.channels_out==2&&(l[1][i0.mf_size+h0]=I[1][N+h0])}}}var xr=U0,M1=C0;M1.System;var Z1=M1.VbrMode;M1.Float;M1.ShortBlock;M1.Util;M1.Arrays;M1.new_array_n;M1.new_byte;M1.new_double;M1.new_float;M1.new_float_n;M1.new_int;M1.new_int_n;M1.assert;function Er(){function E(T,V,M,J,O,Y,q,G,d,n,e,c,h,A,f){this.vbr_q=T,this.quant_comp=V,this.quant_comp_s=M,this.expY=J,this.st_lrm=O,this.st_s=Y,this.masking_adj=q,this.masking_adj_short=G,this.ath_lower=d,this.ath_curve=n,this.ath_sensitivity=e,this.interch=c,this.safejoint=h,this.sfb21mod=A,this.msfix=f}function F(T,V,M,J,O,Y,q,G,d,n,e,c,h,A){this.quant_comp=V,this.quant_comp_s=M,this.safejoint=J,this.nsmsfix=O,this.st_lrm=Y,this.st_s=q,this.nsbass=G,this.scale=d,this.masking_adj=n,this.ath_lower=e,this.ath_curve=c,this.interch=h,this.sfscale=A}var $;this.setModules=function(T){$=T};var P=[new E(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new E(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new E(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new E(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new E(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new E(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new E(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new E(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new E(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new E(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new E(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],n0=[new E(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new E(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new E(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new E(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new E(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new E(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new E(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new E(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new E(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new E(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new E(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function K(T,V,M){var J=T.VBR==Z1.vbr_rh?P:n0,O=T.VBR_q_frac,Y=J[V],q=J[V+1],G=Y;Y.st_lrm=Y.st_lrm+O*(q.st_lrm-Y.st_lrm),Y.st_s=Y.st_s+O*(q.st_s-Y.st_s),Y.masking_adj=Y.masking_adj+O*(q.masking_adj-Y.masking_adj),Y.masking_adj_short=Y.masking_adj_short+O*(q.masking_adj_short-Y.masking_adj_short),Y.ath_lower=Y.ath_lower+O*(q.ath_lower-Y.ath_lower),Y.ath_curve=Y.ath_curve+O*(q.ath_curve-Y.ath_curve),Y.ath_sensitivity=Y.ath_sensitivity+O*(q.ath_sensitivity-Y.ath_sensitivity),Y.interch=Y.interch+O*(q.interch-Y.interch),Y.msfix=Y.msfix+O*(q.msfix-Y.msfix),Z(T,G.vbr_q),M!=0?T.quant_comp=G.quant_comp:Math.abs(T.quant_comp- -1)>0||(T.quant_comp=G.quant_comp),M!=0?T.quant_comp_short=G.quant_comp_s:Math.abs(T.quant_comp_short- -1)>0||(T.quant_comp_short=G.quant_comp_s),G.expY!=0&&(T.experimentalY=G.expY!=0),M!=0?T.internal_flags.nsPsy.attackthre=G.st_lrm:Math.abs(T.internal_flags.nsPsy.attackthre- -1)>0||(T.internal_flags.nsPsy.attackthre=G.st_lrm),M!=0?T.internal_flags.nsPsy.attackthre_s=G.st_s:Math.abs(T.internal_flags.nsPsy.attackthre_s- -1)>0||(T.internal_flags.nsPsy.attackthre_s=G.st_s),M!=0?T.maskingadjust=G.masking_adj:Math.abs(T.maskingadjust-0)>0||(T.maskingadjust=G.masking_adj),M!=0?T.maskingadjust_short=G.masking_adj_short:Math.abs(T.maskingadjust_short-0)>0||(T.maskingadjust_short=G.masking_adj_short),M!=0?T.ATHlower=-G.ath_lower/10:Math.abs(-T.ATHlower*10-0)>0||(T.ATHlower=-G.ath_lower/10),M!=0?T.ATHcurve=G.ath_curve:Math.abs(T.ATHcurve- -1)>0||(T.ATHcurve=G.ath_curve),M!=0?T.athaa_sensitivity=G.ath_sensitivity:Math.abs(T.athaa_sensitivity- -1)>0||(T.athaa_sensitivity=G.ath_sensitivity),G.interch>0&&(M!=0?T.interChRatio=G.interch:Math.abs(T.interChRatio- -1)>0||(T.interChRatio=G.interch)),G.safejoint>0&&(T.exp_nspsytune=T.exp_nspsytune|G.safejoint),G.sfb21mod>0&&(T.exp_nspsytune=T.exp_nspsytune|G.sfb21mod<<20),M!=0?T.msfix=G.msfix:Math.abs(T.msfix- -1)>0||(T.msfix=G.msfix),M==0&&(T.VBR_q=V,T.VBR_q_frac=O)}var z=[new F(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new F(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new F(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new F(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new F(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new F(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new F(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new F(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new F(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new F(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new F(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new F(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new F(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new F(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new F(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new F(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new F(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function D(T,V,M){var J=V,O=$.nearestBitrateFullIndex(V);if(T.VBR=Z1.vbr_abr,T.VBR_mean_bitrate_kbps=J,T.VBR_mean_bitrate_kbps=Math.min(T.VBR_mean_bitrate_kbps,320),T.VBR_mean_bitrate_kbps=Math.max(T.VBR_mean_bitrate_kbps,8),T.brate=T.VBR_mean_bitrate_kbps,T.VBR_mean_bitrate_kbps>320&&(T.disable_reservoir=!0),z[O].safejoint>0&&(T.exp_nspsytune=T.exp_nspsytune|2),z[O].sfscale>0&&(T.internal_flags.noise_shaping=2),Math.abs(z[O].nsbass)>0){var Y=int(z[O].nsbass*4);Y<0&&(Y+=64),T.exp_nspsytune=T.exp_nspsytune|Y<<2}return M!=0?T.quant_comp=z[O].quant_comp:Math.abs(T.quant_comp- -1)>0||(T.quant_comp=z[O].quant_comp),M!=0?T.quant_comp_short=z[O].quant_comp_s:Math.abs(T.quant_comp_short- -1)>0||(T.quant_comp_short=z[O].quant_comp_s),M!=0?T.msfix=z[O].nsmsfix:Math.abs(T.msfix- -1)>0||(T.msfix=z[O].nsmsfix),M!=0?T.internal_flags.nsPsy.attackthre=z[O].st_lrm:Math.abs(T.internal_flags.nsPsy.attackthre- -1)>0||(T.internal_flags.nsPsy.attackthre=z[O].st_lrm),M!=0?T.internal_flags.nsPsy.attackthre_s=z[O].st_s:Math.abs(T.internal_flags.nsPsy.attackthre_s- -1)>0||(T.internal_flags.nsPsy.attackthre_s=z[O].st_s),M!=0?T.scale=z[O].scale:Math.abs(T.scale- -1)>0||(T.scale=z[O].scale),M!=0?T.maskingadjust=z[O].masking_adj:Math.abs(T.maskingadjust-0)>0||(T.maskingadjust=z[O].masking_adj),z[O].masking_adj>0?M!=0?T.maskingadjust_short=z[O].masking_adj*.9:Math.abs(T.maskingadjust_short-0)>0||(T.maskingadjust_short=z[O].masking_adj*.9):M!=0?T.maskingadjust_short=z[O].masking_adj*1.1:Math.abs(T.maskingadjust_short-0)>0||(T.maskingadjust_short=z[O].masking_adj*1.1),M!=0?T.ATHlower=-z[O].ath_lower/10:Math.abs(-T.ATHlower*10-0)>0||(T.ATHlower=-z[O].ath_lower/10),M!=0?T.ATHcurve=z[O].ath_curve:Math.abs(T.ATHcurve- -1)>0||(T.ATHcurve=z[O].ath_curve),M!=0?T.interChRatio=z[O].interch:Math.abs(T.interChRatio- -1)>0||(T.interChRatio=z[O].interch),V}this.apply_preset=function(T,V,M){switch(V){case Lame.R3MIX:{V=Lame.V3,T.VBR=Z1.vbr_mtrh;break}case Lame.MEDIUM:{V=Lame.V4,T.VBR=Z1.vbr_rh;break}case Lame.MEDIUM_FAST:{V=Lame.V4,T.VBR=Z1.vbr_mtrh;break}case Lame.STANDARD:{V=Lame.V2,T.VBR=Z1.vbr_rh;break}case Lame.STANDARD_FAST:{V=Lame.V2,T.VBR=Z1.vbr_mtrh;break}case Lame.EXTREME:{V=Lame.V0,T.VBR=Z1.vbr_rh;break}case Lame.EXTREME_FAST:{V=Lame.V0,T.VBR=Z1.vbr_mtrh;break}case Lame.INSANE:return V=320,T.preset=V,D(T,V,M),T.VBR=Z1.vbr_off,V}switch(T.preset=V,V){case Lame.V9:return K(T,9,M),V;case Lame.V8:return K(T,8,M),V;case Lame.V7:return K(T,7,M),V;case Lame.V6:return K(T,6,M),V;case Lame.V5:return K(T,5,M),V;case Lame.V4:return K(T,4,M),V;case Lame.V3:return K(T,3,M),V;case Lame.V2:return K(T,2,M),V;case Lame.V1:return K(T,1,M),V;case Lame.V0:return K(T,0,M),V}return 8<=V&&V<=320?D(T,V,M):(T.preset=0,V)};function Z(T,V){var M=0;return 0>V&&(M=-1,V=0),9<V&&(M=-1,V=9),T.VBR_q=V,T.VBR_q_frac=0,M}}var Br=Er;function Tr(){this.setModules=function(E,F){}}var wr=Tr;function yr(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var Ir=yr,da=C0,Da=da.new_float,Lr=da.new_int;da.assert;function Nr(){this.global_gain=0,this.sfb_count1=0,this.step=Lr(39),this.noise=Da(39),this.noise_log=Da(39)}var Vr=Nr,R1=C0,g1=R1.System,Pa=R1.VbrMode;R1.Float;R1.ShortBlock;var ha=R1.Util,Re=R1.Arrays;R1.new_array_n;R1.new_byte;R1.new_double;var Ie=R1.new_float;R1.new_float_n;R1.new_int;R1.new_int_n;var C1=R1.assert,pr=wr,ua=Ir,Hr=Vr,I0=j0(),Ua=ba,Za=Pe;function Or(){var E;this.rv=null;var F;this.qupvt=null;var $,P=new pr,n0;this.setModules=function(d,n,e,c){E=d,F=n,this.rv=n,$=e,this.qupvt=e,n0=c,P.setModules($,n0)},this.ms_convert=function(d,n){for(var e=0;e<576;++e){var c=d.tt[n][0].xr[e],h=d.tt[n][1].xr[e];d.tt[n][0].xr[e]=(c+h)*(ha.SQRT2*.5),d.tt[n][1].xr[e]=(c-h)*(ha.SQRT2*.5)}};function K(d,n,e,c){c=0;for(var h=0;h<=e;++h){var A=Math.abs(d.xr[h]);c+=A,n[h]=Math.sqrt(A*Math.sqrt(A)),n[h]>d.xrpow_max&&(d.xrpow_max=n[h])}return c}this.init_xrpow=function(d,n,e){var c=0,h=0|n.max_nonzero_coeff;if(C1(e!=null),n.xrpow_max=0,C1(0<=h&&h<=575),Re.fill(e,h,576,0),c=K(n,e,h,c),c>1e-20){var A=0;d.substep_shaping&2&&(A=1);for(var f=0;f<n.psymax;f++)d.pseudohalf[f]=A;return!0}return Re.fill(n.l3_enc,0,576,0),!1};function z(d,n){var e=d.ATH,c=n.xr;if(n.block_type!=I0.SHORT_TYPE)for(var h=!1,A=I0.PSFB21-1;A>=0&&!h;A--){var f=d.scalefac_band.psfb21[A],m=d.scalefac_band.psfb21[A+1],u=$.athAdjust(e.adjust,e.psfb21[A],e.floor);d.nsPsy.longfact[21]>1e-12&&(u*=d.nsPsy.longfact[21]);for(var i=m-1;i>=f;i--)if(Math.abs(c[i])<u)c[i]=0;else{h=!0;break}}else for(var t=0;t<3;t++)for(var h=!1,A=I0.PSFB12-1;A>=0&&!h;A--){var f=d.scalefac_band.s[12]*3+(d.scalefac_band.s[13]-d.scalefac_band.s[12])*t+(d.scalefac_band.psfb12[A]-d.scalefac_band.psfb12[0]),m=f+(d.scalefac_band.psfb12[A+1]-d.scalefac_band.psfb12[A]),a=$.athAdjust(e.adjust,e.psfb12[A],e.floor);d.nsPsy.shortfact[12]>1e-12&&(a*=d.nsPsy.shortfact[12]);for(var i=m-1;i>=f;i--)if(Math.abs(c[i])<a)c[i]=0;else{h=!0;break}}}this.init_outer_loop=function(d,n){n.part2_3_length=0,n.big_values=0,n.count1=0,n.global_gain=210,n.scalefac_compress=0,n.table_select[0]=0,n.table_select[1]=0,n.table_select[2]=0,n.subblock_gain[0]=0,n.subblock_gain[1]=0,n.subblock_gain[2]=0,n.subblock_gain[3]=0,n.region0_count=0,n.region1_count=0,n.preflag=0,n.scalefac_scale=0,n.count1table_select=0,n.part2_length=0,n.sfb_lmax=I0.SBPSY_l,n.sfb_smin=I0.SBPSY_s,n.psy_lmax=d.sfb21_extra?I0.SBMAX_l:I0.SBPSY_l,n.psymax=n.psy_lmax,n.sfbmax=n.sfb_lmax,n.sfbdivide=11;for(var e=0;e<I0.SBMAX_l;e++)n.width[e]=d.scalefac_band.l[e+1]-d.scalefac_band.l[e],n.window[e]=3;if(n.block_type==I0.SHORT_TYPE){var c=Ie(576);n.sfb_smin=0,n.sfb_lmax=0,n.mixed_block_flag!=0&&(n.sfb_smin=3,n.sfb_lmax=d.mode_gr*2+4),n.psymax=n.sfb_lmax+3*((d.sfb21_extra?I0.SBMAX_s:I0.SBPSY_s)-n.sfb_smin),n.sfbmax=n.sfb_lmax+3*(I0.SBPSY_s-n.sfb_smin),n.sfbdivide=n.sfbmax-18,n.psy_lmax=n.sfb_lmax;var h=d.scalefac_band.l[n.sfb_lmax];g1.arraycopy(n.xr,0,c,0,576);for(var e=n.sfb_smin;e<I0.SBMAX_s;e++)for(var A=d.scalefac_band.s[e],f=d.scalefac_band.s[e+1],m=0;m<3;m++)for(var u=A;u<f;u++)n.xr[h++]=c[3*u+m];for(var i=n.sfb_lmax,e=n.sfb_smin;e<I0.SBMAX_s;e++)n.width[i]=n.width[i+1]=n.width[i+2]=d.scalefac_band.s[e+1]-d.scalefac_band.s[e],n.window[i]=0,n.window[i+1]=1,n.window[i+2]=2,i+=3}n.count1bits=0,n.sfb_partition_table=$.nr_of_sfb_block[0][0],n.slen[0]=0,n.slen[1]=0,n.slen[2]=0,n.slen[3]=0,n.max_nonzero_coeff=575,Re.fill(n.scalefac,0),z(d,n)};function D(d){this.ordinal=d}D.BINSEARCH_NONE=new D(0),D.BINSEARCH_UP=new D(1),D.BINSEARCH_DOWN=new D(2);function Z(d,n,e,c,h){var A,f=d.CurrentStep[c],m=!1,u=d.OldValue[c],i=D.BINSEARCH_NONE;for(n.global_gain=u,e-=n.part2_length,C1(f!=0);;){var t;if(A=n0.count_bits(d,h,n,null),f==1||A==e)break;A>e?(i==D.BINSEARCH_DOWN&&(m=!0),m&&(f/=2),i=D.BINSEARCH_UP,t=f):(i==D.BINSEARCH_UP&&(m=!0),m&&(f/=2),i=D.BINSEARCH_DOWN,t=-f),n.global_gain+=t,n.global_gain<0&&(n.global_gain=0,m=!0),n.global_gain>255&&(n.global_gain=255,m=!0)}for(C1(n.global_gain>=0),C1(n.global_gain<256);A>e&&n.global_gain<255;)n.global_gain++,A=n0.count_bits(d,h,n,null);return d.CurrentStep[c]=u-n.global_gain>=4?4:2,d.OldValue[c]=n.global_gain,n.part2_3_length=A,A}this.trancate_smallspectrums=function(d,n,e,c){var h=Ie(Za.SFBMAX);if(!(!(d.substep_shaping&4)&&n.block_type==I0.SHORT_TYPE||d.substep_shaping&128)){$.calc_noise(n,e,h,new ua,null);for(var f=0;f<576;f++){var A=0;n.l3_enc[f]!=0&&(A=Math.abs(n.xr[f])),c[f]=A}var f=0,m=8;n.block_type==I0.SHORT_TYPE&&(m=6);do{var u,i,t,a,s=n.width[m];if(f+=s,!(h[m]>=1)&&(Re.sort(c,f-s,s),!BitStream.EQ(c[f-1],0))){u=(1-h[m])*e[m],i=0,a=0;do{var _;for(t=1;a+t<s&&!BitStream.NEQ(c[a+f-s],c[a+f+t-s]);t++);if(_=c[a+f-s]*c[a+f-s]*t,u<_){a!=0&&(i=c[a+f-s-1]);break}u-=_,a+=t}while(a<s);if(!BitStream.EQ(i,0))do Math.abs(n.xr[f-s])<=i&&(n.l3_enc[f-s]=0);while(--s>0)}}while(++m<n.psymax);n.part2_3_length=n0.noquant_count_bits(d,n,null)}};function T(d){for(var n=0;n<d.sfbmax;n++)if(d.scalefac[n]+d.subblock_gain[d.window[n]]==0)return!1;return!0}function V(d){return ha.FAST_LOG10(.368+.632*d*d*d)}function M(d,n){for(var e=1e-37,c=0;c<n.psymax;c++)e+=V(d[c]);return Math.max(1e-20,e)}function J(d,n,e,c,h){var A;switch(d){default:case 9:{n.over_count>0?(A=e.over_SSD<=n.over_SSD,e.over_SSD==n.over_SSD&&(A=e.bits<n.bits)):A=e.max_noise<0&&e.max_noise*10+e.bits<=n.max_noise*10+n.bits;break}case 0:A=e.over_count<n.over_count||e.over_count==n.over_count&&e.over_noise<n.over_noise||e.over_count==n.over_count&&BitStream.EQ(e.over_noise,n.over_noise)&&e.tot_noise<n.tot_noise;break;case 8:e.max_noise=M(h,c);case 1:A=e.max_noise<n.max_noise;break;case 2:A=e.tot_noise<n.tot_noise;break;case 3:A=e.tot_noise<n.tot_noise&&e.max_noise<n.max_noise;break;case 4:A=e.max_noise<=0&&n.max_noise>.2||e.max_noise<=0&&n.max_noise<0&&n.max_noise>e.max_noise-.2&&e.tot_noise<n.tot_noise||e.max_noise<=0&&n.max_noise>0&&n.max_noise>e.max_noise-.2&&e.tot_noise<n.tot_noise+n.over_noise||e.max_noise>0&&n.max_noise>-.05&&n.max_noise>e.max_noise-.1&&e.tot_noise+e.over_noise<n.tot_noise+n.over_noise||e.max_noise>0&&n.max_noise>-.1&&n.max_noise>e.max_noise-.15&&e.tot_noise+e.over_noise+e.over_noise<n.tot_noise+n.over_noise+n.over_noise;break;case 5:A=e.over_noise<n.over_noise||BitStream.EQ(e.over_noise,n.over_noise)&&e.tot_noise<n.tot_noise;break;case 6:A=e.over_noise<n.over_noise||BitStream.EQ(e.over_noise,n.over_noise)&&(e.max_noise<n.max_noise||BitStream.EQ(e.max_noise,n.max_noise)&&e.tot_noise<=n.tot_noise);break;case 7:A=e.over_count<n.over_count||e.over_noise<n.over_noise;break}return n.over_count==0&&(A=A&&e.bits<n.bits),A}function O(d,n,e,c,h){var A=d.internal_flags,f;n.scalefac_scale==0?f=1.2968395546510096:f=1.6817928305074292;for(var m=0,u=0;u<n.sfbmax;u++)m<e[u]&&(m=e[u]);var i=A.noise_shaping_amp;switch(i==3&&(h?i=2:i=1),i){case 2:break;case 1:m>1?m=Math.pow(m,.5):m*=.95;break;case 0:default:m>1?m=1:m*=.95;break}for(var t=0,u=0;u<n.sfbmax;u++){var a=n.width[u],s;if(t+=a,!(e[u]<m)){if(A.substep_shaping&2&&(A.pseudohalf[u]=A.pseudohalf[u]==0?1:0,A.pseudohalf[u]==0&&A.noise_shaping_amp==2))return;for(n.scalefac[u]++,s=-a;s<0;s++)c[t+s]*=f,c[t+s]>n.xrpow_max&&(n.xrpow_max=c[t+s]);if(A.noise_shaping_amp==2)return}}}function Y(d,n){for(var e=1.2968395546510096,c=0,h=0;h<d.sfbmax;h++){var A=d.width[h],f=d.scalefac[h];if(d.preflag!=0&&(f+=$.pretab[h]),c+=A,f&1){f++;for(var m=-A;m<0;m++)n[c+m]*=e,n[c+m]>d.xrpow_max&&(d.xrpow_max=n[c+m])}d.scalefac[h]=f>>1}d.preflag=0,d.scalefac_scale=1}function q(d,n,e){var c,h=n.scalefac;for(c=0;c<n.sfb_lmax;c++)if(h[c]>=16)return!0;for(var A=0;A<3;A++){var f=0,m=0;for(c=n.sfb_lmax+A;c<n.sfbdivide;c+=3)f<h[c]&&(f=h[c]);for(;c<n.sfbmax;c+=3)m<h[c]&&(m=h[c]);if(!(f<16&&m<8)){if(n.subblock_gain[A]>=7)return!0;n.subblock_gain[A]++;var u=d.scalefac_band.l[n.sfb_lmax];for(c=n.sfb_lmax+A;c<n.sfbmax;c+=3){var i,t=n.width[c],a=h[c];if(C1(a>=0),a=a-(4>>n.scalefac_scale),a>=0){h[c]=a,u+=t*3;continue}h[c]=0;{var s=210+(a<<n.scalefac_scale+1);i=$.IPOW20(s)}u+=t*(A+1);for(var _=-t;_<0;_++)e[u+_]*=i,e[u+_]>n.xrpow_max&&(n.xrpow_max=e[u+_]);u+=t*(3-A-1)}{var i=$.IPOW20(202);u+=n.width[c]*(A+1);for(var _=-n.width[c];_<0;_++)e[u+_]*=i,e[u+_]>n.xrpow_max&&(n.xrpow_max=e[u+_])}}}return!1}function G(d,n,e,c,h){var A=d.internal_flags;O(d,n,e,c,h);var f=T(n);return f?!1:(A.mode_gr==2?f=n0.scale_bitcount(n):f=n0.scale_bitcount_lsf(A,n),f?(A.noise_shaping>1&&(Re.fill(A.pseudohalf,0),n.scalefac_scale==0?(Y(n,c),f=!1):n.block_type==I0.SHORT_TYPE&&A.subblock_gain>0&&(f=q(A,n,c)||T(n))),f||(A.mode_gr==2?f=n0.scale_bitcount(n):f=n0.scale_bitcount_lsf(A,n)),!f):!0)}this.outer_loop=function(d,n,e,c,h,A){var f=d.internal_flags,m=new Ua,u=Ie(576),i=Ie(Za.SFBMAX),t=new ua,a,s=new Hr,_=9999999,v=!1,o=!1,L=0;if(Z(f,n,A,h,c),f.noise_shaping==0)return 100;$.calc_noise(n,e,i,t,s),t.bits=n.part2_3_length,m.assign(n);var x=0;for(g1.arraycopy(c,0,u,0,576);!v;){do{var y=new ua,r,l=255;if(f.substep_shaping&2?r=20:r=3,f.sfb21_extra&&(i[m.sfbmax]>1||m.block_type==I0.SHORT_TYPE&&(i[m.sfbmax+1]>1||i[m.sfbmax+2]>1))||!G(d,m,i,c,o))break;m.scalefac_scale!=0&&(l=254);var I=A-m.part2_length;if(I<=0)break;for(;(m.part2_3_length=n0.count_bits(f,c,m,s))>I&&m.global_gain<=l;)m.global_gain++;if(m.global_gain>l)break;if(t.over_count==0){for(;(m.part2_3_length=n0.count_bits(f,c,m,s))>_&&m.global_gain<=l;)m.global_gain++;if(m.global_gain>l)break}if($.calc_noise(m,e,i,y,s),y.bits=m.part2_3_length,n.block_type!=I0.SHORT_TYPE?a=d.quant_comp:a=d.quant_comp_short,a=J(a,t,y,m,i)?1:0,a!=0)_=n.part2_3_length,t=y,n.assign(m),x=0,g1.arraycopy(c,0,u,0,576);else if(f.full_outer_loop==0&&(++x>r&&t.over_count==0||f.noise_shaping_amp==3&&o&&x>30||f.noise_shaping_amp==3&&o&&m.global_gain-L>15))break}while(m.global_gain+m.scalefac_scale<255);f.noise_shaping_amp==3?o?v=!0:(m.assign(n),g1.arraycopy(u,0,c,0,576),x=0,L=m.global_gain,o=!0):v=!0}return C1(n.global_gain+n.scalefac_scale<=255),d.VBR==Pa.vbr_rh||d.VBR==Pa.vbr_mtrh?g1.arraycopy(u,0,c,0,576):f.substep_shaping&1&&trancate_smallspectrums(f,n,e,c),t.over_count},this.iteration_finish_one=function(d,n,e){var c=d.l3_side,h=c.tt[n][e];n0.best_scalefac_store(d,n,e,c),d.use_best_huffman==1&&n0.best_huffman_divide(d,h),F.ResvAdjust(d,h)},this.VBR_encode_granule=function(d,n,e,c,h,A,f){var m=d.internal_flags,u=new Ua,i=Ie(576),t=f,a=f+1,s=(f+A)/2,_,v,o=0,L=m.sfb21_extra;C1(t<=LameInternalFlags.MAX_BITS_PER_CHANNEL),Re.fill(u.l3_enc,0);do C1(s>=A),C1(s<=f),C1(A<=f),s>t-42?m.sfb21_extra=!1:m.sfb21_extra=L,v=outer_loop(d,n,e,c,h,s),v<=0?(o=1,a=n.part2_3_length,u.assign(n),g1.arraycopy(c,0,i,0,576),f=a-32,_=f-A,s=(f+A)/2):(A=s+32,_=f-A,s=(f+A)/2,o!=0&&(o=2,n.assign(u),g1.arraycopy(i,0,c,0,576)));while(_>12);m.sfb21_extra=L,o==2&&g1.arraycopy(u.l3_enc,0,n.l3_enc,0,576),C1(n.part2_3_length<=t)},this.get_framebits=function(d,n){var e=d.internal_flags;e.bitrate_index=e.VBR_min_bitrate;var c=E.getframebits(d);e.bitrate_index=1,c=E.getframebits(d);for(var h=1;h<=e.VBR_max_bitrate;h++){e.bitrate_index=h;var A=new MeanBits(c);n[h]=F.ResvFrameBegin(d,A),c=A.bits}},this.VBR_old_prepare=function(d,n,e,c,h,A,f,m,u){var i=d.internal_flags,t,a=0,s=1,_=0;i.bitrate_index=i.VBR_max_bitrate;var v=F.ResvFrameBegin(d,new MeanBits(0))/i.mode_gr;get_framebits(d,A);for(var o=0;o<i.mode_gr;o++){var L=$.on_pe(d,n,m[o],v,o,0);i.mode_ext==I0.MPG_MD_MS_LR&&(ms_convert(i.l3_side,o),$.reduce_side(m[o],e[o],v,L));for(var x=0;x<i.channels_out;++x){var y=i.l3_side.tt[o][x];y.block_type!=I0.SHORT_TYPE?(a=1.28/(1+Math.exp(3.5-n[o][x]/300))-.05,t=i.PSY.mask_adjust-a):(a=2.56/(1+Math.exp(3.5-n[o][x]/300))-.14,t=i.PSY.mask_adjust_short-a),i.masking_lower=Math.pow(10,t*.1),init_outer_loop(i,y),u[o][x]=$.calc_xmin(d,c[o][x],y,h[o][x]),u[o][x]!=0&&(s=0),f[o][x]=126,_+=m[o][x]}}for(var o=0;o<i.mode_gr;o++)for(var x=0;x<i.channels_out;x++)_>A[i.VBR_max_bitrate]&&(m[o][x]*=A[i.VBR_max_bitrate],m[o][x]/=_),f[o][x]>m[o][x]&&(f[o][x]=m[o][x]);return s},this.bitpressure_strategy=function(d,n,e,c){for(var h=0;h<d.mode_gr;h++)for(var A=0;A<d.channels_out;A++){for(var f=d.l3_side.tt[h][A],m=n[h][A],u=0,i=0;i<f.psy_lmax;i++)m[u++]*=1+.029*i*i/I0.SBMAX_l/I0.SBMAX_l;if(f.block_type==I0.SHORT_TYPE)for(var i=f.sfb_smin;i<I0.SBMAX_s;i++)m[u++]*=1+.029*i*i/I0.SBMAX_s/I0.SBMAX_s,m[u++]*=1+.029*i*i/I0.SBMAX_s/I0.SBMAX_s,m[u++]*=1+.029*i*i/I0.SBMAX_s/I0.SBMAX_s;c[h][A]=0|Math.max(e[h][A],.9*c[h][A])}},this.VBR_new_prepare=function(d,n,e,c,h,A){var f=d.internal_flags,m=1,u=0,i=0,t;if(d.free_format){f.bitrate_index=0;var a=new MeanBits(u);t=F.ResvFrameBegin(d,a),u=a.bits,h[0]=t}else{f.bitrate_index=f.VBR_max_bitrate;var a=new MeanBits(u);F.ResvFrameBegin(d,a),u=a.bits,get_framebits(d,h),t=h[f.VBR_max_bitrate]}for(var s=0;s<f.mode_gr;s++){$.on_pe(d,n,A[s],u,s,0),f.mode_ext==I0.MPG_MD_MS_LR&&ms_convert(f.l3_side,s);for(var _=0;_<f.channels_out;++_){var v=f.l3_side.tt[s][_];f.masking_lower=Math.pow(10,f.PSY.mask_adjust*.1),init_outer_loop(f,v),$.calc_xmin(d,e[s][_],v,c[s][_])!=0&&(m=0),i+=A[s][_]}}for(var s=0;s<f.mode_gr;s++)for(var _=0;_<f.channels_out;_++)i>t&&(A[s][_]*=t,A[s][_]/=i);return m},this.calc_target_bits=function(d,n,e,c,h,A){var f=d.internal_flags,m=f.l3_side,u,i,t,a,s=0;f.bitrate_index=f.VBR_max_bitrate;var _=new MeanBits(s);for(A[0]=F.ResvFrameBegin(d,_),s=_.bits,f.bitrate_index=1,s=E.getframebits(d)-f.sideinfo_len*8,h[0]=s/(f.mode_gr*f.channels_out),s=d.VBR_mean_bitrate_kbps*d.framesize*1e3,f.substep_shaping&1&&(s*=1.09),s/=d.out_samplerate,s-=f.sideinfo_len*8,s/=f.mode_gr*f.channels_out,u=.93+.07*(11-d.compression_ratio)/(11-5.5),u<.9&&(u=.9),u>1&&(u=1),i=0;i<f.mode_gr;i++){var v=0;for(t=0;t<f.channels_out;t++){if(c[i][t]=int(u*s),n[i][t]>700){var o=int((n[i][t]-700)/1.4),L=m.tt[i][t];c[i][t]=int(u*s),L.block_type==I0.SHORT_TYPE&&o<s/2&&(o=s/2),o>s*3/2?o=s*3/2:o<0&&(o=0),c[i][t]+=o}c[i][t]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(c[i][t]=LameInternalFlags.MAX_BITS_PER_CHANNEL),v+=c[i][t]}if(v>LameInternalFlags.MAX_BITS_PER_GRANULE)for(t=0;t<f.channels_out;++t)c[i][t]*=LameInternalFlags.MAX_BITS_PER_GRANULE,c[i][t]/=v}if(f.mode_ext==I0.MPG_MD_MS_LR)for(i=0;i<f.mode_gr;i++)$.reduce_side(c[i],e[i],s*f.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(a=0,i=0;i<f.mode_gr;i++)for(t=0;t<f.channels_out;t++)c[i][t]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(c[i][t]=LameInternalFlags.MAX_BITS_PER_CHANNEL),a+=c[i][t];if(a>A[0])for(i=0;i<f.mode_gr;i++)for(t=0;t<f.channels_out;t++)c[i][t]*=A[0],c[i][t]/=a}}var Cr=Or,Fr=C0,Ye=Fr.assert;function kr(){var E;this.setModules=function(F){E=F},this.ResvFrameBegin=function(F,$){var P=F.internal_flags,n0,K=P.l3_side,z=E.getframebits(F);$.bits=(z-P.sideinfo_len*8)/P.mode_gr;var D=8*256*P.mode_gr-8;F.brate>320?n0=8*int(F.brate*1e3/(F.out_samplerate/1152)/8+.5):(n0=8*1440,F.strict_ISO&&(n0=8*int(32e4/(F.out_samplerate/1152)/8+.5))),P.ResvMax=n0-z,P.ResvMax>D&&(P.ResvMax=D),(P.ResvMax<0||F.disable_reservoir)&&(P.ResvMax=0);var Z=$.bits*P.mode_gr+Math.min(P.ResvSize,P.ResvMax);return Z>n0&&(Z=n0),Ye(P.ResvMax%8==0),Ye(P.ResvMax>=0),K.resvDrain_pre=0,P.pinfo!=null&&(P.pinfo.mean_bits=$.bits/2,P.pinfo.resvsize=P.ResvSize),Z},this.ResvMaxBits=function(F,$,P,n0){var K=F.internal_flags,z,D=K.ResvSize,Z=K.ResvMax;n0!=0&&(D+=$),K.substep_shaping&1&&(Z*=.9),P.bits=$,D*10>Z*9?(z=D-Z*9/10,P.bits+=z,K.substep_shaping|=128):(z=0,K.substep_shaping&=127,!F.disable_reservoir&&!(K.substep_shaping&1)&&(P.bits-=.1*$));var T=D<K.ResvMax*6/10?D:K.ResvMax*6/10;return T-=z,T<0&&(T=0),T},this.ResvAdjust=function(F,$){F.ResvSize-=$.part2_3_length+$.part2_length},this.ResvFrameEnd=function(F,$){var P,n0=F.l3_side;F.ResvSize+=$*F.mode_gr;var K=0;n0.resvDrain_post=0,n0.resvDrain_pre=0,(P=F.ResvSize%8)!=0&&(K+=P),P=F.ResvSize-K-F.ResvMax,P>0&&(Ye(P%8==0),Ye(P>=0),K+=P);{var z=Math.min(n0.main_data_begin*8,K)/8;n0.resvDrain_pre+=8*z,K-=8*z,F.ResvSize-=8*z,n0.main_data_begin-=z}n0.resvDrain_post+=K,F.ResvSize-=K}}var Xr=kr;function Yr(){var E="http://www.mp3dev.org/",F=3,$=98,P=4,n0=0,K=93;this.getLameVersion=function(){return F+"."+$+"."+P},this.getLameShortVersion=function(){return F+"."+$+"."+P},this.getLameVeryShortVersion=function(){return"LAME"+F+"."+$+"r"},this.getPsyVersion=function(){return n0+"."+K},this.getLameUrl=function(){return E},this.getLameOsBitness=function(){return"32bits"}}var Gr=Yr,x1=C0,$r=x1.System,fa=x1.VbrMode;x1.Float;var Ka=x1.ShortBlock;x1.Util;var qr=x1.Arrays;x1.new_array_n;var Ge=x1.new_byte;x1.new_double;x1.new_float;x1.new_float_n;x1.new_int;x1.new_int_n;var Dr=x1.assert;Le.NUMTOCENTRIES=100;Le.MAXFRAMESIZE=2880;function Le(){var E,F,$;this.setModules=function(s,_,v){E=s,F=_,$=v};var P=1,n0=2,K=4,z=8,D=Le.NUMTOCENTRIES,Z=Le.MAXFRAMESIZE,T=D+4+4+4+4+4,V=T+9+1+1+8+1+1+3+1+1+2+4+2+2,M=128,J=64,O=32,Y=null,q="Xing",G="Info",d=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function n(s,_){if(s.nVbrNumFrames++,s.sum+=_,s.seen++,!(s.seen<s.want)&&(s.pos<s.size&&(s.bag[s.pos]=s.sum,s.pos++,s.seen=0),s.pos==s.size)){for(var v=1;v<s.size;v+=2)s.bag[v/2]=s.bag[v];s.want*=2,s.pos/=2}}function e(s,_){if(!(s.pos<=0))for(var v=1;v<D;++v){var o=v/D,L,x,y=0|Math.floor(o*s.pos);y>s.pos-1&&(y=s.pos-1),L=s.bag[y],x=s.sum;var r=0|256*L/x;r>255&&(r=255),_[v]=255&r}}this.addVbrFrame=function(s){var _=s.internal_flags,v=Tables.bitrate_table[s.version][_.bitrate_index];Dr(_.VBR_seek_table.bag!=null),n(_.VBR_seek_table,v)};function c(s,_){var v=s[_+0]&255;return v<<=8,v|=s[_+1]&255,v<<=8,v|=s[_+2]&255,v<<=8,v|=s[_+3]&255,v}function h(s,_,v){s[_+0]=255&(v>>24&255),s[_+1]=255&(v>>16&255),s[_+2]=255&(v>>8&255),s[_+3]=255&(v&255)}function A(s,_,v){s[_+0]=255&(v>>8&255),s[_+1]=255&(v&255)}function f(s,_){return new String(s,_,q.length(),Y).equals(q)||new String(s,_,G.length(),Y).equals(G)}function m(s,_,v){return 255&(s<<_|v&~(-1<<_))}function u(s,_){var v=s.internal_flags;_[0]=m(_[0],8,255),_[1]=m(_[1],3,7),_[1]=m(_[1],1,s.out_samplerate<16e3?0:1),_[1]=m(_[1],1,s.version),_[1]=m(_[1],2,1),_[1]=m(_[1],1,s.error_protection?0:1),_[2]=m(_[2],4,v.bitrate_index),_[2]=m(_[2],2,v.samplerate_index),_[2]=m(_[2],1,0),_[2]=m(_[2],1,s.extension),_[3]=m(_[3],2,s.mode.ordinal()),_[3]=m(_[3],2,v.mode_ext),_[3]=m(_[3],1,s.copyright),_[3]=m(_[3],1,s.original),_[3]=m(_[3],2,s.emphasis),_[0]=255;var o=255&(_[1]&241),L;s.version==1?L=M:s.out_samplerate<16e3?L=O:L=J,s.VBR==fa.vbr_off&&(L=s.brate);var x;s.free_format?x=0:x=255&16*E.BitrateIndex(L,s.version,s.out_samplerate),s.version==1?(_[1]=255&(o|10),o=255&(_[2]&13),_[2]=255&(x|o)):(_[1]=255&(o|2),o=255&(_[2]&13),_[2]=255&(x|o))}this.getVbrTag=function(s){var _=new VBRTagData,v=0;_.flags=0;var o=s[v+1]>>3&1,L=s[v+2]>>2&3,x=s[v+3]>>6&3,y=s[v+2]>>4&15;if(y=Tables.bitrate_table[o][y],s[v+1]>>4==14?_.samprate=Tables.samplerate_table[2][L]:_.samprate=Tables.samplerate_table[o][L],o!=0?x!=3?v+=36:v+=21:x!=3?v+=21:v+=13,!f(s,v))return null;v+=4,_.hId=o;var r=_.flags=c(s,v);if(v+=4,r&P&&(_.frames=c(s,v),v+=4),r&n0&&(_.bytes=c(s,v),v+=4),r&K){if(_.toc!=null)for(var l=0;l<D;l++)_.toc[l]=s[v+l];v+=D}_.vbrScale=-1,r&z&&(_.vbrScale=c(s,v),v+=4),_.headersize=(o+1)*72e3*y/_.samprate,v+=21;var I=s[v+0]<<4;I+=s[v+1]>>4;var N=(s[v+1]&15)<<8;return N+=s[v+2]&255,(I<0||I>3e3)&&(I=-1),(N<0||N>3e3)&&(N=-1),_.encDelay=I,_.encPadding=N,_},this.InitVbrTag=function(s){var _=s.internal_flags,v;s.version==1?v=M:s.out_samplerate<16e3?v=O:v=J,s.VBR==fa.vbr_off&&(v=s.brate);var o=(s.version+1)*72e3*v/s.out_samplerate,L=_.sideinfo_len+V;if(_.VBR_seek_table.TotalFrameSize=o,o<L||o>Z){s.bWriteVbrTag=!1;return}_.VBR_seek_table.nVbrNumFrames=0,_.VBR_seek_table.nBytesWritten=0,_.VBR_seek_table.sum=0,_.VBR_seek_table.seen=0,_.VBR_seek_table.want=1,_.VBR_seek_table.pos=0,_.VBR_seek_table.bag==null&&(_.VBR_seek_table.bag=new int[400],_.VBR_seek_table.size=400);var x=Ge(Z);u(s,x);for(var y=_.VBR_seek_table.TotalFrameSize,r=0;r<y;++r)F.add_dummy_byte(s,x[r]&255,1)};function i(s,_){var v=_^s;return _=_>>8^d[v&255],_}this.updateMusicCRC=function(s,_,v,o){for(var L=0;L<o;++L)s[0]=i(_[v+L],s[0])};function t(s,_,v,o,L){var x=s.internal_flags,y=0,r=s.encoder_delay,l=s.encoder_padding,I=100-10*s.VBR_q-s.quality,N=$.getLameVeryShortVersion(),t0,l0=0,i0,_0=[1,5,3,2,4,0,3],S0=0|(s.lowpassfreq/100+.5>255?255:s.lowpassfreq/100+.5),h0=0,s0=0,B0=0,F0=s.internal_flags.noise_shaping,A0=0,w0=0,T0=0,Y0=0,Z0=0,q1=(s.exp_nspsytune&1)!=0,B1=(s.exp_nspsytune&2)!=0,e1=!1,F1=!1,ee=s.internal_flags.nogap_total,J1=s.internal_flags.nogap_current,z0=s.ATHtype,ae=0,K1;switch(s.VBR){case vbr_abr:K1=s.VBR_mean_bitrate_kbps;break;case vbr_off:K1=s.brate;break;default:K1=s.VBR_min_bitrate_kbps}switch(s.VBR.ordinal()<_0.length?t0=_0[s.VBR.ordinal()]:t0=0,i0=16*l0+t0,x.findReplayGain&&(x.RadioGain>510&&(x.RadioGain=510),x.RadioGain<-510&&(x.RadioGain=-510),s0=8192,s0|=3072,x.RadioGain>=0?s0|=x.RadioGain:(s0|=512,s0|=-x.RadioGain)),x.findPeakSample&&(h0=Math.abs(0|x.PeakSample/32767*Math.pow(2,23)+.5)),ee!=-1&&(J1>0&&(F1=!0),J1<ee-1&&(e1=!0)),ae=z0+((q1?1:0)<<4)+((B1?1:0)<<5)+((e1?1:0)<<6)+((F1?1:0)<<7),I<0&&(I=0),s.mode){case MONO:A0=0;break;case STEREO:A0=1;break;case DUAL_CHANNEL:A0=2;break;case JOINT_STEREO:s.force_ms?A0=4:A0=3;break;case NOT_SET:default:A0=7;break}s.in_samplerate<=32e3?T0=0:s.in_samplerate==48e3?T0=2:s.in_samplerate>48e3?T0=3:T0=1,(s.short_blocks==Ka.short_block_forced||s.short_blocks==Ka.short_block_dispensed||s.lowpassfreq==-1&&s.highpassfreq==-1||s.scale_left<s.scale_right||s.scale_left>s.scale_right||s.disable_reservoir&&s.brate<320||s.noATH||s.ATHonly||z0==0||s.in_samplerate<=32e3)&&(w0=1),Y0=F0+(A0<<2)+(w0<<5)+(T0<<6),Z0=x.nMusicCRC,h(v,o+y,I),y+=4;for(var T1=0;T1<9;T1++)v[o+y+T1]=255&N.charAt(T1);y+=9,v[o+y]=255&i0,y++,v[o+y]=255&S0,y++,h(v,o+y,h0),y+=4,A(v,o+y,s0),y+=2,A(v,o+y,B0),y+=2,v[o+y]=255&ae,y++,K1>=255?v[o+y]=255:v[o+y]=255&K1,y++,v[o+y]=255&r>>4,v[o+y+1]=255&(r<<4)+(l>>8),v[o+y+2]=255&l,y+=3,v[o+y]=255&Y0,y++,v[o+y++]=0,A(v,o+y,s.preset),y+=2,h(v,o+y,_),y+=4,A(v,o+y,Z0),y+=2;for(var be=0;be<y;be++)L=i(v[o+be],L);return A(v,o+y,L),y+=2,y}function a(s){s.seek(0);var _=Ge(10);s.readFully(_);var v;return new String(_,"ISO-8859-1").startsWith("ID3")?v=0:v=((_[6]&127)<<21|(_[7]&127)<<14|(_[8]&127)<<7|_[9]&127)+_.length,v}this.getLameTagFrame=function(s,_){var v=s.internal_flags;if(!s.bWriteVbrTag||v.Class_ID!=Lame.LAME_ID||v.VBR_seek_table.pos<=0)return 0;if(_.length<v.VBR_seek_table.TotalFrameSize)return v.VBR_seek_table.TotalFrameSize;qr.fill(_,0,v.VBR_seek_table.TotalFrameSize,0),u(s,_);var o=Ge(D);if(s.free_format)for(var L=1;L<D;++L)o[L]=255&255*L/100;else e(v.VBR_seek_table,o);var x=v.sideinfo_len;s.error_protection&&(x-=2),s.VBR==fa.vbr_off?(_[x++]=255&G.charAt(0),_[x++]=255&G.charAt(1),_[x++]=255&G.charAt(2),_[x++]=255&G.charAt(3)):(_[x++]=255&q.charAt(0),_[x++]=255&q.charAt(1),_[x++]=255&q.charAt(2),_[x++]=255&q.charAt(3)),h(_,x,P+n0+K+z),x+=4,h(_,x,v.VBR_seek_table.nVbrNumFrames),x+=4;var y=v.VBR_seek_table.nBytesWritten+v.VBR_seek_table.TotalFrameSize;h(_,x,0|y),x+=4,$r.arraycopy(o,0,_,x,o.length),x+=o.length,s.error_protection&&F.CRC_writeheader(v,_);for(var r=0,L=0;L<x;L++)r=i(_[L],r);return x+=t(s,y,_,x,r),v.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(s,_){var v=s.internal_flags;if(v.VBR_seek_table.pos<=0||(_.seek(_.length()),_.length()==0))return-1;var o=a(_);_.seek(o);var L=Ge(Z),x=getLameTagFrame(s,L);return x>L.length?-1:(x<1||_.write(L,0,x),0)}}var Pr=Le,E1=C0;E1.System;E1.VbrMode;E1.Float;E1.ShortBlock;E1.Util;E1.Arrays;E1.new_array_n;var Qa=E1.new_byte;E1.new_double;E1.new_float;E1.new_float_n;E1.new_int;E1.new_int_n;var Wa=E1.assert,Ur=xr,Zr=Br,Kr=l2,Qr=v2,Wr=Cr,jr=h2,zr=Xr,Jr=s2,gr=u2;j0();var et=Gr,at=Pr;function rt(){this.setModules=function(E,F){}}function tt(){this.setModules=function(E,F,$){}}function nt(){}function st(){this.setModules=function(E,F){}}function _t(E,F,$){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),E=1,F=44100,$=128);var P=new Ur,n0=new rt,K=new Kr,z=new gr,D=new Zr,Z=new Qr,T=new Wr,V=new at,M=new et,J=new st,O=new zr,Y=new jr,q=new tt,G=new nt;P.setModules(K,z,D,Z,T,V,M,J,G),z.setModules(K,G,M,V),J.setModules(z,M),D.setModules(P),T.setModules(z,O,Z,Y),Z.setModules(Y,O,P.enc.psy),O.setModules(z),Y.setModules(Z),V.setModules(P,z,M),n0.setModules(q,G),q.setModules(M,J,D);var d=P.lame_init();d.num_channels=E,d.in_samplerate=F,d.brate=$,d.mode=Jr.STEREO,d.quality=3,d.bWriteVbrTag=!1,d.disable_reservoir=!0,d.write_id3tag_automatic=!1;var n=P.lame_init_params(d);Wa(n==0);var e=1152,c=0|1.25*e+7200,h=Qa(c);this.encodeBuffer=function(A,f){E==1&&(f=A),Wa(A.length==f.length),A.length>e&&(e=A.length,c=0|1.25*e+7200,h=Qa(c));var m=P.lame_encode_buffer(d,A,f,A.length,h,0,c);return new Int8Array(h.subarray(0,m))},this.flush=function(){var A=P.lame_encode_flush(d,h,0,c);return new Int8Array(h.subarray(0,A))}}function G1(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function Ze(E){return E.charCodeAt(0)<<24|E.charCodeAt(1)<<16|E.charCodeAt(2)<<8|E.charCodeAt(3)}G1.RIFF=Ze("RIFF");G1.WAVE=Ze("WAVE");G1.fmt_=Ze("fmt ");G1.data=Ze("data");G1.readHeader=function(E){var F=new G1,$=E.getUint32(0,!1);if(G1.RIFF==$&&(E.getUint32(4,!0),G1.WAVE==E.getUint32(8,!1)&&G1.fmt_==E.getUint32(12,!1))){var P=E.getUint32(16,!0),n0=20;switch(P){case 16:case 18:F.channels=E.getUint16(n0+2,!0),F.sampleRate=E.getUint32(n0+4,!0);break;default:throw"extended fmt chunk not implemented"}n0+=P;for(var K=G1.data,z=0;K!=$&&($=E.getUint32(n0,!1),z=E.getUint32(n0+4,!0),K!=$);)n0+=z+8;return F.dataLen=z,F.dataOffset=n0+8,F}};var it=$e.Mp3Encoder=_t,lt=$e.WavHeader=G1;const ot=m2({__proto__:null,Mp3Encoder:it,WavHeader:lt,default:$e},[$e]);export{ot as i};
